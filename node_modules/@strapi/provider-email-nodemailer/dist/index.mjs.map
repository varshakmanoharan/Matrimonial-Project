{"version":3,"file":"index.mjs","sources":["../src/index.ts"],"sourcesContent":["import _ from 'lodash';\nimport nodemailer, { SendMailOptions } from 'nodemailer';\n\ninterface Settings {\n  defaultFrom: string;\n  defaultReplyTo: string;\n}\n\ninterface SendOptions {\n  from?: string;\n  to: string;\n  cc: string;\n  bcc: string;\n  replyTo?: string;\n  subject: string;\n  text: string;\n  html: string;\n  [key: string]: unknown;\n}\n\ntype ProviderOptions = Parameters<typeof nodemailer.createTransport>[0];\n\nconst emailFields = [\n  'from',\n  'replyTo',\n  'to',\n  'cc',\n  'bcc',\n  'subject',\n  'text',\n  'html',\n  'attachments',\n];\n\nexport default {\n  provider: 'nodemailer',\n  name: 'Nodemailer',\n\n  init(providerOptions: ProviderOptions, settings: Settings) {\n    const transporter = nodemailer.createTransport(providerOptions);\n\n    return {\n      send(options: SendOptions) {\n        // Default values.\n        const emailOptions: SendMailOptions = {\n          ..._.pick(options, emailFields),\n          from: options.from || settings.defaultFrom,\n          replyTo: options.replyTo || settings.defaultReplyTo,\n          text: options.text || options.html,\n          html: options.html || options.text,\n        };\n\n        return transporter.sendMail(emailOptions);\n      },\n    };\n  },\n};\n"],"names":[],"mappings":";;AAsBA,MAAM,cAAc;AAAA,EAClB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;AAEA,MAAe,QAAA;AAAA,EACb,UAAU;AAAA,EACV,MAAM;AAAA,EAEN,KAAK,iBAAkC,UAAoB;AACnD,UAAA,cAAc,WAAW,gBAAgB,eAAe;AAEvD,WAAA;AAAA,MACL,KAAK,SAAsB;AAEzB,cAAM,eAAgC;AAAA,UACpC,GAAG,EAAE,KAAK,SAAS,WAAW;AAAA,UAC9B,MAAM,QAAQ,QAAQ,SAAS;AAAA,UAC/B,SAAS,QAAQ,WAAW,SAAS;AAAA,UACrC,MAAM,QAAQ,QAAQ,QAAQ;AAAA,UAC9B,MAAM,QAAQ,QAAQ,QAAQ;AAAA,QAAA;AAGzB,eAAA,YAAY,SAAS,YAAY;AAAA,MAC1C;AAAA,IAAA;AAAA,EAEJ;AACF;"}