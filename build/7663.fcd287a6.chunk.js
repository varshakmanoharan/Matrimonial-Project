(self.webpackChunkmatrimony=self.webpackChunkmatrimony||[]).push([[7663],{94445:B=>{function W(n,t,f,h){for(var j=-1,R=n==null?0:n.length;++j<R;){var P=n[j];t(h,P,f(P),n)}return h}B.exports=W},33999:(B,W,n)=>{var t=n(32193),f=t("length");B.exports=f},7233:(B,W,n)=>{var t=n(97449);function f(h,j,R,P){return t(h,function(x,M,z){j(P,x,R(x),z)}),P}B.exports=f},97449:(B,W,n)=>{var t=n(85373),f=n(75821),h=f(t);B.exports=h},41225:(B,W,n)=>{var t=n(81204),f=n(51646),h="[object RegExp]";function j(R){return f(R)&&t(R)==h}B.exports=j},29884:(B,W,n)=>{var t=n(97449),f=n(91522);function h(j,R){var P=-1,x=f(j)?Array(j.length):[];return t(j,function(M,z,X){x[++P]=R(M,z,X)}),x}B.exports=h},4191:(B,W,n)=>{var t=n(87864),f=n(86386),h=n(45353),j=n(29884),R=n(74565),P=n(52689),x=n(48126),M=n(82388),z=n(82261);function X(_,ae,$e){ae.length?ae=t(ae,function(te){return z(te)?function(se){return f(se,te.length===1?te[0]:te)}:te}):ae=[M];var le=-1;ae=t(ae,P(h));var ie=j(_,function(te,se,ne){var Fe=t(ae,function(Ne){return Ne(te)});return{criteria:Fe,index:++le,value:te}});return R(ie,function(te,se){return x(te,se,$e)})}B.exports=X},74565:B=>{function W(n,t){var f=n.length;for(n.sort(t);f--;)n[f]=n[f].value;return n}B.exports=W},64958:(B,W,n)=>{var t=n(91662);function f(h,j){if(h!==j){var R=h!==void 0,P=h===null,x=h===h,M=t(h),z=j!==void 0,X=j===null,_=j===j,ae=t(j);if(!X&&!ae&&!M&&h>j||M&&z&&_&&!X&&!ae||P&&z&&_||!R&&_||!x)return 1;if(!P&&!M&&!ae&&h<j||ae&&R&&x&&!P&&!M||X&&R&&x||!z&&x||!_)return-1}return 0}B.exports=f},48126:(B,W,n)=>{var t=n(64958);function f(h,j,R){for(var P=-1,x=h.criteria,M=j.criteria,z=x.length,X=R.length;++P<z;){var _=t(x[P],M[P]);if(_){if(P>=X)return _;var ae=R[P];return _*(ae=="desc"?-1:1)}}return h.index-j.index}B.exports=f},88532:(B,W,n)=>{var t=n(94445),f=n(7233),h=n(45353),j=n(82261);function R(P,x){return function(M,z){var X=j(M)?t:f,_=x?x():{};return X(M,P,h(z,2),_)}}B.exports=R},75821:(B,W,n)=>{var t=n(91522);function f(h,j){return function(R,P){if(R==null)return R;if(!t(R))return h(R,P);for(var x=R.length,M=j?x:-1,z=Object(R);(j?M--:++M<x)&&P(z[M],M,z)!==!1;);return R}}B.exports=f},49605:(B,W,n)=>{var t=n(33999),f=n(20598),h=n(71387);function j(R){return f(R)?h(R):t(R)}B.exports=j},71387:B=>{var W="\\ud800-\\udfff",n="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",f="\\u20d0-\\u20ff",h=n+t+f,j="\\ufe0e\\ufe0f",R="["+W+"]",P="["+h+"]",x="\\ud83c[\\udffb-\\udfff]",M="(?:"+P+"|"+x+")",z="[^"+W+"]",X="(?:\\ud83c[\\udde6-\\uddff]){2}",_="[\\ud800-\\udbff][\\udc00-\\udfff]",ae="\\u200d",$e=M+"?",le="["+j+"]?",ie="(?:"+ae+"(?:"+[z,X,_].join("|")+")"+le+$e+")*",te=le+$e+ie,se="(?:"+[z+P+"?",P,X,_,R].join("|")+")",ne=RegExp(x+"(?="+x+")|"+se+te,"g");function Fe(Ne){for(var pe=ne.lastIndex=0;ne.test(Ne);)++pe;return pe}B.exports=Fe},94710:(B,W,n)=>{var t=n(95292),f=n(88532),h=Object.prototype,j=h.hasOwnProperty,R=f(function(P,x,M){j.call(P,M)?P[M].push(x):t(P,M,[x])});B.exports=R},22171:(B,W,n)=>{var t=n(41225),f=n(52689),h=n(54765),j=h&&h.isRegExp,R=j?f(j):t;B.exports=R},34827:(B,W,n)=>{var t=n(81204),f=n(82261),h=n(51646),j="[object String]";function R(P){return typeof P=="string"||!f(P)&&h(P)&&t(P)==j}B.exports=R},14311:(B,W,n)=>{var t=n(32628),f=n(50633),h=n(91522),j=n(34827),R=n(49605),P="[object Map]",x="[object Set]";function M(z){if(z==null)return 0;if(h(z))return j(z)?R(z):z.length;var X=f(z);return X==P||X==x?z.size:t(z).length}B.exports=M},45635:(B,W,n)=>{var t=n(87212),f=n(4191),h=n(39226),j=n(3956),R=h(function(P,x){if(P==null)return[];var M=x.length;return M>1&&j(P,x[0],x[1])?x=[]:M>2&&j(x[0],x[1],x[2])&&(x=[x[0]]),f(P,t(x,1),[])});B.exports=R},89102:(B,W,n)=>{var t=n(85306);function f(h){return t(h).toLowerCase()}B.exports=f},35336:(B,W,n)=>{var t=n(8928),f=n(88974),h=n(20598),j=n(57505),R=n(22171),P=n(49605),x=n(30660),M=n(88765),z=n(85306),X=30,_="...",ae=/\w*$/;function $e(le,ie){var te=X,se=_;if(j(ie)){var ne="separator"in ie?ie.separator:ne;te="length"in ie?M(ie.length):te,se="omission"in ie?t(ie.omission):se}le=z(le);var Fe=le.length;if(h(le)){var Ne=x(le);Fe=Ne.length}if(te>=Fe)return le;var pe=te-P(se);if(pe<1)return se;var xe=Ne?f(Ne,0,pe).join(""):le.slice(0,pe);if(ne===void 0)return xe+se;if(Ne&&(pe+=xe.length-pe),R(ne)){if(le.slice(pe).search(ne)){var at,ee=xe;for(ne.global||(ne=RegExp(ne.source,z(ae.exec(ne))+"g")),ne.lastIndex=0;at=ne.exec(ee);)var Xe=at.index;xe=xe.slice(0,Xe===void 0?pe:Xe)}}else if(le.indexOf(t(ne),pe)!=pe){var st=xe.lastIndexOf(ne);st>-1&&(xe=xe.slice(0,st))}return xe+se}B.exports=$e},71547:(B,W,n)=>{var t=n(19913);function f(h){return h&&h.length?t(h):[]}B.exports=f},76079:(B,W,n)=>{"use strict";n.d(W,{B:()=>j});var t=n(92132),f=n(63891),h=n(56654);const j=({options:P,...x})=>(0,t.jsx)(h.KF,{...x,children:P.map(M=>"children"in M?(0,t.jsx)(h.np,{label:M.label,values:M.children.map(z=>z.value.toString()),children:M.children.map(z=>(0,t.jsx)(R,{value:z.value,children:z.label},z.value))},M.label):(0,t.jsx)(h.fe,{value:M.value,children:M.label},M.value))}),R=(0,f.default)(h.fe)`
  padding-left: ${({theme:P})=>P.spaces[7]};
`},60600:(B,W,n)=>{"use strict";n.d(W,{A:()=>h});var t=n(92132);const f=j=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 34 25",...j,children:[(0,t.jsx)("rect",{width:33,height:23,x:.5,y:1,fill:"#EAF5FF",stroke:"#B8E1FF",rx:2.5}),(0,t.jsx)("path",{fill:"#0C75AF",d:"M18.901 9.828a1.043 1.043 0 1 0 0-2.086 1.043 1.043 0 0 0 0 2.086Z"}),(0,t.jsx)("path",{fill:"#0C75AF",d:"M19.703 8.785a.81.81 0 0 1-.512.748.814.814 0 0 1-.91-.239.804.804 0 0 1 .753-1.301.814.814 0 0 1 .669.792c.005.311.487.311.483 0a1.308 1.308 0 0 0-.867-1.215 1.288 1.288 0 0 0-1.4.39 1.296 1.296 0 0 0-.119 1.489c.283.468.83.697 1.364.596.597-.113 1.012-.664 1.021-1.258.005-.314-.477-.314-.482-.002ZM18.901 13.488a1.043 1.043 0 1 0 0-2.086 1.043 1.043 0 0 0 0 2.086Z"}),(0,t.jsx)("path",{fill:"#0C75AF",d:"M19.703 12.445a.81.81 0 0 1-.512.748.814.814 0 0 1-.91-.239.804.804 0 0 1 .753-1.301.812.812 0 0 1 .669.792c.005.311.487.311.483 0a1.307 1.307 0 0 0-.867-1.215 1.288 1.288 0 0 0-1.4.39 1.296 1.296 0 0 0-.119 1.489c.283.468.83.697 1.364.596.597-.113 1.012-.664 1.021-1.258.005-.314-.477-.314-.482-.002ZM18.901 17.247a1.043 1.043 0 1 0 0-2.086 1.043 1.043 0 0 0 0 2.086Z"}),(0,t.jsx)("path",{fill:"#0C75AF",d:"M19.703 16.204a.81.81 0 0 1-.512.748.814.814 0 0 1-.91-.239.804.804 0 0 1 .753-1.301.812.812 0 0 1 .669.792c.005.311.487.311.483 0a1.308 1.308 0 0 0-.867-1.215 1.288 1.288 0 0 0-1.4.39 1.296 1.296 0 0 0-.119 1.489c.283.468.83.698 1.364.596.597-.113 1.012-.664 1.021-1.258.005-.313-.477-.313-.482-.002ZM15.075 9.842a1.043 1.043 0 1 0 0-2.086 1.043 1.043 0 0 0 0 2.086Z"}),(0,t.jsx)("path",{fill:"#0C75AF",d:"M15.876 8.8a.81.81 0 0 1-.512.748.814.814 0 0 1-.91-.24.804.804 0 0 1 .753-1.301.81.81 0 0 1 .669.792c.005.312.488.312.483 0a1.308 1.308 0 0 0-.867-1.214 1.288 1.288 0 0 0-1.4.389 1.296 1.296 0 0 0-.119 1.49c.283.468.831.697 1.365.596.596-.114 1.011-.664 1.02-1.258.006-.314-.477-.314-.482-.003ZM15.075 13.503a1.043 1.043 0 1 0 0-2.086 1.043 1.043 0 0 0 0 2.086Z"}),(0,t.jsx)("path",{fill:"#0C75AF",d:"M15.876 12.46a.81.81 0 0 1-.512.748.814.814 0 0 1-.91-.24.804.804 0 0 1 .753-1.301.81.81 0 0 1 .669.792c.005.312.488.312.483 0a1.308 1.308 0 0 0-.867-1.214 1.288 1.288 0 0 0-1.4.389 1.296 1.296 0 0 0-.119 1.49c.283.468.831.697 1.365.596.596-.114 1.011-.664 1.02-1.258.006-.314-.477-.314-.482-.003ZM15.075 17.261a1.043 1.043 0 1 0 0-2.086 1.043 1.043 0 0 0 0 2.086Z"}),(0,t.jsx)("path",{fill:"#0C75AF",d:"M15.876 16.218a.81.81 0 0 1-.512.749.814.814 0 0 1-.91-.24.804.804 0 0 1 .753-1.301.808.808 0 0 1 .669.792c.005.312.488.312.483 0a1.308 1.308 0 0 0-.867-1.214 1.288 1.288 0 0 0-1.4.389 1.293 1.293 0 0 0-.119 1.487c.283.468.831.698 1.365.596.596-.113 1.011-.664 1.02-1.258.006-.311-.477-.311-.482 0Z"})]}),h=f},93870:(B,W,n)=>{"use strict";n.d(W,{A:()=>h});var t=n(92132);const f=j=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 32 24",...j,children:[(0,t.jsx)("rect",{width:31,height:23,x:.5,y:.5,fill:"#4945FF",stroke:"#4945FF",rx:2.5}),(0,t.jsx)("path",{fill:"#fff",d:"M15.328 10.54h1.723c.012-.089.012-.165.012-.253 0-1.676-1.471-2.959-3.41-2.959-2.696 0-4.647 2.22-4.647 5.344 0 2.15 1.383 3.545 3.504 3.545 2.045 0 3.597-1.154 3.967-2.936h-1.752c-.276.826-1.102 1.371-2.063 1.371-1.137 0-1.846-.802-1.846-2.103 0-2.08 1.19-3.65 2.725-3.65 1.037 0 1.746.62 1.787 1.558v.082ZM21.053 16l1.488-6.943h2.531l.31-1.512H18.54l-.31 1.512h2.53L19.272 16h1.782Z"})]}),h=f},1409:(B,W,n)=>{"use strict";n.d(W,{A:()=>h});var t=n(92132);const f=j=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 32 24",...j,children:[(0,t.jsx)("path",{fill:"#FDF4DC",stroke:"#FAE7B9",d:"M.5 3A2.5 2.5 0 0 1 3 .5h26A2.5 2.5 0 0 1 31.5 3v18a2.5 2.5 0 0 1-2.5 2.5H3A2.5 2.5 0 0 1 .5 21V3Z"}),(0,t.jsx)("path",{fill:"#D9822F",d:"M20.158 11.995c0-.591-.463-1.073-1.045-1.11H13.53V9.245a2.05 2.05 0 0 1 2.046-2.049c1.13 0 2.048.784 2.049 1.913 0 .24.194.433.433.433h.33a.433.433 0 0 0 .433-.433C18.82 7.32 17.365 5.999 15.577 6a3.246 3.246 0 0 0-3.241 3.244v1.642h-.223c-.615 0-1.113.499-1.113 1.114v4.887c.001.615.5 1.113 1.115 1.113l6.93-.003c.616 0 1.114-.5 1.114-1.115l-.001-4.887Z"})]}),h=f},76613:(B,W,n)=>{"use strict";n.d(W,{A:()=>h});var t=n(92132);const f=j=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 32 24",...j,children:[(0,t.jsx)("rect",{width:31,height:23,x:.5,y:.5,fill:"#EAF5FF",stroke:"#B8E1FF",rx:2.5}),(0,t.jsx)("path",{fill:"#0C75AF",fillRule:"evenodd",d:"M19.286 9.286v-.857a.397.397 0 0 0-.138-.302A.465.465 0 0 0 18.82 8h-8.357a.465.465 0 0 0-.326.127.397.397 0 0 0-.138.302v.857c0 .116.046.216.138.301.092.085.2.127.326.127h8.357a.465.465 0 0 0 .327-.127.397.397 0 0 0 .138-.301Zm2.785 2.713v.857a.397.397 0 0 1-.137.301.465.465 0 0 1-.327.128H10.464a.465.465 0 0 1-.326-.128.397.397 0 0 1-.138-.301v-.857c0-.116.046-.217.138-.302a.465.465 0 0 1 .326-.127h11.143c.126 0 .235.043.327.127a.397.397 0 0 1 .137.302Zm-1.857 3.574v.857a.397.397 0 0 1-.137.302.465.465 0 0 1-.327.127h-9.286a.465.465 0 0 1-.326-.127.397.397 0 0 1-.138-.302v-.857c0-.116.046-.216.138-.301a.465.465 0 0 1 .326-.127h9.286c.126 0 .235.042.326.127a.397.397 0 0 1 .138.301Z",clipRule:"evenodd"})]}),h=f},56246:(B,W,n)=>{"use strict";n.d(W,{A:()=>h});var t=n(92132);const f=j=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 32 24",...j,children:[(0,t.jsx)("rect",{width:31,height:23,x:.5,y:.5,fill:"#0C75AF",stroke:"#0C75AF",rx:2.5}),(0,t.jsx)("path",{fill:"#fff",d:"M8.523 13.586c.106 1.64 1.418 2.63 3.34 2.63 2.098 0 3.516-1.113 3.516-2.788 0-1.143-.65-1.846-2.086-2.297l-.867-.27c-.797-.252-1.137-.597-1.137-1.066 0-.598.633-1.031 1.459-1.031.873 0 1.512.474 1.617 1.183h1.67c-.053-1.54-1.36-2.619-3.217-2.619-1.91 0-3.328 1.131-3.328 2.678 0 1.09.715 1.922 1.963 2.309l.879.275c.914.287 1.266.592 1.266 1.084 0 .662-.657 1.107-1.606 1.107-.914 0-1.635-.469-1.758-1.195h-1.71ZM20.107 16l1.489-6.943h2.531l.31-1.512h-6.843l-.31 1.512h2.53L18.326 16h1.781Z"})]}),h=f},81245:(B,W,n)=>{"use strict";n.d(W,{A:()=>h});var t=n(92132);const f=j=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...j,children:[(0,t.jsx)("path",{fill:"#181826",d:"m10.614 17.796.878-2.01a7.742 7.742 0 0 1 3.94-3.992l2.416-1.072c.768-.341.768-1.458 0-1.8l-2.34-1.038a7.747 7.747 0 0 1-3.997-4.125l-.89-2.142a.946.946 0 0 0-1.758 0l-.889 2.142a7.747 7.747 0 0 1-3.997 4.125l-2.34 1.039c-.768.34-.768 1.458 0 1.799l2.415 1.072a7.742 7.742 0 0 1 3.94 3.991l.878 2.01a.946.946 0 0 0 1.744 0Zm8.787 4.894.247-.566a4.365 4.365 0 0 1 2.221-2.25l.76-.339a.53.53 0 0 0 0-.963l-.717-.319a4.368 4.368 0 0 1-2.253-2.326l-.254-.611a.507.507 0 0 0-.942 0l-.254.61a4.368 4.368 0 0 1-2.253 2.327l-.718.32a.53.53 0 0 0 0 .962l.76.338a4.365 4.365 0 0 1 2.222 2.251l.247.566c.18.414.754.414.934 0Z"}),(0,t.jsx)("path",{fill:"#181826",d:"m10.614 17.796.878-2.01a7.742 7.742 0 0 1 3.94-3.992l2.416-1.072c.768-.341.768-1.458 0-1.8l-2.34-1.038a7.747 7.747 0 0 1-3.997-4.125l-.89-2.142a.946.946 0 0 0-1.758 0l-.889 2.142a7.747 7.747 0 0 1-3.997 4.125l-2.34 1.039c-.768.34-.768 1.458 0 1.799l2.415 1.072a7.742 7.742 0 0 1 3.94 3.991l.878 2.01a.946.946 0 0 0 1.744 0Zm8.787 4.894.247-.566a4.365 4.365 0 0 1 2.221-2.25l.76-.339a.53.53 0 0 0 0-.963l-.717-.319a4.368 4.368 0 0 1-2.253-2.326l-.254-.611a.507.507 0 0 0-.942 0l-.254.61a4.368 4.368 0 0 1-2.253 2.327l-.718.32a.53.53 0 0 0 0 .962l.76.338a4.365 4.365 0 0 1 2.222 2.251l.247.566c.18.414.754.414.934 0Z"})]}),h=f},27663:(B,W,n)=>{"use strict";n.r(W),n.d(W,{A:()=>qe,C:()=>ht,a:()=>Ge,g:()=>d,i:()=>nr,u:()=>Re});var t=n(92132),f=n(21272),h=n(94061),j=n(18629),R=n(58805),P=n(76079),x=n(83997),M=n(30893),z=n(94293),X=n(90151),_=n(68074),ae=n(25815),$e=n(6239),le=n(12081),ie=n(12408),te=n(48653),se=n(24093),ne=n(43739),Fe=n(95336),Ne=n(78732),pe=n(4181),xe=n(7537),at=n(73989),ee=n(85963),Xe=n(99248),st=n(7153),Rn=n(8361),Pn=n(98765),Bn=n(74447),kn=n(7297),Dt=n(88353),Un=n(79739),Wn=n(76517),zn=n(80782),Zn=n(5287),Vn=n(61485),Yn=n(67030),Gn=n(42455),N=n(21247),Hn=n(14718),w=n(54894),Rt=n(71389),Te=n(17703),wn=n(41156),Kn=n(32091),Qn=n(29404),Xn=n(87419),Jn=n(9005),Me=n(63891),qn=n(84175);const _n=(0,Me.default)(h.a)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
    }
  }
`,ea=Me.default.button`
  border: none;
  padding: 0;
  background: transparent;
  display: flex;
  align-items: center;
`,ta=Me.default.div`
  display: flex;
  align-items: center;
  width: ${12/16}rem;
  transform: rotateX(${({rotated:e})=>e?"0deg":"180deg"});
`,na=({label:e,children:a,id:s})=>{const[i,o]=(0,f.useState)(!0),l=(0,qn.B)(s),r=()=>{o(c=>!c)};return(0,t.jsxs)(h.a,{children:[(0,t.jsx)(_n,{paddingLeft:7,paddingTop:2,paddingBottom:2,paddingRight:4,children:(0,t.jsx)(x.s,{justifyContent:"space-between",children:(0,t.jsxs)(ea,{onClick:r,"aria-expanded":i,"aria-controls":l,children:[(0,t.jsx)(ta,{rotated:i,children:(0,t.jsx)(Jn.A,{"aria-hidden":!0})}),(0,t.jsx)(h.a,{paddingLeft:2,children:(0,t.jsx)(M.o,{as:"span",fontWeight:"semiBold",textColor:"neutral800",children:e})})]})})}),i&&(0,t.jsx)("ul",{id:l,children:f.Children.map(a,(c,u)=>(0,t.jsx)("li",{children:c},u))})]})};var Pt=n(63996),Bt=n(21610),aa=n(37679),sa=n(60043),ot=n(44876),oa=n(58215),ia=n(66322),ra=n(9032),la=n(51505),kt=n(46270),da=n(72417),ca=n(42798),ua=n(22405),ma=n(26865),pa=n(74091),ga=n(54429),fa=n(69542),ha=n(12602),ya=n(60426),va=n(96584),xa=n(34280),ba=n(63679),Ca=n(38864),Aa=n(12430),Ta=n(10908),Ma=n(54514),ja=n(14448),Sa=n(64169),Fa=n(54245),Na=n(20415),La=n(60623),Ia=n(26665),Ea=n(89315),Oa=n(18536),$a=n(81355),Da=n(27421),Ra=n(69646),Pa=n(31084),Ba=n(99334),ka=n(37901),Ua=n(69512),Wa=n(19443),za=n(59598),Za=n(27249),Va=n(23646),Ya=n(34313),Ga=n(28442),Ha=n(86986),wa=n(83925),Ka=n(64199),Qa=n(4992),Xa=n(85914),Ja=n(25614),qa=n(28604),_a=n(17470),es=n(83060),ts=n(32816),ns=n(49389),as=n(60362),ss=n(82151),os=n(51346),is=n(87868),rs=n(38934),ls=n(39238),ds=n(52512),cs=n(87578),us=n(2919),ms=n(64213),ps=n(77701),gs=n(43896),fs=n(93659),hs=n(28826),ys=n(41231),vs=n(3851),Ut=n(57549),Wt=n(47684),zt=n(39783),xs=n(1423),bs=n(39527),Cs=n(82813),As=n(71656),Ts=n(65841),Ms=n(23483),Zt=n(78580),Vt=n(82431),Yt=n(30899),js=n(47926),Ss=n(54678),Fs=n(64486),Ns=n(41909),Ls=n(77902),Is=n(95628),Es=n(20055),Os=n(4487),$s=n(89292),Ds=n(98052),ke=n(5194),Rs=n(13955),Ps=n(38910),Bs=n(57574),ks=n(97358),Us=n(84447),Ws=n(84823),zs=n(25490),Zs=n(19143),Vs=n(63931),Gt=n(60678),Ys=n(46469),Gs=n(15363),Hs=n(61377),ws=n(90682),Ks=n(21396),Qs=n(44862),Xs=n(84114),Js=n(42386),qs=n(50929),_s=n(58971),eo=n(24408),to=n(18762),no=n(25262),ao=n(53485),so=n(87348),oo=n(5503),io=n(22353),ro=n(20126),lo=n(11171),co=n(6499),uo=n(94959),mo=n(76721),po=n(80906),go=n(29047),Je=n(57009),fo=n(60600),ho=n(71982),Ht=n(93870),yo=n(21639),it=n(52078),vo=n(98659),xo=n(19170),wt=n(49167),ut=n(5046),Kt=n(52076),bo=n(1409),Co=n(91086),Ao=n(76613),To=n(56246),Qt=n(45559),Mo=n(75652),jo=n(81245),So=n(36481),Fo=n(50612),De=n(39404),b=n(93201),mt=n(56336),D=n(2600),No=n(94710),Xt=n(48940),Lo=n(14311),Ye=n(82437),Io=n(412),Jt=n(89102),Eo=n(5409),rt=n(21835),qt=n(35336),Oo=n(71547),A=n(12083),$o=n(17024),G=n(58692),pt=n(71210),_t=n(70653),Do=n(5790),en=n(35223),Ro=n(45635);const d=e=>`${b.p}.${e}`,tn=(0,f.createContext)(),Re=()=>(0,f.useContext)(tn),nn=f.createContext(),Ge=()=>(0,f.useContext)(nn),Po=()=>{const{components:e,componentsGroupedByCategory:a,contentTypes:s,isInDevelopmentMode:i,sortedContentTypesList:o,modifiedData:l,initialData:r}=Re(),c=(0,N.hN)(),{trackUsage:u}=(0,N.z1)(),[p,g]=(0,f.useState)(""),{onOpenModalCreateSchema:m,onOpenModalEditCategory:$}=Ge(),{locale:F}=(0,w.A)(),{startsWith:C}=(0,N.U2)(F,{sensitivity:"base"}),S=(0,N.QM)(F,{sensitivity:"base"}),Z=!Object.keys(s).some(V=>s[V].isTemporary===!0)&&!Object.keys(e).some(V=>e[V].isTemporary===!0)&&mt(l,r),T=()=>{Z?(u("willCreateContentType"),m({modalType:"contentType",kind:"collectionType",actionType:"create",forTarget:"contentType"})):U()},E=()=>{Z?(u("willCreateSingleType"),m({modalType:"contentType",kind:"singleType",actionType:"create",forTarget:"contentType"})):U()},k=()=>{Z?(u("willCreateComponent"),m({modalType:"component",kind:null,actionType:"create",forTarget:"component"})):U()},U=()=>{c({type:"info",message:{id:d("notification.info.creating.notSaved"),defaultMessage:"Please save your work before creating a new collection type or component"}})},J=Object.entries(a).map(([V,ve])=>({name:V,title:V,isEditable:i,onClickEdit(q,Ce){q.stopPropagation(),Z?$(Ce.name):U()},links:ve.map(q=>({name:q.uid,to:`/plugins/${b.p}/component-categories/${V}/${q.uid}`,title:q.schema.displayName})).sort((q,Ce)=>S.compare(q.title,Ce.title))})).sort((V,ve)=>S.compare(V.title,ve.title)),ue=o.filter(V=>V.visible);return{menu:[{name:"models",title:{id:`${d("menu.section.models.name")}`,defaultMessage:"Collection Types"},customLink:i&&{id:`${d("button.model.create")}`,defaultMessage:"Create new collection type",onClick:T},links:ue.filter(V=>V.kind==="collectionType")},{name:"singleTypes",title:{id:`${d("menu.section.single-types.name")}`,defaultMessage:"Single Types"},customLink:i&&{id:`${d("button.single-types.create")}`,defaultMessage:"Create new single type",onClick:E},links:ue.filter(V=>V.kind==="singleType")},{name:"components",title:{id:`${d("menu.section.components.name")}`,defaultMessage:"Components"},customLink:i&&{id:`${d("button.component.create")}`,defaultMessage:"Create a new component",onClick:k},links:J}].map(V=>V.links.some(q=>Array.isArray(q.links))?{...V,links:V.links.map(q=>{const Ce=q.links.filter(ge=>C(ge.title,p));return Ce.length===0?null:{...q,links:Ce.sort((ge,oe)=>S.compare(ge.title,oe.title))}}).filter(Boolean)}:{...V,links:V.links.filter(q=>C(q.title,p)).sort((q,Ce)=>S.compare(q.title,Ce.title))}),searchValue:p,onSearchChange:g}},Bo=()=>{const{menu:e,searchValue:a,onSearchChange:s}=Po(),{formatMessage:i}=(0,w.A)();return(0,t.jsxs)(wn.C,{ariaLabel:i({id:`${d("plugin.name")}`,defaultMessage:"Content-Types Builder"}),children:[(0,t.jsx)(Kn.X,{searchable:!0,value:a,onClear:()=>s(""),onChange:o=>s(o.target.value),label:i({id:`${d("plugin.name")}`,defaultMessage:"Content-Types Builder"}),searchLabel:i({id:"global.search",defaultMessage:"Search"})}),(0,t.jsx)(Qn.w,{children:e.map(o=>(0,t.jsxs)(f.Fragment,{children:[(0,t.jsx)(Xn.L,{label:i({id:o.title.id,defaultMessage:o.title.defaultMessage}),collapsable:!0,badgeLabel:o.links.length.toString(),children:o.links.map(l=>l.links?(0,t.jsx)(na,{label:De(l.title),children:l.links.map(r=>(0,t.jsx)(Pt.u,{as:Rt.k2,to:r.to,active:r.active,isSubSectionChild:!0,children:De(i({id:r.name,defaultMessage:r.title}))},r.name))},l.name):(0,t.jsx)(Pt.u,{as:Rt.k2,to:l.to,active:l.active,children:De(i({id:l.name,defaultMessage:l.title}))},l.name))}),o.customLink&&(0,t.jsx)(h.a,{paddingLeft:7,children:(0,t.jsx)(j.Q,{onClick:o.customLink.onClick,startIcon:(0,t.jsx)(R.I,{as:ke.A,width:(0,N.a8)(8),height:(0,N.a8)(8)}),marginTop:2,children:i({id:o.customLink.id,defaultMessage:o.customLink.defaultMessage})})})]},o.name))})]})},an=e=>e.kind==="collectionType"&&(e.restrictRelationsTo===null||Array.isArray(e.restrictRelationsTo)&&e.restrictRelationsTo.length>0),gt=(e,a)=>e.find(({name:s})=>s===a),ko=[{label:"All",children:[{label:"images (JPEG, PNG, GIF, SVG, TIFF, ICO, DVU)",value:"images"},{label:"videos (MPEG, MP4, Quicktime, WMV, AVI, FLV)",value:"videos"},{label:"audios (MP3, WAV, OGG)",value:"audios"},{label:"files (CSV, ZIP, PDF, Excel, JSON, ...)",value:"files"}]}],Uo=({intlLabel:e,name:a,onChange:s,value:i=null})=>{const{formatMessage:o}=(0,w.A)(),l=i===null||i?.length===0?o({id:"global.none",defaultMessage:"None"}):[...i].sort().map(c=>De(c)).join(", "),r=e.id?o({id:e.id,defaultMessage:e.defaultMessage}):a;return(0,t.jsx)(P.B,{id:"select1",label:r,customizeContent:()=>l,onChange:c=>{c.length>0?s({target:{name:a,value:c,type:"allowed-types-select"}}):s({target:{name:a,value:null,type:"allowed-types-select"}})},options:ko,value:i||[]})},sn={biginteger:Je.A,blocks:fo.A,boolean:ho.A,collectionType:Ht.A,component:yo.A,contentType:Ht.A,date:it.A,datetime:it.A,decimal:Je.A,dynamiczone:vo.A,email:xo.A,enum:wt.A,enumeration:wt.A,file:ut.A,files:ut.A,float:Je.A,integer:Je.A,json:Kt.A,JSON:Kt.A,media:ut.A,number:Je.A,password:bo.A,relation:Co.A,richtext:Ao.A,singleType:To.A,string:Qt.A,text:Qt.A,time:it.A,timestamp:it.A,uid:Mo.A},Wo=(0,Me.default)(h.a)`
  svg {
    height: 100%;
    width: 100%;
  }
`,qe=({type:e,customField:a=null,...s})=>{const i=(0,N.AC)();let o=sn[e];if(a){const r=i.get(a)?.icon;r&&(o=r)}return sn[e]?(0,t.jsx)(Wo,{height:(0,N.a8)(24),width:(0,N.a8)(32),shrink:0,...s,"aria-hidden":!0,children:(0,t.jsx)(h.a,{as:o})}):null},on=(0,Me.default)(h.a)`
  width: 100%;
  height: 100%;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  text-align: left;
  &:hover {
    background: ${({theme:e})=>e.colors.primary100};
    border: 1px solid ${({theme:e})=>e.colors.primary200};
  }
`,zo=[],Zo=()=>(0,t.jsx)(x.s,{grow:1,justifyContent:"flex-end",children:(0,t.jsxs)(x.s,{gap:1,hasRadius:!0,background:"alternative100",padding:`${2/16}rem ${4/16}rem`,children:[(0,t.jsx)(R.I,{width:`${10/16}rem`,height:`${10/16}rem`,as:jo.A,color:"alternative600"}),(0,t.jsx)(M.o,{textColor:"alternative600",variant:"sigma",children:"New"})]})}),Vo=({type:e="text"})=>{const{formatMessage:a}=(0,w.A)(),{onClickSelectField:s}=Ge(),i=()=>{s({attributeType:e,step:e==="component"?"1":null})};return(0,t.jsx)(on,{padding:4,as:"button",hasRadius:!0,type:"button",onClick:i,children:(0,t.jsxs)(x.s,{children:[(0,t.jsx)(qe,{type:e}),(0,t.jsxs)(h.a,{paddingLeft:4,width:"100%",children:[(0,t.jsxs)(x.s,{justifyContent:"space-between",children:[(0,t.jsx)(M.o,{fontWeight:"bold",children:a({id:d(`attribute.${e}`),defaultMessage:e})}),zo.includes(e)&&(0,t.jsx)(Zo,{})]}),(0,t.jsx)(x.s,{children:(0,t.jsx)(M.o,{variant:"pi",textColor:"neutral600",children:a({id:d(`attribute.${e}.description`),defaultMessage:"A type for modeling data"})})})]})]})})},Yo=({attributes:e})=>(0,t.jsx)(z.r,{tagName:"button",children:(0,t.jsx)(x.s,{direction:"column",alignItems:"stretch",gap:8,children:e.map((a,s)=>(0,t.jsx)(X.x,{gap:3,children:a.map(i=>(0,t.jsx)(_.E,{col:6,children:(0,t.jsx)(Vo,{type:i})},i))},s))})}),Go=({customFieldUid:e,customField:a})=>{const{type:s,intlLabel:i,intlDescription:o}=a,{formatMessage:l}=(0,w.A)(),{onClickSelectCustomField:r}=Ge(),c=()=>{r({attributeType:s,customFieldUid:e})};return(0,t.jsx)(on,{padding:4,as:"button",hasRadius:!0,type:"button",onClick:c,children:(0,t.jsxs)(x.s,{children:[(0,t.jsx)(qe,{type:s,customField:e}),(0,t.jsxs)(h.a,{paddingLeft:4,children:[(0,t.jsx)(x.s,{children:(0,t.jsx)(M.o,{fontWeight:"bold",children:l(i)})}),(0,t.jsx)(x.s,{children:(0,t.jsx)(M.o,{variant:"pi",textColor:"neutral600",children:l(o)})})]})]})})},Ho=(0,Me.default)(h.a)`
  background: ${({theme:e})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${e.colors.neutral150} 100%)`};
  opacity: 0.33;
`,wo=()=>(0,t.jsx)(x.s,{wrap:"wrap",gap:4,children:[...Array(4)].map((e,a)=>(0,t.jsx)(Ho,{height:"138px",width:"375px",hasRadius:!0},`empty-card-${a}`))}),Ko=()=>{const{formatMessage:e}=(0,w.A)();return(0,t.jsxs)(h.a,{position:"relative",children:[(0,t.jsx)(wo,{}),(0,t.jsx)(h.a,{position:"absolute",top:6,width:"100%",children:(0,t.jsxs)(x.s,{alignItems:"center",justifyContent:"center",direction:"column",children:[(0,t.jsx)(R.I,{as:So.A,color:"",width:"160px",height:"88px"}),(0,t.jsx)(h.a,{paddingTop:6,paddingBottom:4,children:(0,t.jsxs)(h.a,{textAlign:"center",children:[(0,t.jsx)(M.o,{variant:"delta",as:"p",textColor:"neutral600",children:e({id:d("modalForm.empty.heading"),defaultMessage:"Nothing in here yet."})}),(0,t.jsx)(h.a,{paddingTop:4,children:(0,t.jsx)(M.o,{variant:"delta",as:"p",textColor:"neutral600",children:e({id:d("modalForm.empty.sub-heading"),defaultMessage:"Find what you are looking for through a wide range of extensions."})})})]})}),(0,t.jsx)(ae.z,{to:`/marketplace?${Eo.stringify({categories:["Custom fields"]})}`,variant:"secondary",startIcon:(0,t.jsx)(ke.A,{}),children:e({id:d("modalForm.empty.button"),defaultMessage:"Add custom fields"})})]})})]})},Qo=()=>{const{formatMessage:e}=(0,w.A)(),a=(0,N.AC)(),s=Object.entries(a.getAll());if(!s.length)return(0,t.jsx)(Ko,{});const i=s.sort((o,l)=>o[1].name>l[1].name?1:-1);return(0,t.jsx)(z.r,{tagName:"button",children:(0,t.jsxs)(x.s,{direction:"column",alignItems:"stretch",gap:3,children:[(0,t.jsx)(X.x,{gap:3,children:i.map(([o,l])=>(0,t.jsx)(_.E,{col:6,children:(0,t.jsx)(Go,{customFieldUid:o,customField:l},o)},o))}),(0,t.jsx)(Bt.N,{href:"https://docs.strapi.io/developer-docs/latest/development/custom-fields.html",isExternal:!0,children:e({id:d("modalForm.tabs.custom.howToLink"),defaultMessage:"How to add custom fields"})})]})})},Xo=({attributes:e,forTarget:a,kind:s})=>{const{formatMessage:i}=(0,w.A)(),o=d("modalForm.tabs.default"),l=d("modalForm.tabs.custom"),r=a.includes("component")?"component":s,c=d(`modalForm.sub-header.chooseAttribute.${r}`);return(0,t.jsx)($e.c,{padding:7,children:(0,t.jsxs)(le.f,{label:i({id:d("modalForm.tabs.label"),defaultMessage:"Default and Custom types tabs"}),id:"attribute-type-tabs",variant:"simple",children:[(0,t.jsxs)(x.s,{justifyContent:"space-between",children:[(0,t.jsx)(M.o,{variant:"beta",as:"h2",children:i({id:c,defaultMessage:"Select a field"})}),(0,t.jsxs)(ie.t,{children:[(0,t.jsx)(ie.o,{children:i({id:o,defaultMessage:"Default"})}),(0,t.jsx)(ie.o,{children:i({id:l,defaultMessage:"Custom"})})]})]}),(0,t.jsx)(h.a,{paddingBottom:6,children:(0,t.jsx)(te.c,{})}),(0,t.jsxs)(se.T,{children:[(0,t.jsx)(se.K,{children:(0,t.jsx)(Yo,{attributes:e})}),(0,t.jsx)(se.K,{children:(0,t.jsx)(Qo,{})})]})]})})},Jo=({intlLabel:e,name:a,options:s,onChange:i,value:o=null})=>{const{formatMessage:l}=(0,w.A)(),r=e.id?l({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):a,c=u=>{let p="";u==="true"&&(p=!0),u==="false"&&(p=!1),i({target:{name:a,value:p,type:"select-default-boolean"}})};return(0,t.jsx)(ne.l,{label:r,id:a,name:a,onChange:c,value:(o===null?"":o).toString(),children:s.map(({metadatas:{intlLabel:u,disabled:p,hidden:g},key:m,value:$})=>(0,t.jsx)(Fe.c,{value:$,disabled:p,hidden:g,children:u.defaultMessage},m))})},qo=(0,Me.default)(x.s)`
  position: relative;
  align-items: stretch;

  label {
    border-radius: 4px;
    max-width: 50%;
    cursor: pointer;
    user-select: none;
    flex: 1;
    ${(0,Ne.id)()}
  }

  input {
    position: absolute;
    opacity: 0;
  }

  .option {
    height: 100%;
    border-radius: 4px;
    border: 1px solid ${({theme:e})=>e.colors.neutral200};
    will-change: transform, opacity;
    background: ${({theme:e})=>e.colors.neutral0};

    .checkmark {
      position: relative;
      display: block;
      will-change: transform;
      background: ${({theme:e})=>e.colors.neutral0};
      width: ${({theme:e})=>e.spaces[5]};
      height: ${({theme:e})=>e.spaces[5]};
      border: solid 1px ${({theme:e})=>e.colors.neutral300};
      border-radius: 50%;

      &:before,
      &:after {
        content: '';
        display: block;
        border-radius: 50%;
        width: ${({theme:e})=>e.spaces[3]};
        height: ${({theme:e})=>e.spaces[3]};
        position: absolute;
        top: 3px;
        left: 3px;
      }

      &:after {
        transform: scale(0);
        transition: inherit;
        will-change: transform;
      }
    }
  }

  .container input:checked ~ div {
    background: ${({theme:e})=>e.colors.primary100};
    ${M.o} {
      color: ${({theme:e})=>e.colors.primary600};
    }
    border: 1px solid ${({theme:e})=>e.colors.primary200};
    .checkmark {
      border: solid 1px ${({theme:e})=>e.colors.primary600};
      &::after {
        background: ${({theme:e})=>e.colors.primary600};
        transform: scale(1);
      }
    }
  }
`,ft=({intlLabel:e,name:a,onChange:s,radios:i=[],value:o})=>{const{formatMessage:l}=(0,w.A)();return(0,t.jsxs)(x.s,{direction:"column",alignItems:"stretch",gap:2,children:[(0,t.jsx)(M.o,{variant:"pi",fontWeight:"bold",textColor:"neutral800",htmlFor:a,as:"label",children:l(e)}),(0,t.jsx)(qo,{gap:4,alignItems:"stretch",children:i.map(r=>(0,t.jsxs)("label",{htmlFor:r.value.toString(),className:"container",children:[(0,t.jsx)("input",{id:r.value.toString(),name:a,className:"option-input",checked:r.value===o,value:r.value,onChange:s,type:"radio"},r.value),(0,t.jsx)(h.a,{className:"option",padding:4,children:(0,t.jsxs)(x.s,{children:[(0,t.jsx)(h.a,{paddingRight:4,children:(0,t.jsx)("span",{className:"checkmark"})}),(0,t.jsxs)(x.s,{direction:"column",alignItems:"stretch",gap:2,children:[(0,t.jsx)(M.o,{fontWeight:"bold",children:l(r.title)}),(0,t.jsx)(M.o,{variant:"pi",textColor:"neutral600",children:l(r.description)})]})]})})]},r.value))})]})},_o=({onChange:e,name:a,intlLabel:s,...i})=>{const o=l=>{const r=l.target.value!=="false";e({target:{name:a,value:r,type:"boolean-radio-group"}})};return(0,t.jsx)(ft,{...i,name:a,onChange:o,intlLabel:s})},ei=({error:e,intlLabel:a,modifiedData:s,name:i,onChange:o,value:l=null})=>{const{formatMessage:r}=(0,w.A)(),[c,u]=(0,f.useState)(!!l||l===0),p=a.id?r({id:a.id,defaultMessage:a.defaultMessage},{...a.values}):i,g=s.type==="biginteger"?"text":"number",m=!s.type,$=e?r({id:e,defaultMessage:e}):"";return(0,t.jsxs)(x.s,{direction:"column",alignItems:"stretch",gap:2,children:[(0,t.jsx)(pe.S,{id:i,name:i,onValueChange:F=>{o({target:{name:i,value:F?g==="text"?"0":0:null}}),u(Z=>!Z)},value:c,children:p}),c&&(0,t.jsx)(h.a,{paddingLeft:6,style:{maxWidth:"200px"},children:g==="text"?(0,t.jsx)(xe.k,{label:"","aria-label":p,disabled:m,error:$,id:i,name:i,onChange:o,value:l===null?"":l}):(0,t.jsx)(at.Q,{"aria-label":p,disabled:m,error:$,id:i,name:i,onValueChange:F=>{o({target:{name:i,value:F,type:g}})},value:l||0})})]})},ti=({onChange:e,...a})=>{const s=(0,N.hN)(),i=o=>{s({type:"info",message:{id:d("contentType.kind.change.warning"),defaultMessage:"You just changed the kind of a content type: API will be reset (routes, controllers, and services will be overwritten)."}}),e(o)};return(0,t.jsx)(ft,{...a,onChange:i})},ni=({description:e,disabled:a=!1,intlLabel:s,isCreating:i,name:o,onChange:l,value:r=!1})=>{const{formatMessage:c}=(0,w.A)(),[u,p]=(0,f.useState)(!1),g=s.id?c({id:s.id,defaultMessage:s.defaultMessage},{...s.values}):o,m=e?c({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",$=()=>p(S=>!S),F=()=>{l({target:{name:o,value:!1}}),$()},C=({target:{checked:S}})=>{if(!S&&!i){$();return}l({target:{name:o,value:S}})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(pe.S,{checked:r,disabled:a,hint:m,name:o,onChange:C,children:g}),(0,t.jsx)(N.TM,{isOpen:u,onToggleDialog:$,onConfirm:F,bodyText:{id:d("popUpWarning.draft-publish.message"),defaultMessage:"If you disable the draft & publish, your drafts will be deleted."},leftButtonText:{id:"components.popUpWarning.button.cancel",defaultMessage:"No, cancel"},rightButtonText:{id:d("popUpWarning.draft-publish.button.confirm"),defaultMessage:"Yes, disable"}})]})},ai=({categoryName:e,deleteCategory:a,deleteComponent:s,deleteContentType:i,isAttributeModal:o,isCustomFieldModal:l,isComponentAttribute:r,isComponentToDzModal:c,isContentTypeModal:u,isCreatingComponent:p,isCreatingComponentAttribute:g,isCreatingComponentInDz:m,isCreatingComponentWhileAddingAField:$,isCreatingContentType:F,isCreatingDz:C,isComponentModal:S,isDzAttribute:Z,isEditingAttribute:T,isEditingCategory:E,isInFirstComponentStep:k,onSubmitAddComponentAttribute:U,onSubmitAddComponentToDz:J,onSubmitCreateContentType:ue,onSubmitCreateComponent:be,onSubmitCreateDz:V,onSubmitEditAttribute:ve,onSubmitEditCategory:q,onSubmitEditComponent:Ce,onSubmitEditContentType:ge,onSubmitEditCustomFieldAttribute:oe,onSubmitEditDz:Pe,onClickFinish:me})=>{const{formatMessage:Q}=(0,w.A)();return c?m?(0,t.jsx)(ee.$,{variant:"secondary",type:"submit",onClick:L=>{L.preventDefault(),J(L,!0)},startIcon:(0,t.jsx)(ke.A,{}),children:Q({id:d("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"})}):(0,t.jsx)(ee.$,{variant:"default",type:"submit",onClick:L=>{L.preventDefault(),J(L,!1)},children:Q({id:"global.finish",defaultMessage:"Finish"})}):o&&Z&&!C?(0,t.jsx)(ee.$,{variant:"default",type:"submit",onClick:L=>{L.preventDefault(),me(),Pe(L,!1)},children:Q({id:"global.finish",defaultMessage:"Finish"})}):o&&Z&&C?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ee.$,{variant:"secondary",type:"submit",onClick:L=>{L.preventDefault(),V(L,!0)},startIcon:(0,t.jsx)(ke.A,{}),children:Q({id:d("form.button.add-components-to-dynamiczone"),defaultMessage:"Add components to the zone"})})}):o&&r?k?(0,t.jsx)(ee.$,{variant:"secondary",type:"submit",onClick:L=>{L.preventDefault(),U(L,!0)},children:Q(g?{id:d("form.button.configure-component"),defaultMessage:"Configure the component"}:{id:d("form.button.select-component"),defaultMessage:"Configure the component"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.$,{variant:"secondary",type:"submit",onClick:L=>{L.preventDefault(),U(L,!0)},startIcon:(0,t.jsx)(ke.A,{}),children:Q($?{id:d("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"}:{id:d("form.button.add-field"),defaultMessage:"Add another field"})}),(0,t.jsx)(ee.$,{variant:"default",type:"button",onClick:L=>{L.preventDefault(),me(),U(L,!1)},children:Q({id:"global.finish",defaultMessage:"Finish"})})]}):o&&!r&&!Z?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.$,{type:T?"button":"submit",variant:"secondary",onClick:L=>{L.preventDefault(),ve(L,!0)},startIcon:(0,t.jsx)(ke.A,{}),children:Q({id:d("form.button.add-field"),defaultMessage:"Add another field"})}),(0,t.jsx)(ee.$,{type:T?"submit":"button",variant:"default",onClick:L=>{L.preventDefault(),me(),ve(L,!1)},children:Q({id:"global.finish",defaultMessage:"Finish"})})]}):u?(0,t.jsxs)(t.Fragment,{children:[!F&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.$,{type:"button",variant:"danger",onClick:L=>{L.preventDefault(),i()},children:Q({id:"global.delete",defaultMessage:"Delete"})}),(0,t.jsx)(ee.$,{type:"submit",variant:"default",onClick:L=>{L.preventDefault(),ge(L,!1)},children:Q({id:"global.finish",defaultMessage:"Finish"})})]}),F&&(0,t.jsx)(ee.$,{type:"submit",variant:"secondary",onClick:L=>{L.preventDefault(),ue(L,!0)},children:Q({id:"global.continue",defaultMessage:"Continue"})})]}):S?(0,t.jsxs)(t.Fragment,{children:[!p&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.$,{type:"button",variant:"danger",onClick:L=>{L.preventDefault(),s()},children:Q({id:"global.delete",defaultMessage:"Delete"})}),(0,t.jsx)(ee.$,{type:"submit",variant:"default",onClick:L=>{L.preventDefault(),Ce(L,!1)},children:Q({id:"global.finish",defaultMessage:"Finish"})})]}),p&&(0,t.jsx)(ee.$,{type:"submit",variant:"secondary",onClick:L=>{L.preventDefault(),be(L,!0)},children:Q({id:"global.continue",defaultMessage:"Continue"})})]}):E?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.$,{type:"button",variant:"danger",onClick:L=>{L.preventDefault(),e&&a(e)},children:Q({id:"global.delete",defaultMessage:"Delete"})}),(0,t.jsx)(ee.$,{type:"submit",variant:"default",onClick:L=>{L.preventDefault(),q(L)},children:Q({id:"global.finish",defaultMessage:"finish"})})]}):l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.$,{type:T?"button":"submit",variant:"secondary",onClick:L=>{L.preventDefault(),oe(L,!0)},startIcon:(0,t.jsx)(ke.A,{}),children:Q({id:d("form.button.add-field"),defaultMessage:"Add another field"})}),(0,t.jsx)(ee.$,{type:T?"submit":"button",variant:"default",onClick:L=>{L.preventDefault(),me(),oe(L,!1)},children:Q({id:"global.finish",defaultMessage:"Finish"})})]}):null},si=({actionType:e=null,attributeName:a,attributeType:s,categoryName:i,contentTypeKind:o,dynamicZoneTarget:l,forTarget:r,modalType:c=null,targetUid:u,customFieldUid:p=null,showBackLink:g=!1})=>{const{formatMessage:m}=(0,w.A)(),{modifiedData:$}=Re(),{onOpenModalAddField:F}=Ge();let C="component",S=[];const Z=$?.[r]?.[u]||$?.[r]||null,T=Z?.schema.displayName;if(c==="contentType"&&(C=o),["component","editCategory"].includes(c||"")&&(C="component"),["component","contentType"].includes(c||"")){let k=d(`modalForm.component.header-${e}`);return c==="contentType"&&(k=d(`modalForm.${o}.header-create`)),e==="edit"&&(k=d("modalForm.header-edit")),(0,t.jsx)(Xe.r,{children:(0,t.jsxs)(x.s,{children:[(0,t.jsx)(h.a,{children:(0,t.jsx)(qe,{type:C})}),(0,t.jsx)(h.a,{paddingLeft:3,children:(0,t.jsx)(M.o,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title",children:m({id:k},{name:T})})})]})})}return S=[{label:T,info:{category:Z?.category||null,name:Z?.schema.displayName}}],c==="chooseAttribute"&&(C=["component","components"].includes(r)?"component":Z.schema.kind),c==="addComponentToDynamicZone"&&(C="dynamiczone",S.push({label:l})),(c==="attribute"||c==="customField")&&(C=s,S.push({label:a})),c==="editCategory"&&(S=[{label:m({id:d("modalForm.header.categories"),defaultMessage:"Categories"})},{label:i}]),(0,t.jsx)(Xe.r,{children:(0,t.jsxs)(x.s,{gap:3,children:[g&&(0,t.jsx)(Bt.N,{"aria-label":m({id:d("modalForm.header.back"),defaultMessage:"Back"}),startIcon:(0,t.jsx)(kt.A,{}),onClick:()=>F({forTarget:r,targetUid:u}),href:"#back",isExternal:!1}),(0,t.jsx)(qe,{type:C,customField:p}),(0,t.jsx)(aa.B,{label:S.map(({label:k})=>k).join(","),children:S.map(({label:k,info:U},J,ue)=>{if(k=De(k),!k)return null;const be=`${k}.${J}`;return U?.category&&(k=`${k} (${De(U.category)} - ${De(U.name)})`),(0,t.jsx)(sa.m,{isCurrent:J===ue.length-1,children:k},be)})})]})})},oi=({modalType:e,forTarget:a,kind:s,actionType:i,step:o})=>{switch(e){case"chooseAttribute":return d(`modalForm.sub-header.chooseAttribute.${a?.includes("component")?"component":s||"collectionType"}`);case"attribute":return d(`modalForm.sub-header.attribute.${i}${o!=="null"&&o!==null&&i!=="edit"?".step":""}`);case"customField":return d(`modalForm.sub-header.attribute.${i}`);case"addComponentToDynamicZone":return d("modalForm.sub-header.addComponentToDynamicZone");default:return d("configurations")}},ii=({actionType:e,modalType:a,forTarget:s,kind:i,step:o,attributeType:l,attributeName:r,customField:c})=>{const{formatMessage:u}=(0,w.A)(),p=a==="customField"?c?.intlLabel:{id:d(`attribute.${l}`)};return(0,t.jsxs)(x.s,{direction:"column",alignItems:"flex-start",paddingBottom:2,gap:1,children:[(0,t.jsx)(M.o,{as:"h2",variant:"beta",children:u({id:oi({actionType:e,forTarget:s,kind:i,step:o,modalType:a}),defaultMessage:"Add new field"},{type:p?De(u(p)):"",name:De(r),step:o})}),(0,t.jsx)(M.o,{variant:"pi",textColor:"neutral600",children:u({id:d(`attribute.${l}.description`),defaultMessage:"A type for modeling data"})})]})},ht={alien:oa.A,apps:ia.A,archive:ra.A,arrowDown:la.A,arrowLeft:kt.A,arrowRight:da.A,arrowUp:ca.A,attachment:ua.A,bell:ma.A,bold:pa.A,book:ga.A,briefcase:fa.A,brush:ha.A,bulletList:ya.A,calendar:va.A,car:xa.A,cast:ba.A,chartBubble:Ca.A,chartCircle:Aa.A,chartPie:Ta.A,check:Ma.A,clock:ja.A,cloud:Sa.A,code:Fa.A,cog:Na.A,collapse:La.A,command:Ia.A,connector:Ea.A,crop:Oa.A,crown:$a.A,cube:Da.A,cup:Ra.A,cursor:Pa.A,dashboard:Ba.A,database:ka.A,discuss:Ua.A,doctor:Wa.A,earth:za.A,emotionHappy:Za.A,emotionUnhappy:Va.A,envelop:Ya.A,exit:Ga.A,expand:Ha.A,eye:wa.A,feather:Ka.A,file:Qa.A,fileError:Xa.A,filePdf:Ja.A,filter:qa.A,folder:_a.A,gate:es.A,gift:ts.A,globe:ns.A,grid:as.A,handHeart:ss.A,hashtag:os.A,headphone:is.A,heart:rs.A,house:ls.A,information:ds.A,italic:cs.A,key:us.A,landscape:ms.A,layer:ps.A,layout:gs.A,lightbulb:fs.A,link:hs.A,lock:ys.A,magic:vs.A,manyToMany:Ut.A,manyToOne:Wt.A,manyWays:zt.A,medium:xs.A,message:bs.A,microphone:Cs.A,monitor:As.A,moon:Ts.A,music:Ms.A,oneToMany:Zt.A,oneToOne:Vt.A,oneWay:Yt.A,paint:js.A,paintBrush:Ss.A,paperPlane:Fs.A,pencil:Ns.A,phone:Ls.A,picture:Is.A,pin:Es.A,pinMap:Os.A,plane:$s.A,play:Ds.A,plus:ke.A,priceTag:Rs.A,puzzle:Ps.A,question:Bs.A,quote:ks.A,repeat:Us.A,restaurant:Ws.A,rocket:zs.A,rotate:Zs.A,scissors:Vs.A,search:Gt.A,seed:Ys.A,server:Gs.A,shield:Hs.A,shirt:ws.A,shoppingCart:Ks.A,slideshow:Qs.A,stack:Xs.A,star:Js.A,store:qs.A,strikeThrough:_s.A,sun:eo.A,television:to.A,thumbDown:no.A,thumbUp:ao.A,train:so.A,twitter:oo.A,typhoon:io.A,underline:ro.A,user:lo.A,volumeMute:co.A,volumeUp:uo.A,walk:mo.A,wheelchair:po.A,write:go.A},ri=(0,Me.default)(x.s)`
  label {
    ${(0,Ne.id)()}
    border-radius: ${({theme:e})=>e.borderRadius};
    border: 1px solid ${({theme:e})=>e.colors.neutral100};
  }
`,li=({iconKey:e,name:a,onChange:s,isSelected:i,ariaLabel:o})=>(0,t.jsx)(st.D,{name:a,required:!1,children:(0,t.jsxs)(Rn.d,{htmlFor:e,id:`${e}-label`,children:[(0,t.jsxs)(Pn.s,{children:[(0,t.jsx)(Bn.T,{type:"radio",id:e,name:a,checked:i,onChange:s,value:e,"aria-checked":i,"aria-labelledby":`${e}-label`}),o]}),(0,t.jsx)(x.s,{padding:2,cursor:"pointer",hasRadius:!0,background:i?"primary200":void 0,children:(0,t.jsx)(R.I,{as:ht[e],color:i?"primary600":"neutral300"})})]})}),di=({intlLabel:e,name:a,onChange:s,value:i=""})=>{const{formatMessage:o}=(0,w.A)(),[l,r]=(0,f.useState)(!1),[c,u]=(0,f.useState)(""),p=Object.keys(ht),[g,m]=(0,f.useState)(p),$=(0,f.useRef)(null),F=(0,f.useRef)(null),C=()=>{r(!l)},S=({target:{value:E}})=>{u(E),m(()=>p.filter(k=>k.toLowerCase().includes(E.toLowerCase())))},Z=()=>{C(),u(""),m(p)},T=()=>{s({target:{name:a,value:""}})};return(0,f.useEffect)(()=>{l&&F.current?.focus()},[l]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x.s,{justifyContent:"space-between",paddingBottom:2,children:[(0,t.jsx)(M.o,{variant:"pi",fontWeight:"bold",textColor:"neutral800",as:"label",children:o(e)}),(0,t.jsxs)(x.s,{gap:1,children:[l?(0,t.jsx)(kn.S,{ref:F,name:"searchbar",size:"S",placeholder:o({id:d("ComponentIconPicker.search.placeholder"),defaultMessage:"Search for an icon"}),onBlur:()=>{c||C()},onChange:S,value:c,onClear:Z,clearLabel:o({id:d("IconPicker.search.clear.label"),defaultMessage:"Clear the icon search"}),children:o({id:d("IconPicker.search.placeholder.label"),defaultMessage:"Search for an icon"})}):(0,t.jsx)(Dt.K,{ref:$,onClick:C,"aria-label":o({id:d("IconPicker.search.button.label"),defaultMessage:"Search icon button"}),icon:(0,t.jsx)(Gt.A,{}),noBorder:!0}),i&&(0,t.jsx)(Un.m,{description:o({id:d("IconPicker.remove.tooltip"),defaultMessage:"Remove the selected icon"}),children:(0,t.jsx)(Dt.K,{onClick:T,"aria-label":o({id:d("IconPicker.remove.button"),defaultMessage:"Remove the selected icon button"}),icon:(0,t.jsx)(Fo.A,{}),noBorder:!0})})]})]}),(0,t.jsx)(ri,{position:"relative",padding:1,background:"neutral100",hasRadius:!0,wrap:"wrap",gap:2,maxHeight:"126px",overflow:"auto",textAlign:"center",children:g.length>0?g.map(E=>(0,t.jsx)(li,{iconKey:E,name:a,onChange:s,isSelected:E===i,ariaLabel:o({id:d("IconPicker.icon.label"),defaultMessage:"Select {icon} icon"},{icon:E})},E)):(0,t.jsx)(h.a,{padding:4,grow:2,children:(0,t.jsx)(M.o,{variant:"delta",textColor:"neutral600",textAlign:"center",children:o({id:d("IconPicker.emptyState.label"),defaultMessage:"No icon found"})})})})]})},ci=({description:e,error:a,intlLabel:s,modifiedData:i,name:o,onChange:l,value:r})=>{const{formatMessage:c}=(0,w.A)(),u=(0,f.useRef)(l),p=i?.displayName||"";(0,f.useEffect)(()=>{if(p){const F=(0,b.n)(p);try{const C=rt(F,2);u.current({target:{name:o,value:C}})}catch{u.current({target:{name:o,value:F}})}}else u.current({target:{name:o,value:""}})},[p,o]);const g=a?c({id:a,defaultMessage:a}):"",m=e?c({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",$=c(s);return(0,t.jsx)(xe.k,{error:g,label:$,id:o,hint:m,name:o,onChange:l,value:r||""})},ui=({oneThatIsCreatingARelationWithAnother:e,target:a})=>{const{contentTypes:s,sortedContentTypesList:i}=Re(),o=(0,Ye.wA)(),l=i.filter(an),{plugin:r=null,schema:{displayName:c}={displayName:"error"}}=s?.[a]??{},u=({uid:p,plugin:g,title:m,restrictRelationsTo:$})=>()=>{const F=g?`${g}_${m}`:m;o({type:b.O,target:{value:p,oneThatIsCreatingARelationWithAnother:e,selectedContentTypeFriendlyName:F,targetContentTypeAllowedRelations:$}})};return(0,t.jsxs)(ot.bL,{children:[(0,t.jsx)(mi,{children:`${c} ${r?`(from: ${r})`:""}`}),(0,t.jsx)(ot.UC,{zIndex:5,children:l.map(({uid:p,title:g,restrictRelationsTo:m,plugin:$})=>(0,t.jsxs)(ot.q7,{onSelect:u({uid:p,plugin:$,title:g,restrictRelationsTo:m}),children:[g,"\xA0",$&&(0,t.jsxs)(t.Fragment,{children:["(from: ",$,")"]})]},p))})]})},mi=(0,Me.default)(ot.l9)`
  svg {
    width: ${6/16}rem;
    height: ${4/16}rem;
  }
`,rn=({disabled:e=!1,error:a,header:s,isMain:i=!1,name:o,onChange:l,oneThatIsCreatingARelationWithAnother:r="",target:c="",value:u=""})=>(0,t.jsxs)(h.a,{background:"neutral100",hasRadius:!0,borderColor:"neutral200",children:[(0,t.jsx)(x.s,{paddingTop:i?4:1,paddingBottom:i?3:1,justifyContent:"center",children:i?(0,t.jsx)(M.o,{variant:"pi",fontWeight:"bold",textColor:"neutral800",children:s}):(0,t.jsx)(ui,{target:c,oneThatIsCreatingARelationWithAnother:r})}),(0,t.jsx)(te.c,{background:"neutral200"}),(0,t.jsx)(h.a,{padding:4,children:(0,t.jsx)(N.ah,{disabled:e,error:a?.id||null,intlLabel:{id:d("form.attribute.item.defineRelation.fieldName"),defaultMessage:"Field name"},name:o,onChange:l,type:"text",value:u})})]}),pi=(0,Me.default)(h.a)`
  position: relative;
  width: 100%;
  &::before {
    content: '';
    position: absolute;
    top: calc(50% - 0px);
    height: 2px;
    width: 100%;
    background-color: ${({theme:e})=>e.colors.primary600};
    z-index: 0;
  }
`,gi=(0,Me.default)(h.a)`
  background: ${({theme:e,isSelected:a})=>e.colors[a?"primary100":"neutral0"]};
  border: 1px solid
    ${({theme:e,isSelected:a})=>e.colors[a?"primary700":"neutral200"]};
  border-radius: ${({theme:e})=>e.borderRadius};
  z-index: 1;
  svg {
    width: 1.5rem;
    height: 100%;
    path {
      fill: ${({theme:e,isSelected:a})=>e.colors[a?"primary700":"neutral500"]};
    }
  }
  &:disabled {
    cursor: not-allowed;
  }
`,fi=(0,Me.default)(x.s)`
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
`,hi={oneWay:Yt.A,oneToOne:Vt.A,oneToMany:Zt.A,manyToOne:Wt.A,manyToMany:Ut.A,manyWay:zt.A},yi=({naturePickerType:e,oneThatIsCreatingARelationWithAnother:a,relationType:s,target:i})=>{const o=(0,Ye.wA)(),{formatMessage:l}=(0,w.A)(),{contentTypes:r,modifiedData:c}=Re(),u=["oneWay","oneToOne","oneToMany","manyToOne","manyToMany","manyWay"],p=["oneWay","manyWay"],m=(e==="contentType"?D(c,[e,"schema","kind"],""):e)==="collectionType"?u:p,$=s==="manyToOne",F=D(r,[i,"schema","displayName"],"unknown"),C=$?F:a,S=$?a:F,Z=rt(C,s==="manyToMany"?2:1),T=D(r,[i,"schema","restrictRelationsTo"],null),E=rt(S,["manyToMany","oneToMany","manyToOne","manyWay"].includes(s)?2:1);return s?(0,t.jsxs)(x.s,{style:{flex:1},children:[(0,t.jsx)(pi,{children:(0,t.jsx)(x.s,{paddingLeft:9,paddingRight:9,paddingTop:1,justifyContent:"center",children:(0,t.jsx)(z.r,{tagName:"button",children:(0,t.jsx)(x.s,{gap:3,children:m.map(k=>{const U=hi[k],J=T===null||T.includes(k);return(0,t.jsx)(gi,{as:"button",isSelected:s===k,disabled:!J,onClick:()=>{J&&o({type:b.a,target:{oneThatIsCreatingARelationWithAnother:a,targetContentType:i,value:k}})},padding:2,type:"button",children:(0,t.jsx)(U,{},k)},k)})})})})}),(0,t.jsxs)(fi,{justifyContent:"center",children:[(0,t.jsxs)(M.o,{children:[qt(Z,{length:24}),"\xA0"]}),(0,t.jsxs)(M.o,{textColor:"primary600",children:[l({id:d(`relation.${s}`)}),"\xA0"]}),(0,t.jsx)(M.o,{children:qt(E,{length:24})})]})]}):null},vi=({formErrors:e,mainBoxHeader:a,modifiedData:s,naturePickerType:i,onChange:o})=>{const l=(0,b.g)(s.relation,s.targetAttribute);return(0,t.jsxs)(x.s,{style:{position:"relative"},children:[(0,t.jsx)(rn,{isMain:!0,header:a,error:e?.name||null,name:"name",onChange:o,value:s?.name||""}),(0,t.jsx)(yi,{naturePickerType:i,oneThatIsCreatingARelationWithAnother:a,relationType:l,target:s.target}),(0,t.jsx)(rn,{disabled:["oneWay","manyWay"].includes(l),error:e?.targetAttribute||null,name:"targetAttribute",onChange:o,oneThatIsCreatingARelationWithAnother:a,target:s.target,value:s?.targetAttribute||""})]})},xi=({error:e=null,intlLabel:a,name:s,onChange:i,value:o=void 0})=>{const{formatMessage:l}=(0,w.A)(),{allComponentsCategories:r}=Re(),[c,u]=(0,f.useState)(r),p=e?l({id:e,defaultMessage:e}):"",g=l(a),m=F=>{i({target:{name:s,value:F,type:"select-category"}})},$=F=>{u(C=>[...C,F]),m(F)};return(0,t.jsx)(Wn.nP,{error:p,id:s,label:g,name:s,onChange:m,onCreateOption:$,value:o,children:c.map(F=>(0,t.jsx)(zn.j,{value:F,children:F},F))})},bi=({error:e=null,intlLabel:a,isAddingAComponentToAnotherComponent:s,isCreating:i,isCreatingComponentWhileAddingAField:o,componentToCreate:l,name:r,onChange:c,targetUid:u,forTarget:p,value:g})=>{const{formatMessage:m}=(0,w.A)(),$=e?m({id:e,defaultMessage:e}):"",F=m(a),{componentsGroupedByCategory:C,componentsThatHaveOtherComponentInTheirAttributes:S}=Re(),Z=["component","components"].includes(p);let T=Object.entries(C).reduce((E,k)=>{const[U,J]=k,ue=J.map(be=>({uid:be.uid,label:be.schema.displayName,categoryName:U}));return[...E,...ue]},[]);return s&&(T=T.filter(E=>!S.includes(E.uid))),Z&&(T=T.filter(E=>E.uid!==u)),o&&(T=[{uid:g,label:l?.displayName,categoryName:l?.category}]),(0,t.jsx)(ne.l,{disabled:o||!i,error:$,label:F,id:r,name:r,onChange:E=>{c({target:{name:r,value:E,type:"select-category"}})},value:g||"",children:T.map(E=>(0,t.jsx)(Fe.c,{value:E.uid,children:`${E.categoryName} - ${E.label}`},E.uid))})},Ci=({dynamicZoneTarget:e,intlLabel:a,name:s,onChange:i,value:o})=>{const{formatMessage:l}=(0,w.A)(),{componentsGroupedByCategory:r,modifiedData:c}=Re(),p=gt(c.contentType.schema.attributes,e)?.components||[],g=Object.keys(r).reduce((F,C)=>{const S=r[C].filter(({uid:Z})=>!p.includes(Z));return S.length>0&&(F[C]=S),F},{}),m=Object.entries(g).reduce((F,C)=>{const[S,Z]=C,T={label:S,children:Z.map(({uid:E,schema:{displayName:k}})=>({label:k,value:E}))};return F.push(T),F},[]),$=l({id:d("components.SelectComponents.displayed-value"),defaultMessage:"{number, plural, =0 {# components} one {# component} other {# components}} selected"},{number:o?.length??0});return(0,t.jsx)(P.B,{id:"select1",label:l(a),customizeContent:()=>$,name:s,onChange:F=>{i({target:{name:s,value:F,type:"select-components"}})},options:m,value:o||[]})},Ai=({intlLabel:e,error:a=void 0,modifiedData:s,name:i,onChange:o,options:l,value:r=""})=>{const{formatMessage:c}=(0,w.A)(),u=c(e),p=a?c({id:a,defaultMessage:a}):"",g=m=>{o({target:{name:i,value:m,type:"select"}}),r&&s.default!==void 0&&s.default!==null&&o({target:{name:"default",value:null}})};return(0,t.jsx)(ne.l,{error:p,label:u,id:i,name:i,onChange:g,value:r||"",children:l.map(({metadatas:{intlLabel:m,disabled:$,hidden:F},key:C,value:S})=>(0,t.jsx)(Fe.c,{value:S,disabled:$,hidden:F,children:c({id:m.id,defaultMessage:m.defaultMessage},m.values)},C))})},ln=({intlLabel:e,error:a=void 0,modifiedData:s,name:i,onChange:o,options:l,value:r=""})=>{const{formatMessage:c}=(0,w.A)(),u=c(e),p=a?c({id:a,defaultMessage:a}):"",g=m=>{o({target:{name:i,value:m,type:"select"}}),r&&(m==="biginteger"&&r!=="biginteger"&&(s.default!==void 0&&s.default!==null&&o({target:{name:"default",value:null}}),s.max!==void 0&&s.max!==null&&o({target:{name:"max",value:null}}),s.min!==void 0&&s.min!==null&&o({target:{name:"min",value:null}})),typeof m=="string"&&["decimal","float","integer"].includes(m)&&r==="biginteger"&&(s.default!==void 0&&s.default!==null&&o({target:{name:"default",value:null}}),s.max!==void 0&&s.max!==null&&o({target:{name:"max",value:null}}),s.min!==void 0&&s.min!==null&&o({target:{name:"min",value:null}})))};return(0,t.jsx)(ne.l,{error:p,label:u,id:i,name:i,onChange:g,value:r||"",children:l.map(({metadatas:{intlLabel:m,disabled:$,hidden:F},key:C,value:S})=>(0,t.jsx)(Fe.c,{value:S,disabled:$,hidden:F,children:c(m)},C))})};ln.defaultProps={error:void 0,value:""};const Ti=({description:e=null,error:a=null,intlLabel:s,modifiedData:i,name:o,onChange:l,value:r=null})=>{const{formatMessage:c}=(0,w.A)(),u=(0,f.useRef)(l),p=i?.displayName||"";(0,f.useEffect)(()=>{p?u.current({target:{name:o,value:(0,b.n)(p)}}):u.current({target:{name:o,value:""}})},[p,o]);const g=a?c({id:a,defaultMessage:a}):"",m=e?c({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",$=c(s);return(0,t.jsx)(xe.k,{error:g,label:$,id:o,hint:m,name:o,onChange:l,value:r||""})},dn=({form:e,formErrors:a,genericInputProps:s,modifiedData:i,onChange:o})=>{const{formatMessage:l}=(0,w.A)();return(0,t.jsx)(t.Fragment,{children:e.map((r,c)=>r.items.length===0?null:(0,t.jsxs)(h.a,{children:[r.sectionTitle&&(0,t.jsx)(h.a,{paddingBottom:4,children:(0,t.jsx)(M.o,{variant:"delta",as:"h3",children:l(r.sectionTitle)})}),(0,t.jsx)(X.x,{gap:4,children:r.items.map((u,p)=>{const g=`${c}.${p}`,m=D(i,u.name,void 0),$=Object.keys(a).find(C=>C===u.name),F=$?a[$].id:D(a,[...u.name.split(".").filter(C=>C!=="componentToCreate"),"id"],null);return u.type==="pushRight"?(0,t.jsx)(_.E,{col:u.size||6,children:(0,t.jsx)("div",{})},u.name||g):(0,t.jsx)(_.E,{col:u.size||6,children:(0,t.jsx)(N.ah,{...u,...s,error:F,onChange:o,value:m})},u.name||g)})})]},c))})},Mi=({description:e=null,disabled:a=!1,error:s="",intlLabel:i,labelAction:o,name:l,onChange:r,placeholder:c=null,value:u=""})=>{const{formatMessage:p}=(0,w.A)(),g=s?p({id:s,defaultMessage:s}):"",m=e?p({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",$=p(i),F=c?p({id:c.id,defaultMessage:c.defaultMessage},{...c.values}):"",C=Array.isArray(u)?u.join(`
`):"",S=Z=>{const T=Z.target.value.split(`
`);r({target:{name:l,value:T}})};return(0,t.jsx)(Zn.T,{disabled:a,error:g,label:$,labelAction:o,id:l,hint:m,name:l,onChange:S,placeholder:F,value:C,children:C})},Oe={name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:d("modalForm.attribute.form.base.name.description"),defaultMessage:"No space is allowed for the name of the attribute"}},ji={sections:[{sectionTitle:null,items:[Oe]}]},He={base(e=""){return[{sectionTitle:null,items:[{name:`${e}displayName`,type:"text",intlLabel:{id:d("contentType.displayName.label"),defaultMessage:"Display Name"}},{name:`${e}category`,type:"select-category",intlLabel:{id:d("modalForm.components.create-component.category.label"),defaultMessage:"Select a category or enter a name to create a new one"}}]},{sectionTitle:null,items:[{name:`${e}icon`,type:"icon-picker",size:12,intlLabel:{id:d("modalForm.components.icon.label"),defaultMessage:"Icon"}}]}]},advanced(){return[]}},I={default:{name:"default",type:"text",intlLabel:{id:d("form.attribute.settings.default"),defaultMessage:"Default value"}},max:{name:"max",type:"checkbox-with-number-field",intlLabel:{id:d("form.attribute.item.maximum"),defaultMessage:"Maximum value"}},maxLength:{name:"maxLength",type:"checkbox-with-number-field",intlLabel:{id:d("form.attribute.item.maximumLength"),defaultMessage:"Maximum length"}},min:{name:"min",type:"checkbox-with-number-field",intlLabel:{id:d("form.attribute.item.minimum"),defaultMessage:"Minimum value"}},minLength:{name:"minLength",type:"checkbox-with-number-field",intlLabel:{id:d("form.attribute.item.minimumLength"),defaultMessage:"Minimum length"}},private:{name:"private",type:"checkbox",intlLabel:{id:d("form.attribute.item.privateField"),defaultMessage:"Private field"},description:{id:d("form.attribute.item.privateField.description"),defaultMessage:"This field will not show up in the API response"}},regex:{intlLabel:{id:d("form.attribute.item.text.regex"),defaultMessage:"RegExp pattern"},name:"regex",type:"text",description:{id:d("form.attribute.item.text.regex.description"),defaultMessage:"The text of the regular expression"}},required:{name:"required",type:"checkbox",intlLabel:{id:d("form.attribute.item.requiredField"),defaultMessage:"Required field"},description:{id:d("form.attribute.item.requiredField.description"),defaultMessage:"You won't be able to create an entry if this field is empty"}},unique:{name:"unique",type:"checkbox",intlLabel:{id:d("form.attribute.item.uniqueField"),defaultMessage:"Unique field"},description:{id:d("form.attribute.item.uniqueField.description"),defaultMessage:"You won't be able to create an entry if there is an existing entry with identical content"}}},Si={blocks(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[I.required,I.private]}]}},boolean(){return{sections:[{sectionTitle:null,items:[{autoFocus:!0,type:"select-default-boolean",intlLabel:{id:d("form.attribute.settings.default"),defaultMessage:"Default value"},name:"default",options:[{value:"true",key:"true",metadatas:{intlLabel:{id:"true",defaultMessage:"true"}}},{value:"",key:"null",metadatas:{intlLabel:{id:"null",defaultMessage:"null"}}},{value:"false",key:"false",metadatas:{intlLabel:{id:"false",defaultMessage:"false"}}}]}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[I.required,I.private]}]}},component({repeatable:e},a){return a==="1"?{sections:He.advanced()}:e?{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[I.required,I.private,I.max,I.min]}]}:{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[I.required,I.private]}]}},date({type:e}){return{sections:[{sectionTitle:null,items:[{...I.default,type:e||"date",value:null,withDefaultValue:!1,disabled:!e,autoFocus:!1}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[I.required,I.unique,I.private]}]}},dynamiczone(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[I.required,I.max,I.min]}]}},email(){return{sections:[{sectionTitle:null,items:[{...I.default,type:"email"}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[I.required,I.unique,I.maxLength,I.minLength,I.private]}]}},enumeration(e){return{sections:[{sectionTitle:null,items:[{name:"default",type:"select",intlLabel:{id:d("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{},options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"}}},...(e.enum||[]).filter((a,s)=>e.enum.indexOf(a)===s&&a).map(a=>({key:a,value:a,metadatas:{intlLabel:{id:`${a}.no-override`,defaultMessage:a}}}))]},{intlLabel:{id:d("form.attribute.item.enumeration.graphql"),defaultMessage:"Name override for GraphQL"},name:"enumName",type:"text",validations:{},description:{id:d("form.attribute.item.enumeration.graphql.description"),defaultMessage:"Allows you to override the default generated name for GraphQL"}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[I.required,I.private]}]}},json(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[I.required,I.private]}]}},media(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:d("form.attribute.media.allowed-types"),defaultMessage:"Select allowed types of media"},name:"allowedTypes",type:"allowed-types-select",size:7,value:"",validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[I.required,I.private]}]}},number(e){const a=e.type==="decimal"||e.type==="float"?"any":1;return{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"default",type:e.type==="biginteger"?"text":"number",step:a,intlLabel:{id:d("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[I.required,I.unique,I.max,I.min,I.private]}]}},password(){return{sections:[{sectionTitle:null,items:[I.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[I.required,I.maxLength,I.minLength,I.private]}]}},relation(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[I.private]}]}},richtext(){return{sections:[{sectionTitle:null,items:[I.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[I.required,I.maxLength,I.minLength,I.private]}]}},text(){return{sections:[{sectionTitle:null,items:[I.default,I.regex]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[I.required,I.unique,I.maxLength,I.minLength,I.private]}]}},uid(e){return{sections:[{sectionTitle:null,items:[{...I.default,disabled:Boolean(e.targetField),type:"text"}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[I.required,I.maxLength,I.minLength,I.private]}]}}},yt={intlLabel:{id:"global.type",defaultMessage:"Type"},name:"createComponent",type:"boolean-radio-group",size:12,radios:[{title:{id:d("form.attribute.component.option.create"),defaultMessage:"Create a new component"},description:{id:d("form.attribute.component.option.create.description"),defaultMessage:"A component is shared across types and components, it will be available and accessible everywhere."},value:!0},{title:{id:d("form.attribute.component.option.reuse-existing"),defaultMessage:"Use an existing component"},description:{id:d("form.attribute.component.option.reuse-existing.description"),defaultMessage:"Reuse a component already created to keep your data consistent across content-types."},value:!1}]},cn={advanced:Si,base:{component(e,a){if(a==="1"){const s=e.createComponent===!0?He.base("componentToCreate."):[];return{sections:[{sectionTitle:null,items:[yt]},...s]}}return{sections:[{sectionTitle:null,items:[Oe,{name:"component",type:"select-component",intlLabel:{id:d("modalForm.attributes.select-component"),defaultMessage:"Select a component"},isMultiple:!1}]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"repeatable",type:"boolean-radio-group",size:12,radios:[{title:{id:d("form.attribute.component.option.repeatable"),defaultMessage:"Repeatable component"},description:{id:d("form.attribute.component.option.repeatable.description"),defaultMessage:"Best for multiple instances (array) of ingredients, meta tags, etc.."},value:!0},{title:{id:d("form.attribute.component.option.single"),defaultMessage:"Single component"},description:{id:d("form.attribute.component.option.single.description"),defaultMessage:"Best for grouping fields like full address, main information, etc..."},value:!1}]}]}]}},date(){return{sections:[{sectionTitle:null,items:[Oe,{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",type:"select-date",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"date",value:"date",metadatas:{intlLabel:{id:d("form.attribute.item.date.type.date"),defaultMessage:"date (ex: 01/01/{currentYear})",values:{currentYear:new Date().getFullYear()}}}},{key:"datetime",value:"datetime",metadatas:{intlLabel:{id:d("form.attribute.item.date.type.datetime"),defaultMessage:"datetime (ex: 01/01/{currentYear} 00:00 AM)",values:{currentYear:new Date().getFullYear()}}}},{key:"time",value:"time",metadatas:{intlLabel:{id:d("form.attribute.item.date.type.time"),defaultMessage:"time (ex: 00:00 AM)"}}}]}]}]}},enumeration(){return{sections:[{sectionTitle:null,items:[Oe]},{sectionTitle:null,items:[{name:"enum",type:"textarea-enum",size:6,intlLabel:{id:d("form.attribute.item.enumeration.rules"),defaultMessage:"Values (one line per value)"},placeholder:{id:d("form.attribute.item.enumeration.placeholder"),defaultMessage:`Ex:
morning
noon
evening`},validations:{required:!0}}]}]}},media(){return{sections:[{sectionTitle:null,items:[Oe]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"multiple",size:12,type:"boolean-radio-group",radios:[{title:{id:d("form.attribute.media.option.multiple"),defaultMessage:"Multiple media"},description:{id:d("form.attribute.media.option.multiple.description"),defaultMessage:"Best for sliders, carousels or multiple files download"},value:!0},{title:{id:d("form.attribute.media.option.single"),defaultMessage:"Single media"},description:{id:d("form.attribute.media.option.single.description"),defaultMessage:"Best for avatar, profile picture or cover"},value:!1}]}]}]}},number(){return{sections:[{sectionTitle:null,items:[Oe,{intlLabel:{id:d("form.attribute.item.number.type"),defaultMessage:"Number format"},name:"type",type:"select-number",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"integer",value:"integer",metadatas:{intlLabel:{id:d("form.attribute.item.number.type.integer"),defaultMessage:"integer (ex: 10)"}}},{key:"biginteger",value:"biginteger",metadatas:{intlLabel:{id:d("form.attribute.item.number.type.biginteger"),defaultMessage:"biginteger (ex: 123456789)"}}},{key:"decimal",value:"decimal",metadatas:{intlLabel:{id:d("form.attribute.item.number.type.decimal"),defaultMessage:"decimal (ex: 2.22)"}}},{key:"float",value:"float",metadatas:{intlLabel:{id:d("form.attribute.item.number.type.float"),defaultMessage:"decimal (ex: 3.3333333)"}}}]}]}]}},relation(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:"FIXME",defaultMessage:"FIXME"},name:"relation",size:12,type:"relation"}]}]}},string(){return{sections:[{sectionTitle:null,items:[Oe]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:d("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:d("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:d("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:d("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},text(){return{sections:[{sectionTitle:null,items:[Oe]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:d("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:d("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:d("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:d("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},uid(e,a,s){const i=s.filter(({type:o})=>["string","text"].includes(o)).map(({name:o})=>({key:o,value:o,metadatas:{intlLabel:{id:`${o}.no-override`,defaultMessage:o}}}));return{sections:[{sectionTitle:null,items:[{...Oe,placeholder:{id:d("modalForm.attribute.form.base.name.placeholder"),defaultMessage:"e.g. slug, seoUrl, canonicalUrl"}},{intlLabel:{id:d("modalForm.attribute.target-field"),defaultMessage:"Attached field"},name:"targetField",type:"select",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"global.none",defaultMessage:"None"}}},...i]}]}]}}}},vt=e=>e?$o(e,{decamelize:!1,lowercase:!1,separator:"_"}):"",un=/^[A-Za-z][_0-9A-Za-z]*$/,mn=e=>({name:"attributeNameAlreadyUsed",message:N.iW.unique,test(a){if(!a)return!1;const s=(0,G.snakeCase)(a);return!e.some(i=>i===a?!1:(0,G.snakeCase)(i)===s)}}),xt=e=>({name:"forbiddenAttributeName",message:d("error.attributeName.reserved-name"),test(a){if(!a)return!1;const s=(0,G.snakeCase)(a);return!e.some(i=>(0,G.snakeCase)(i)===s)}}),v={default:()=>A.Yj().nullable(),max:()=>A.ai().integer().nullable(),min:()=>A.ai().integer().when("max",(e,a)=>e?a.max(e,d("error.validation.minSupMax")):a).nullable(),maxLength:()=>A.ai().integer().positive(d("error.validation.positive")).nullable(),minLength:()=>A.ai().integer().min(0).when("maxLength",(e,a)=>e?a.max(e,d("error.validation.minSupMax")):a).nullable(),name(e,a){return A.Yj().test(mn(e)).test(xt(a)).matches(un,N.iW.regex).required(N.iW.required)},required:()=>A.zM(),type:()=>A.Yj().required(N.iW.required),unique:()=>A.zM().nullable()},bt=(e,a)=>({name:v.name(e,a),type:v.type(),default:v.default(),unique:v.unique(),required:v.required(),maxLength:v.maxLength(),minLength:v.minLength(),regex:A.Yj().test({name:"isValidRegExpPattern",message:d("error.validation.regex"),test(i){return new RegExp(i||"")!==null}}).nullable()}),Ct=()=>({name:"isMinSuperiorThanMax",message:d("error.validation.minSupMax"),test(e){if(!e)return!0;const{max:a}=this.parent;return!a||Number.isNaN(pt(e))?!0:pt(a)>=pt(e)}}),_e={date(e,a){const s={name:v.name(e,a),type:v.type()};return A.Ik(s)},datetime(e,a){const s={name:v.name(e,a),type:v.type()};return A.Ik(s)},time(e,a){const s={name:v.name(e,a),type:v.type()};return A.Ik(s)},default(e,a){const s={name:v.name(e,a),type:v.type()};return A.Ik(s)},biginteger(e,a){const s={name:v.name(e,a),type:v.type(),default:A.Yj().nullable().matches(/^-?\d*$/),unique:v.unique(),required:v.required(),max:A.Yj().nullable().matches(/^-?\d*$/,N.iW.regex),min:A.Yj().nullable().test(Ct()).matches(/^-?\d*$/,N.iW.regex)};return A.Ik(s)},boolean(e,a){const s={name:v.name(e,a),default:A.zM().nullable(),required:v.required(),unique:v.unique()};return A.Ik(s)},component(e,a){const s={name:v.name(e,a),type:v.type(),required:v.required(),max:v.max(),min:v.min(),component:A.Yj().required(N.iW.required)};return A.Ik(s)},decimal(e,a){const s={name:v.name(e,a),type:v.type(),default:A.ai(),required:v.required(),max:A.ai(),min:A.ai().test(Ct())};return A.Ik(s)},dynamiczone(e,a){const s={name:v.name(e,a),type:v.type(),required:v.required(),max:v.max(),min:v.min()};return A.Ik(s)},email(e,a){const s={name:v.name(e,a),type:v.type(),default:A.Yj().email().nullable(),unique:v.unique(),required:v.required(),maxLength:v.maxLength(),minLength:v.minLength()};return A.Ik(s)},enumeration(e,a){const s=/^[_A-Za-z][_0-9A-Za-z]*$/,i={name:A.Yj().test(mn(e)).test(xt(a)).matches(s,N.iW.regex).required(N.iW.required),type:v.type(),default:v.default(),unique:v.unique(),required:v.required(),enum:A.YO().of(A.Yj()).min(1,N.iW.min).test({name:"areEnumValuesUnique",message:d("error.validation.enum-duplicate"),test(o){return o?!Oo(o.map(vt).filter((r,c,u)=>u.indexOf(r)!==c)).length:!1}}).test({name:"doesNotHaveEmptyValues",message:d("error.validation.enum-empty-string"),test:o=>o?!o.map(vt).some(l=>l===""):!1}).test({name:"doesMatchRegex",message:d("error.validation.enum-regex"),test:o=>o?o.map(vt).every(l=>s.test(l)):!1}),enumName:A.Yj().nullable()};return A.Ik(i)},float(e,a){const s={name:v.name(e,a),type:v.type(),required:v.required(),default:A.ai(),max:A.ai(),min:A.ai().test(Ct())};return A.Ik(s)},integer(e,a){const s={name:v.name(e,a),type:v.type(),default:A.ai().integer(),unique:v.unique(),required:v.required(),max:v.max(),min:v.min()};return A.Ik(s)},json(e,a){const s={name:v.name(e,a),type:v.type(),required:v.required(),unique:v.unique()};return A.Ik(s)},media(e,a){const s={name:v.name(e,a),type:v.type(),multiple:A.zM(),required:v.required(),allowedTypes:A.YO().of(A.Yj().oneOf(["images","videos","files","audios"])).min(1).nullable()};return A.Ik(s)},password(e,a){const s={name:v.name(e,a),type:v.type(),default:v.default(),unique:v.unique(),required:v.required(),maxLength:v.maxLength(),minLength:v.minLength()};return A.Ik(s)},relation(e,a,s,{initialData:i,modifiedData:o}){const l={name:v.name(e,a),target:A.Yj().required(N.iW.required),relation:A.Yj().required(),type:A.Yj().required(),targetAttribute:A.RZ(()=>{const r=(0,b.g)(o.relation,o.targetAttribute);if(r==="oneWay"||r==="manyWay")return A.Yj().nullable();const c=A.Yj().test(xt(a)),p=[...s.map(({name:g})=>g),o.name].filter(g=>g!==i.targetAttribute);return c.matches(un,N.iW.regex).test({name:"forbiddenTargetAttributeName",message:d("error.validation.relation.targetAttribute-taken"),test(g){return g?!p.includes(g):!1}}).required(N.iW.required)})};return A.Ik(l)},richtext(e,a){const s={name:v.name(e,a),type:v.type(),default:v.default(),unique:v.unique(),required:v.required(),maxLength:v.maxLength(),minLength:v.minLength()};return A.Ik(s)},blocks(e,a){const s={name:v.name(e,a),type:v.type(),default:v.default(),unique:v.unique(),required:v.required(),maxLength:v.maxLength(),minLength:v.minLength()};return A.Ik(s)},string(e,a){const s=bt(e,a);return A.Ik(s)},text(e,a){const s=bt(e,a);return A.Ik(s)},uid(e,a){const s=bt(e,a);return A.Ik(s)}},pn=/^[A-Za-z][-_0-9A-Za-z]*$/,Fi=e=>{const a={name:A.Yj().matches(pn,N.iW.regex).test({name:"nameNotAllowed",message:N.iW.unique,test(s){return s?!e.includes(s?.toLowerCase()):!1}}).required(N.iW.required)};return A.Ik(a)},Ni={base:{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:d("modalForm.editCategory.base.name.description"),defaultMessage:"No space is allowed for the name of the category"}}]}]}},Li=(e,a,s,i,o)=>{const l={displayName:A.Yj().test({name:"nameAlreadyUsed",message:N.iW.unique,test(r){if(!r)return!1;const c=(0,b.c)(r,s),u=(0,G.snakeCase)(c),p=(0,G.snakeCase)(o);return e.every(g=>(0,G.snakeCase)(g)!==u)&&i.every(g=>(0,G.snakeCase)(g)!==p)}}).test({name:"nameNotAllowed",message:d("error.contentTypeName.reserved-name"),test(r){if(!r)return!1;const c=(0,G.snakeCase)(r);return a.every(u=>(0,G.snakeCase)(u)!==c)}}).required(N.iW.required),category:A.Yj().matches(pn,N.iW.regex).required(N.iW.required),icon:A.Yj()};return A.Ik(l)},gn={name:"displayName",type:"text",intlLabel:{id:d("contentType.displayName.label"),defaultMessage:"Display name"}},At={advanced:{default(){return{sections:[{items:[{intlLabel:{id:d("contentType.draftAndPublish.label"),defaultMessage:"Draft & publish"},description:{id:d("contentType.draftAndPublish.description"),defaultMessage:"Allows writing a draft version of an entry, before it is published"},name:"draftAndPublish",type:"toggle-draft-publish",validations:{}}]}]}}},base:{create(){return{sections:[{sectionTitle:null,items:[gn,{description:{id:d("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:d("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text-singular"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{description:{id:d("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:d("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text-plural"}]}]}},edit(){return{sections:[{sectionTitle:null,items:[gn,{disabled:!0,description:{id:d("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:d("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{disabled:!0,description:{id:d("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:d("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text"},{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"kind",type:"content-type-radio-group",size:12,radios:[{title:{id:d("form.button.collection-type.name"),defaultMessage:"Collection Type"},description:{id:d("form.button.collection-type.description"),defaultMessage:"Best for multiple instances like articles, products, comments, etc."},value:"collectionType"},{title:{id:d("form.button.single-type.name"),defaultMessage:"Single Type"},description:{id:d("form.button.single-type.description"),defaultMessage:"Best for single instance like about us, homepage, etc."},value:"singleType"}]}]}]}}}},Ii=({usedContentTypeNames:e=[],reservedModels:a=[],singularNames:s=[],pluralNames:i=[],collectionNames:o=[]})=>{const l={displayName:A.Yj().test({name:"nameAlreadyUsed",message:N.iW.unique,test(r){if(!r)return!1;const c=(0,b.b)(r),u=(0,G.snakeCase)(c);return!e.some(p=>(0,G.snakeCase)(p)===u)}}).test({name:"nameNotAllowed",message:d("error.contentTypeName.reserved-name"),test(r){if(!r)return!1;const c=(0,G.snakeCase)(r);return!a.some(u=>(0,G.snakeCase)(u)===c)}}).required(N.iW.required),pluralName:A.Yj().test({name:"pluralNameAlreadyUsed",message:N.iW.unique,test(r){if(!r)return!1;const c=(0,G.snakeCase)(r);return!i.some(u=>(0,G.snakeCase)(u)===c)}}).test({name:"pluralNameAlreadyUsedAsSingular",message:d("error.contentType.pluralName-equals-singularName"),test(r){if(!r)return!1;const c=(0,G.snakeCase)(r);return!s.some(u=>(0,G.snakeCase)(u)===c)}}).test({name:"pluralAndSingularAreUnique",message:d("error.contentType.pluralName-used"),test(r,c){return r?(0,G.snakeCase)(c.parent.singularName)!==(0,G.snakeCase)(r):!1}}).test({name:"pluralNameNotAllowed",message:d("error.contentTypeName.reserved-name"),test(r){if(!r)return!1;const c=(0,G.snakeCase)(r);return!a.some(u=>(0,G.snakeCase)(u)===c)}}).test({name:"pluralNameNotAlreadyUsedInCollectionName",message:d("error.contentType.pluralName-equals-collectionName"),test(r){if(!r)return!1;const c=(0,G.snakeCase)(r);return!o.some(u=>(0,G.snakeCase)(u)===c)}}).required(N.iW.required),singularName:A.Yj().test({name:"singularNameAlreadyUsed",message:N.iW.unique,test(r){if(!r)return!1;const c=(0,G.snakeCase)(r);return!s.some(u=>(0,G.snakeCase)(u)===c)}}).test({name:"singularNameAlreadyUsedAsPlural",message:d("error.contentType.singularName-equals-pluralName"),test(r){if(!r)return!1;const c=(0,G.snakeCase)(r);return!i.some(u=>(0,G.snakeCase)(u)===c)}}).test({name:"pluralAndSingularAreUnique",message:d("error.contentType.singularName-used"),test(r,c){return r?(0,G.snakeCase)(c.parent.pluralName)!==(0,G.snakeCase)(r):!1}}).test({name:"singularNameNotAllowed",message:d("error.contentTypeName.reserved-name"),test(r){if(!r)return!1;const c=(0,G.snakeCase)(r);return!a.some(u=>(0,G.snakeCase)(u)===c)}}).required(N.iW.required),draftAndPublish:A.zM(),kind:A.Yj().oneOf(["singleType","collectionType"]),reviewWorkflows:A.zM()};return A.Ik(l)},Tt={advanced:{default(){return{sections:He.advanced()}}},base:{createComponent(){return{sections:[{sectionTitle:null,items:[yt]},...He.base("componentToCreate.")]}},default(){return{sections:[{sectionTitle:null,items:[yt]},{sectionTitle:null,items:[{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{name:"components",type:"select-components",intlLabel:{id:d("modalForm.attributes.select-components"),defaultMessage:"Select the components"},isMultiple:!0}]}]}}}},fn=(e,a)=>{e.forEach(s=>{if(!("sectionTitle"in s)){a[0].items?.push(s);return}a.push(s)})},Ei=(e,a)=>`components_${(0,G.snakeCase)(a)}_${rt((0,G.snakeCase)(e))}`,hn=(e,a)=>e.filter(({name:s})=>s!==a.initialData.name).map(({name:s})=>s),Ue={customField:{schema({schemaAttributes:e,attributeType:a,customFieldValidator:s,reservedNames:i,schemaData:o,ctbFormsAPI:l}){const r=hn(e,o);_e[a];let c;return a==="relation"?c=_e[a](r,i.attributes,[],{initialData:{},modifiedData:{}}):c=_e[a](r,i.attributes),l.makeCustomFieldValidator(c,s,r,i.attributes,o)},form:{base({customField:e}){const a=[{sectionTitle:null,items:[Oe]}];return e.options?.base&&fn(e.options.base,a),{sections:a}},advanced({customField:e,data:a,step:s,extensions:i,...o}){const l=[{sectionTitle:null,items:[]}],r=i.getAdvancedForm(["attribute",e.type],{data:a,type:e.type,step:s,...o});if(e.options?.advanced&&fn(e.options.advanced,l),r){const c={sectionTitle:{id:d("modalForm.custom-fields.advanced.settings.extended"),defaultMessage:"Extended settings"},items:r};l.push(c)}return{sections:l}}}},attribute:{schema(e,a,s,i,o,l){const r=e?.schema?.attributes??[],c=hn(r,o);try{const u=_e[a](c,s.attributes,i,o);return l.makeValidator(["attribute",a],u,c,s.attributes,i,o)}catch(u){return console.error("Error yup build schema",u),_e.default(c,s.attributes)}},form:{advanced({data:e,type:a,step:s,extensions:i,...o}){try{const l=cn.advanced[a](e,s).sections,r=i.getAdvancedForm(["attribute",a],{data:e,type:a,step:s,...o});return{sections:l.reduce((u,p)=>(p.sectionTitle===null?u.push(p):u.push({...p,items:[...p.items,...r]}),u),[])}}catch(l){return console.error(l),{sections:[]}}},base({data:e,type:a,step:s,attributes:i}){try{return cn.base[a](e,s,i)}catch{return ji}}}},contentType:{schema(e,a,s,i,o,l){const r=Object.values(l).map(C=>C.schema.singularName),c=Object.values(l).map(C=>C?.schema?.pluralName??""),u=a?e.filter(C=>C!==s):e,p=a?r.filter(C=>{const{schema:S}=l[s];return S.singularName!==C}):r,g=a?c.filter(C=>{const{schema:S}=l[s];return S.pluralName!==C}):c,m=Object.values(l).map(C=>C?.schema?.collectionName??""),$=a?m.filter(C=>{const{schema:S}=l[s],Z=S.pluralName,T=S.collectionName;return C!==Z||C!==T}):m,F=Ii({usedContentTypeNames:u,reservedModels:i.models,singularNames:p,pluralNames:g,collectionNames:$});return o.makeValidator(["contentType"],F,u,i.models,p,g)},form:{base({actionType:e}){return e==="create"?At.base.create():At.base.edit()},advanced({extensions:e}){const a=At.advanced.default().sections.map(i=>i.items).flat(),s=e.getAdvancedForm(["contentType"]);return{sections:[{items:[...a,...s]}]}}}},component:{schema(e,a,s,i=!1,o,l,r=null){const c=i?e.filter(m=>m!==r):e,u=Object.values(o).map(m=>m?.schema?.collectionName),p=Ei(l,a),g=i?u.filter(m=>m!==p):u;return Li(c,s.models,a,g,p)},form:{advanced(){return{sections:He.advanced()}},base(){return{sections:He.base()}}}},addComponentToDynamicZone:{form:{advanced(){return Tt.advanced.default()},base({data:e}){return e?.createComponent??!1?Tt.base.createComponent():Tt.base.default()}}},editCategory:{schema(e,a){const s=e.filter(i=>i!==a.name).map(i=>i.toLowerCase());return Fi(s)},form:{advanced:()=>({sections:[]}),base(){return Ni.base}}}},Oi=()=>e=>e[`${b.p}_formModal`]||b.i,$i=()=>(0,_t.Mz)(Oi(),e=>e),Di=(e,a)=>{const s=D(e,["contentType","schema","kind"],"");return s==="singleType"||s===a.kind?!0:D(e,["contentType","schema","attributes"],[]).filter(({relation:l,type:r,targetAttribute:c})=>{const u=(0,b.g)(l,c);return r==="relation"&&!["oneWay","manyWay"].includes(u||"")}).length===0},Ri=(e="",a,s)=>{const i=["text","boolean","blocks","json","number","email","date","password","media","enumeration","relation","richtext"],o=e==="contentType",l=s.includes(a),r=!o&&!l;return o?[[...i.slice(0,-1),"uid",...i.slice(-1)],["component","dynamiczone"]]:r?[i,["component"]]:[i]},yn=e=>e.reduce((a,s)=>{const i=s.items.reduce((o,l)=>(l.name&&o.push(l.name),o),[]);return[...a,...i]},[]),Pi=()=>{const{onCloseModal:e,onNavigateToChooseAttributeModal:a,onNavigateToAddCompoToDZModal:s,onNavigateToCreateComponentStep2:i,actionType:o,attributeName:l,attributeType:r,customFieldUid:c,categoryName:u,dynamicZoneTarget:p,forTarget:g,modalType:m,isOpen:$,kind:F,step:C,targetUid:S,showBackLink:Z}=Ge(),T=(0,N.AC)().get(c),E=(0,f.useRef)(),k=(0,f.useMemo)($i,[]),U=(0,Ye.wA)(),J=(0,N.hN)(),ue=(0,Ye.d4)(H=>k(H),Ye.bN),{push:be}=(0,Te.W6)(),{trackUsage:V}=(0,N.z1)(),{formatMessage:ve}=(0,w.A)(),{getPlugin:q}=(0,N.vD)(),ge=q(b.p)?.apis.forms,oe=ge.components.inputs,{addAttribute:Pe,addCustomFieldAttribute:me,addCreatedComponentToDynamicZone:Q,allComponentsCategories:L,changeDynamicZoneComponents:Mt,contentTypes:we,components:We,createSchema:Ke,deleteCategory:jt,deleteData:dt,editCategory:St,editCustomFieldAttribute:Ft,submitData:Nt,modifiedData:fe,nestedComponents:Lt,setModifiedData:It,sortedContentTypesList:Et,updateSchema:ct,reservedNames:ze}=Re(),{componentToCreate:tt,formErrors:Be,initialData:de,isCreatingComponentWhileAddingAField:nt,modifiedData:y}=ue,O=g==="contentType"||g==="component"?[g]:[g,S];(0,f.useEffect)(()=>{if($){const H=Et.filter(an);m==="editCategory"&&It(),o==="edit"&&m==="attribute"&&g==="contentType"&&V("willEditFieldOfContentType");const Ae=[...O,"schema","attributes"],Ee=gt(D(fe,Ae,[]),p)||null;if(m==="editCategory"&&o==="edit"&&U({type:b.S,modalType:m,actionType:o,data:{name:u}}),m==="contentType"&&o==="create"&&U({type:b.S,modalType:m,actionType:o,data:{draftAndPublish:!0},pluginOptions:{}}),m==="contentType"&&o==="edit"){const{displayName:K,draftAndPublish:ce,kind:Se,pluginOptions:ye,pluralName:yr,reviewWorkflows:vr,singularName:xr}=D(fe,[...O,"schema"],{displayName:null,pluginOptions:{},singularName:null,pluralName:null});U({type:b.S,actionType:o,modalType:m,data:{displayName:K,draftAndPublish:ce,kind:Se,pluginOptions:ye,pluralName:yr,reviewWorkflows:vr??!1,singularName:xr}})}if(m==="component"&&o==="edit"){const K=D(fe,O,{});U({type:b.S,actionType:o,modalType:m,data:{displayName:K.schema.displayName,category:K.category,icon:K.schema.icon}})}if(m==="addComponentToDynamicZone"&&o==="edit"){const K={...Ee,components:[],name:p,createComponent:!1,componentToCreate:{type:"component"}};U({type:b.d,attributeToEdit:K})}if(r){const ce={...gt(D(fe,Ae,[]),l),name:l};r==="component"&&o==="edit"&&(ce.repeatable||Xt(ce,"repeatable",!1)),U(m==="customField"?{type:b.e,customField:T,isEditing:o==="edit",modifiedDataToSetForEditing:ce,forTarget:g}:{type:b.f,attributeType:r,nameToSetForRelation:D(H,["0","title"],"error"),targetUid:D(H,["0","uid"],"error"),isEditing:o==="edit",modifiedDataToSetForEditing:ce,step:C,forTarget:g})}}else U({type:b.R})},[o,l,r,u,p,g,$,m]);const Y=m==="contentType",re=m==="component",he=m==="attribute",Le=m==="customField",Ie=r==="component"&&he,Ze=o==="create",Ve=D(y,"createComponent",!1)||nt,Qe=C==="1",Fn=m==="editCategory",Nn=m==="chooseAttribute",Ot=(0,b.b)(y.displayName||""),$t=D(fe,[...O,"schema","attributes"],null),ar=async()=>{let H;const Ae=Ve&&C==="1"?D(y,"componentToCreate",{}):y;if(Y)H=Ue.contentType.schema(Object.keys(we),o==="edit",D(fe,[...O,"uid"],null),ze,ge,we);else if(re)H=Ue.component.schema(Object.keys(We),y.category||"",ze,o==="edit",We,y.displayName||"",D(fe,[...O,"uid"],null));else if(Le)H=Ue.customField.schema({schemaAttributes:D(fe,[...O,"schema","attributes"],[]),attributeType:T.type,reservedNames:ze,schemaData:{modifiedData:y,initialData:de},ctbFormsAPI:ge,customFieldValidator:T.options?.validator});else if(Ie&&Ve&&Qe)H=Ue.component.schema(Object.keys(We),D(y,"componentToCreate.category",""),ze,o==="edit",We,y.componentToCreate.displayName||"");else if(he&&!Qe){const Ee=r==="relation"?"relation":y.type;let K=[];if(Ee==="relation"){const ce=D(y,["target"],null);K=D(we,[ce,"schema","attributes"],[]).filter(({name:ye})=>o!=="edit"?!0:ye!==de.targetAttribute)}H=Ue.attribute.schema(D(fe,O,{}),Ee,ze,K,{modifiedData:y,initialData:de},ge)}else if(Fn)H=Ue.editCategory.schema(L,de);else if(Qe&&Ve)H=Ue.component.schema(Object.keys(We),D(y,"componentToCreate.category",""),ze,o==="edit",We,y.componentToCreate.displayName||"");else return;await H.validate(Ae,{abortEarly:!1})},Ln=(0,f.useCallback)(({target:{name:H,value:Ae,type:Ee,...K}})=>{const ce=["enumName","max","min","maxLength","minLength","regex","default"];let Se;ce.includes(H)&&Ae===""?Se=null:Se=Ae;const ye=Object.assign({},Be);H==="max"&&delete ye.min,H==="maxLength"&&delete ye.minLength,delete ye[H],U({type:b.h,errors:ye}),U({type:b.j,keys:H.split("."),value:Se,...K})},[U,Be]),je=async(H,Ae=Ze)=>{H.preventDefault();try{await ar(),ir(Ae);const Ee=g==="components"?S:Ot;if(Y)if(Ze)Ke({...y,kind:F},m,Ot),be({pathname:`/plugins/${b.p}/content-types/${Ot}`}),a({forTarget:g,targetUid:Ee});else{Di(fe,y)?(e(),Nt(y)):J({type:"warning",message:{id:"notification.contentType.relations.conflict"}});return}else if(m==="component")if(Ze){const K=(0,b.c)(y.displayName,y.category),{category:ce,...Se}=y;Ke(Se,"component",K,ce),be({pathname:`/plugins/${b.p}/component-categories/${ce}/${K}`}),a({forTarget:g,targetUid:K})}else{ct(y,m,S),e();return}else if(Fn){if(Jt(de.name)===Jt(y.name)){e();return}St(de.name,y);return}else if(Le){const K={attributeToSet:{...y,customField:c},forTarget:g,targetUid:S,initialAttribute:de};o==="edit"?Ft(K):me(K),Ae?a({forTarget:g,targetUid:Ee}):e();return}else if(he&&!Ve){if(r==="dynamiczone"){Pe(y,g,S,o==="edit",de),Ze?(U({type:b.k}),E.current!==void 0&&E.current._handlers.setSelectedTabIndex(0),s({dynamicZoneTarget:y.name})):e();return}if(!Ie){Pe(y,g,S,o==="edit",de),Ae?a({forTarget:g,targetUid:Ee}):e();return}if(Qe){i(),U({type:b.l,forTarget:g});return}Pe(y,g,S,o==="edit",de,!0),Ae?a({forTarget:g,targetUid:S}):e()}else if(he&&Ve){if(Qe){V("willCreateComponentFromAttributesModal"),U({type:b.m,forTarget:g}),i();return}const{category:K,type:ce,...Se}=tt,ye=(0,b.c)(tt.displayName,K);Ke(Se,ce,ye,K,Ve),Pe(y,g,S,!1),U({type:b.R}),Ae?a({forTarget:"components",targetUid:ye}):e();return}else{if(Qe)if(Ve){const{category:K,type:ce,...Se}=y.componentToCreate,ye=(0,b.c)(y.componentToCreate.displayName,K);Ke(Se,ce,ye,K,Ve),Q(p,[ye]),a({forTarget:"components",targetUid:ye})}else Mt(p,y.components),e();else console.error("This case is not handled");return}U({type:b.R})}catch(Ee){const K=(0,N.ed)(Ee);U({type:b.h,errors:K})}},sr=()=>{window.confirm(ve({id:"window.confirm.close-modal.file",defaultMessage:"Are you sure? Your changes will be lost."}))&&(e(),U({type:b.R}))},In=()=>{mt(y,de)?(e(),U({type:b.R})):sr()},or=H=>{if(H==="advanced"){if(Y){V("didSelectContentTypeSettings");return}g==="contentType"&&V("didSelectContentTypeFieldSettings")}},ir=H=>{m==="attribute"&&g==="contentType"&&r!=="dynamiczone"&&H&&V("willAddMoreFieldToContentType")},rr=()=>!!(m==="editCategory"||m==="component"||Io(y,"createComponent")),lr=Ri(g,S,Lt);if(!$||!m)return null;const En=D(Ue,[m,"form"],{advanced:()=>({sections:[]}),base:()=>({sections:[]})}),dr=g==="components"||g==="component",On={customInputs:{"allowed-types-select":Uo,"boolean-radio-group":_o,"checkbox-with-number-field":ei,"icon-picker":di,"content-type-radio-group":ti,"radio-group":ft,relation:vi,"select-category":xi,"select-component":bi,"select-components":Ci,"select-default-boolean":Jo,"select-number":ln,"select-date":Ai,"toggle-draft-publish":ni,"text-plural":ci,"text-singular":Ti,"textarea-enum":Mi,...oe},componentToCreate:tt,dynamicZoneTarget:p,formErrors:Be,isAddingAComponentToAnotherComponent:dr,isCreatingComponentWhileAddingAField:nt,mainBoxHeader:D(fe,[...O,"schema","displayName"],""),modifiedData:y,naturePickerType:g,isCreating:Ze,targetUid:S,forTarget:g},$n=En.advanced({data:y,type:r,step:C,actionType:o,attributes:$t,extensions:ge,forTarget:g,contentTypeSchema:fe.contentType||{},customField:T}).sections,Dn=En.base({data:y,type:r,step:C,actionType:o,attributes:$t,extensions:ge,forTarget:g,contentTypeSchema:fe.contentType||{},customField:T}).sections,cr=yn(Dn),ur=yn($n),mr=Object.keys(Be).some(H=>cr.includes(H)),pr=Object.keys(Be).some(H=>ur.includes(H)),gr=D(we,[S,"schema","kind"]),fr=()=>o==="edit"&&$t.every(({name:H})=>H!==y?.name),hr=()=>{fr()&&V("didEditFieldNameOnContentType")};return(0,t.jsxs)(Vn.k,{onClose:In,labelledBy:"title",children:[(0,t.jsx)(si,{actionType:o,attributeName:l,categoryName:u,contentTypeKind:F,dynamicZoneTarget:p,modalType:m,forTarget:g,targetUid:S,attributeType:r,customFieldUid:c,showBackLink:Z}),Nn&&(0,t.jsx)(Xo,{attributes:lr,forTarget:g,kind:gr||"collectionType"}),!Nn&&(0,t.jsxs)("form",{onSubmit:je,children:[(0,t.jsx)($e.c,{children:(0,t.jsxs)(le.f,{label:"todo",id:"tabs",variant:"simple",ref:E,onTabChange:H=>{H===1&&or("advanced")},children:[(0,t.jsxs)(x.s,{justifyContent:"space-between",children:[(0,t.jsx)(ii,{actionType:o,forTarget:g,kind:F,step:C,modalType:m,attributeType:r,attributeName:l,customField:T}),(0,t.jsxs)(ie.t,{children:[(0,t.jsx)(ie.o,{hasError:mr,children:ve({id:d("popUpForm.navContainer.base"),defaultMessage:"Basic settings"})}),(0,t.jsx)(ie.o,{hasError:pr,disabled:rr(),children:ve({id:d("popUpForm.navContainer.advanced"),defaultMessage:"Advanced settings"})})]})]}),(0,t.jsx)(te.c,{}),(0,t.jsx)(h.a,{paddingTop:6,children:(0,t.jsxs)(se.T,{children:[(0,t.jsx)(se.K,{children:(0,t.jsx)(x.s,{direction:"column",alignItems:"stretch",gap:6,children:(0,t.jsx)(dn,{form:Dn,formErrors:Be,genericInputProps:On,modifiedData:y,onChange:Ln})})}),(0,t.jsx)(se.K,{children:(0,t.jsx)(x.s,{direction:"column",alignItems:"stretch",gap:6,children:(0,t.jsx)(dn,{form:$n,formErrors:Be,genericInputProps:On,modifiedData:y,onChange:Ln})})})]})})]})}),(0,t.jsx)(Yn.j,{endActions:(0,t.jsx)(ai,{deleteCategory:jt,deleteContentType:dt,deleteComponent:dt,categoryName:de.name,isAttributeModal:m==="attribute",isCustomFieldModal:m==="customField",isComponentToDzModal:m==="addComponentToDynamicZone",isComponentAttribute:r==="component",isComponentModal:m==="component",isContentTypeModal:m==="contentType",isCreatingComponent:o==="create",isCreatingDz:o==="create",isCreatingComponentAttribute:y.createComponent||!1,isCreatingComponentInDz:y.createComponent||!1,isCreatingComponentWhileAddingAField:nt,isCreatingContentType:o==="create",isEditingAttribute:o==="edit",isDzAttribute:r==="dynamiczone",isEditingCategory:m==="editCategory",isInFirstComponentStep:C==="1",onSubmitAddComponentAttribute:je,onSubmitAddComponentToDz:je,onSubmitCreateComponent:je,onSubmitCreateContentType:je,onSubmitCreateDz:je,onSubmitEditAttribute:je,onSubmitEditCategory:je,onSubmitEditComponent:je,onSubmitEditContentType:je,onSubmitEditCustomFieldAttribute:je,onSubmitEditDz:je,onClickFinish:hr}),startActions:(0,t.jsx)(ee.$,{variant:"tertiary",onClick:In,children:ve({id:"app.components.Button.cancel",defaultMessage:"Cancel"})})})]})]})},Bi=()=>e=>e[`${b.p}_dataManagerProvider`]||b.o,ki=()=>(0,_t.Mz)(Bi(),e=>e),Ui=(e,a)=>{const s=Object.keys(e).filter(i=>{const o=D(e,i,{}),l=D(a,i,{}),r=D(o,["isTemporary"],!1),c=!mt(o,l);return r||c});return(0,b.q)(s)},Wi=(e,a)=>{const s=xn(D(e,"schema.attributes",[]),a),i=D(e,"isTemporary",!1)?{tmpUID:e.uid}:{uid:e.uid};return Object.assign({},i,{category:e.category},en(e.schema,"attributes"),{attributes:s})},vn=(e,a=!1)=>{const s=D(e,"uid",null),i=xn(D(e,"schema.attributes",[]),s),o=a?{category:D(e,"category","")}:{},l=Object.assign(o,en(e.schema,"attributes"),{attributes:i});return delete l.uid,delete l.isTemporary,delete l.visible,delete l.restrictRelationsTo,l},xn=(e,a)=>e.reduce((s,{name:i,...o})=>{const l=o,r=l.target===a,c=l.type==="relation",u=D(l,"targetAttribute",null);if(!r)if(c){const p=Object.assign({},l,{targetAttribute:bn(u)});s[i]=lt(p)}else s[i]=lt(l);if(r){const p=l.target,g=Object.assign({},l,{target:p,targetAttribute:bn(u)});s[i]=lt(g)}if(l.customField){const p={...l,type:"customField"};s[i]=lt(p)}return s},{}),bn=e=>e==="-"?null:e,lt=e=>Object.keys(e).reduce((a,s)=>(e[s]!==null&&s!=="plugin"&&(a[s]=e[s]),a),{}),zi=(e,a,s)=>Ui(e,a).map(l=>{const r=D(e,l,{});return Wi(r,s)}),Zi=e=>Ro(Object.keys(e).map(a=>({visible:e[a].schema.visible,name:a,title:e[a].schema.displayName,plugin:e[a].plugin||null,uid:a,to:`/plugins/${b.p}/content-types/${a}`,kind:e[a].schema.kind,restrictRelationsTo:e[a].schema.restrictRelationsTo})).filter(a=>a!==null),a=>Do(a.title)),Cn=e=>e.reduce((a,s)=>(a[s.uid]=s,a),{}),Vi=(e,a,s,i)=>{const o=a.reduce((c,u)=>{const p=D(s,u,{});return c[u]=p,c},{});return{[i?"contentType":"component"]:e,components:o}},An=e=>Object.keys(e).reduce((a,s)=>{const i=e[s].schema;return a[s]={...e[s],schema:{...i,attributes:Yi(i.attributes)}},a},{}),Yi=e=>Object.keys(e).reduce((a,s)=>(a.push({...e[s],name:s}),a),[]),Gi=e=>{const a=Object.keys(e).reduce((s,i)=>{const o=D(e,[i]),l=o.uid;return Hi(o)&&s.push(l),s},[]);return(0,b.q)(a)},Hi=e=>D(e,["schema","attributes"],[]).some(s=>{const{type:i}=s;return i==="component"}),Tn=e=>{const a=Object.keys(e).reduce((s,i)=>{const o=e?.[i]?.schema?.attributes??[],l=wi(o);return[...s,...l]},[]);return(0,b.q)(a)},wi=e=>e.reduce((a,s)=>{const{type:i,component:o}=s;return i==="component"&&a.push(o),a},[]),Ki=(e,a)=>{const s=Object.keys(e).map(i=>D(e,[i,...a],""));return(0,b.q)(s)},Mn="did-not-kill-server",Qi="server is down";function et(e,a){return new Promise(s=>{fetch(`${window.strapi.backendURL}/_health`,{method:"HEAD",mode:"no-cors",headers:{"Content-Type":"application/json","Keep-Alive":"false"}}).then(i=>{if(i.status>=400)throw new Error(Qi);if(!a)throw new Error(Mn);s(e)}).catch(i=>{setTimeout(()=>et(e,i.message!==Mn).then(s),100)})})}const Xi=e=>Object.values(e.attributes).filter(s=>s.type==="dynamiczone").every(s=>Array.isArray(s.components)&&s.components.length>0),Ji=({children:e})=>{const a=(0,Ye.wA)(),{components:s,contentTypes:i,isLoading:o,isLoadingForDataToBeSet:l,initialData:r,modifiedData:c,reservedNames:u}=(0,Ye.d4)(ki()),p=(0,N.hN)(),{lockAppWithAutoreload:g,unlockAppWithAutoreload:m}=(0,N.Ip)(),{setCurrentStep:$}=(0,N.Cx)(),{getPlugin:F}=(0,N.vD)(),C=F(b.p),{autoReload:S}=(0,N.Xe)(),{formatMessage:Z}=(0,w.A)(),{trackUsage:T}=(0,N.z1)(),{refetchPermissions:E}=(0,N.r5)(),{pathname:k}=(0,Te.zy)(),{onCloseModal:U}=Ge(),J=(0,Te.W5)(`/plugins/${b.p}/content-types/:uid`),ue=(0,Te.W5)(`/plugins/${b.p}/component-categories/:categoryUid/:componentUid`),be=(0,N.ry)(),{put:V,post:ve,del:q}=be,Ce=(0,f.useRef)();Ce.current=Z;const ge=S,oe=J!==null,Pe=oe?"contentType":"component",me=oe?D(J,"params.uid",null):D(ue,"params.componentUid",null),Q=(0,f.useRef)(),L=oe?"content-types":"components";Q.current=async()=>{try{const[{data:{data:y}},{data:{data:O}},{data:Y}]=await Promise.all(["components","content-types","reserved-names"].map(Ze=>be.get(`/${b.p}/${Ze}`))),re=Cn(y),he=An(re),Le=Cn(O),Ie=An(Le);a({type:b.G,components:he,contentTypes:Ie,reservedNames:Y})}catch(y){console.error({err:y}),p({type:"warning",message:{id:"notification.error"}})}},(0,f.useEffect)(()=>(Q.current(),()=>{a({type:b.r})}),[]),(0,f.useEffect)(()=>{!o&&me&&ct()},[o,k,me]),(0,f.useEffect)(()=>{S||p({type:"info",message:{id:d("notification.info.autoreaload-disable")}})},[S,p]);const Mt=(y,O,Y,re=!1,he,Le=!1)=>{const Ie=re?b.x:b.y;a({type:Ie,attributeToSet:y,forTarget:O,targetUid:Y,initialAttribute:he,shouldAddComponentToData:Le})},we=({attributeToSet:y,forTarget:O,targetUid:Y,initialAttribute:re})=>{a({type:b.A,attributeToSet:y,forTarget:O,targetUid:Y,initialAttribute:re})},We=({attributeToSet:y,forTarget:O,targetUid:Y,initialAttribute:re})=>{a({type:b.E,attributeToSet:y,forTarget:O,targetUid:Y,initialAttribute:re})},Ke=(y,O)=>{a({type:b.u,dynamicZoneTarget:y,componentsToAdd:O})},jt=(y,O,Y,re,he=!1)=>{const Le=O==="contentType"?b.z:b.B;a({type:Le,data:y,componentCategory:re,schemaType:O,uid:Y,shouldAddComponentToData:he})},dt=(y,O)=>{a({type:b.C,dynamicZoneTarget:y,newComponents:O})},St=(y,O,Y="")=>{const re=y==="components"?b.F:b.H;y==="contentType"&&T("willDeleteFieldOfContentType"),a({type:re,mainDataKey:y,attributeToRemoveName:O,componentUid:Y})},Ft=async y=>{try{const O=`/${b.p}/component-categories/${y}`,Y=window.confirm(Z({id:d("popUpWarning.bodyMessage.category.delete")}));U(),Y&&(g?.(),await q(O),await et(!0),m?.(),await de())}catch(O){console.error({err:O}),p({type:"warning",message:{id:"notification.error"}})}finally{m?.()}},Nt=async()=>{try{const y=`/${b.p}/${L}/${me}`,O=D(c,[Pe,"isTemporary"],!1),Y=window.confirm(Z({id:d(`popUpWarning.bodyMessage.${oe?"contentType":"component"}.delete`)}));if(U(),Y){if(O){a({type:b.D});return}g?.(),await q(y),await et(!0),await m?.(),await de()}}catch(y){console.error({err:y}),p({type:"warning",message:{id:"notification.error"}})}finally{m?.()}},fe=async(y,O)=>{try{const Y=`/${b.p}/component-categories/${y}`;U(),g?.(),await V(Y,O),await et(!0),await m?.(),await de()}catch(Y){console.error({err:Y}),p({type:"warning",message:{id:"notification.error"}})}finally{m?.()}},Lt=()=>{const y=Object.assign({},s,c.components);if(!oe){const Y=D(c,"component",{});Xt(y,D(Y,["uid"],""),Y)}const O=Gi(y);return(0,b.q)(O)},It=()=>{const y=Tn(s),O=Tn(c.components||{});return(0,b.q)([...O,...y])},Et=(y,O)=>{a({type:b.v,dzName:y,componentToRemoveIndex:O})},ct=()=>{const O=D(oe?i:s,me??"",{schema:{attributes:[]}}),Y=(0,b.s)(O.schema.attributes,s),re=Vi(O,Y,s,oe),he=D(O,"isTemporary",!1)&&Lo(D(O,"schema.attributes",[]))===0;a({type:b.t,schemaToSet:re,hasJustCreatedSchema:he})},ze=(0,f.useMemo)(()=>{const y=oe?i:s;return me==="create-content-type"?!1:!Object.keys(y).includes(me||"")&&!o},[s,i,me,oe,o]),tt=(0,f.useMemo)(()=>{const y=Object.keys(i).filter(O=>D(i,[O,"schema","visible"],!0)).sort();return D(y,"0","create-content-type")},[i]);if(ze)return(0,t.jsx)(Te.rd,{to:`/plugins/${b.p}/content-types/${tt}`});const Be=async y=>{try{const O=D(c,[Pe,"isTemporary"],!1),Y={components:zi(c.components,s,me)};if(oe){const Ie=(C?.apis?.forms).mutateContentTypeSchema({...vn(c.contentType),...y},r.contentType);if(!Xi(Ie)){p({type:"warning",message:{id:d("notification.error.dynamiczone-min.validation"),defaultMessage:"At least one component is required in a dynamic zone to be able to save a content type"}});return}Y.contentType=Ie,T("willSaveContentType")}else Y.component=vn(c.component,!0),T("willSaveComponent");g?.();const re=`/${b.p}/${L}`,he=O?re:`${re}/${me}`;if(O?await ve(he,Y):await V(he,Y),await et(!0),m?.(),O&&(r.contentType?.schema.kind==="collectionType"||r.contentType?.schema.kind==="singleType")&&$("contentTypeBuilder.success"),oe){T("didSaveContentType");const Le=D(Y,["contentType","schema","name"],""),Ie=D(r,["contentType","schema","name"],"");!O&&Le!==Ie&&T("didEditNameOfContentType")}else T("didSaveComponent");await Q.current(),a({type:b.U}),await de()}catch(O){oe||T("didNotSaveComponent"),console.error({err:O.response}),p({type:"warning",message:{id:"notification.error"}})}finally{m?.()}},de=async()=>{await E()},nt=(y,O,Y)=>{a({type:b.w,data:y,schemaType:O,uid:Y})};return(0,t.jsx)(tn.Provider,{value:{addAttribute:Mt,addCustomFieldAttribute:we,addCreatedComponentToDynamicZone:Ke,allComponentsCategories:Ki(s,["category"]),changeDynamicZoneComponents:dt,components:s,componentsGroupedByCategory:No(s,"category"),componentsThatHaveOtherComponentInTheirAttributes:Lt(),contentTypes:i,createSchema:jt,deleteCategory:Ft,deleteData:Nt,editCategory:fe,editCustomFieldAttribute:We,isInDevelopmentMode:ge,initialData:r,isInContentTypeView:oe,modifiedData:c,nestedComponents:It(),removeAttribute:St,removeComponentFromDynamicZone:Et,reservedNames:u,setModifiedData:ct,sortedContentTypesList:Zi(i),submitData:Be,updateSchema:nt},children:l?(0,t.jsx)(N.Bl,{}):(0,t.jsxs)(t.Fragment,{children:[e,ge&&(0,t.jsx)(Pi,{})]})})},qi=(0,f.memo)(Ji),jn={actionType:null,attributeName:null,attributeType:null,categoryName:null,dynamicZoneTarget:null,forTarget:null,modalType:null,isOpen:!1,showBackLink:!1,kind:null,step:null,targetUid:null,customFieldUid:null},_i=({children:e})=>{const[a,s]=f.useState(jn),{trackUsage:i}=(0,N.z1)(),o=({attributeType:T,customFieldUid:E})=>{s(k=>({...k,actionType:"create",modalType:"customField",attributeType:T,customFieldUid:E}))},l=({attributeType:T,step:E})=>{a.forTarget==="contentType"&&i("didSelectContentTypeFieldType",{type:T}),s(k=>({...k,actionType:"create",modalType:"attribute",step:E,attributeType:T,showBackLink:!0}))},r=({dynamicZoneTarget:T,targetUid:E})=>{s(k=>({...k,dynamicZoneTarget:T,targetUid:E,modalType:"addComponentToDynamicZone",forTarget:"contentType",step:"1",actionType:"edit",isOpen:!0}))},c=({forTarget:T,targetUid:E})=>{s(k=>({...k,actionType:"create",forTarget:T,targetUid:E,modalType:"chooseAttribute",isOpen:!0,showBackLink:!1}))},u=T=>{s(E=>({...E,...T,isOpen:!0}))},p=T=>{s(E=>({...E,categoryName:T,actionType:"edit",modalType:"editCategory",isOpen:!0}))},g=({forTarget:T,targetUid:E,attributeName:k,attributeType:U,customFieldUid:J})=>{s(ue=>({...ue,modalType:"customField",customFieldUid:J,actionType:"edit",forTarget:T,targetUid:E,attributeName:k,attributeType:U,isOpen:!0}))},m=({forTarget:T,targetUid:E,attributeName:k,attributeType:U,step:J})=>{s(ue=>({...ue,modalType:"attribute",actionType:"edit",forTarget:T,targetUid:E,attributeName:k,attributeType:U,step:J,isOpen:!0}))},$=({modalType:T,forTarget:E,targetUid:k,kind:U})=>{s(J=>({...J,modalType:T,actionType:"edit",forTarget:E,targetUid:k,kind:U,isOpen:!0}))},F=()=>{s(jn)},C=({forTarget:T,targetUid:E})=>{s(k=>({...k,forTarget:T,targetUid:E,modalType:"chooseAttribute"}))},S=()=>{s(T=>({...T,attributeType:"component",modalType:"attribute",step:"2"}))},Z=({dynamicZoneTarget:T})=>{s(E=>({...E,dynamicZoneTarget:T,modalType:"addComponentToDynamicZone",actionType:"create",step:"1",attributeType:null,attributeName:null}))};return(0,t.jsx)(nn.Provider,{value:{...a,onClickSelectField:l,onClickSelectCustomField:o,onCloseModal:F,onNavigateToChooseAttributeModal:C,onNavigateToAddCompoToDZModal:Z,onOpenModalAddComponentsToDZ:r,onNavigateToCreateComponentStep2:S,onOpenModalAddField:c,onOpenModalCreateSchema:u,onOpenModalEditCategory:p,onOpenModalEditField:m,onOpenModalEditCustomField:g,onOpenModalEditSchema:$,setFormModalNavigationState:s},children:e})},er=(0,f.lazy)(()=>n.e(7508).then(n.bind(n,7508))),tr=()=>{const{url:e}=(0,Te.W5)();return(0,t.jsx)(f.Suspense,{fallback:(0,t.jsx)(N.Bl,{}),children:(0,t.jsx)(Te.dO,{children:(0,t.jsx)(Te.qh,{path:`${e}/:componentUid`,children:(0,t.jsx)(er,{})})})})},Sn=(0,f.lazy)(()=>n.e(7508).then(n.bind(n,7508))),nr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{formatMessage:e}=(0,w.A)(),a=e({id:`${b.p}.plugin.name`,defaultMessage:"Content Types Builder"}),{startSection:s}=(0,N.Cx)(),i=(0,f.useRef)(s);return(0,f.useEffect)(()=>{i.current&&i.current("contentTypeBuilder")},[]),(0,t.jsxs)(N.kz,{permissions:b.P.main,children:[(0,t.jsx)(Hn.m,{title:a}),(0,t.jsx)(_i,{children:(0,t.jsx)(qi,{children:(0,t.jsx)(Gn.P,{sideNav:(0,t.jsx)(Bo,{}),children:(0,t.jsx)(f.Suspense,{fallback:(0,t.jsx)(N.Bl,{}),children:(0,t.jsxs)(Te.dO,{children:[(0,t.jsx)(Te.qh,{path:`/plugins/${b.p}/content-types/create-content-type`,component:Sn}),(0,t.jsx)(Te.qh,{path:`/plugins/${b.p}/content-types/:uid`,component:Sn}),(0,t.jsx)(Te.qh,{path:`/plugins/${b.p}/component-categories/:categoryUid`,component:tr})]})})})})})]})}},Symbol.toStringTag,{value:"Module"}))}}]);
