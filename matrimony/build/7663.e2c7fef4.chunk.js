(self.webpackChunkmatrimony=self.webpackChunkmatrimony||[]).push([[7663],{94445:U=>{function Q(a,t,f,v){for(var P=-1,D=a==null?0:a.length;++P<D;){var k=a[P];t(v,k,f(k),a)}return v}U.exports=Q},33999:(U,Q,a)=>{var t=a(32193),f=t("length");U.exports=f},7233:(U,Q,a)=>{var t=a(97449);function f(v,P,D,k){return t(v,function(x,I,G){P(k,x,D(x),G)}),k}U.exports=f},97449:(U,Q,a)=>{var t=a(85373),f=a(75821),v=f(t);U.exports=v},41225:(U,Q,a)=>{var t=a(81204),f=a(51646),v="[object RegExp]";function P(D){return f(D)&&t(D)==v}U.exports=P},29884:(U,Q,a)=>{var t=a(97449),f=a(91522);function v(P,D){var k=-1,x=f(P)?Array(P.length):[];return t(P,function(I,G,X){x[++k]=D(I,G,X)}),x}U.exports=v},4191:(U,Q,a)=>{var t=a(87864),f=a(86386),v=a(45353),P=a(29884),D=a(74565),k=a(52689),x=a(48126),I=a(82388),G=a(82261);function X(_,ae,Oe){ae.length?ae=t(ae,function(te){return G(te)?function(se){return f(se,te.length===1?te[0]:te)}:te}):ae=[I];var le=-1;ae=t(ae,k(v));var re=P(_,function(te,se,ne){var Ne=t(ae,function(Fe){return Fe(te)});return{criteria:Ne,index:++le,value:te}});return D(re,function(te,se){return x(te,se,Oe)})}U.exports=X},74565:U=>{function Q(a,t){var f=a.length;for(a.sort(t);f--;)a[f]=a[f].value;return a}U.exports=Q},64958:(U,Q,a)=>{var t=a(91662);function f(v,P){if(v!==P){var D=v!==void 0,k=v===null,x=v===v,I=t(v),G=P!==void 0,X=P===null,_=P===P,ae=t(P);if(!X&&!ae&&!I&&v>P||I&&G&&_&&!X&&!ae||k&&G&&_||!D&&_||!x)return 1;if(!k&&!I&&!ae&&v<P||ae&&D&&x&&!k&&!I||X&&D&&x||!G&&x||!_)return-1}return 0}U.exports=f},48126:(U,Q,a)=>{var t=a(64958);function f(v,P,D){for(var k=-1,x=v.criteria,I=P.criteria,G=x.length,X=D.length;++k<G;){var _=t(x[k],I[k]);if(_){if(k>=X)return _;var ae=D[k];return _*(ae=="desc"?-1:1)}}return v.index-P.index}U.exports=f},88532:(U,Q,a)=>{var t=a(94445),f=a(7233),v=a(45353),P=a(82261);function D(k,x){return function(I,G){var X=P(I)?t:f,_=x?x():{};return X(I,k,v(G,2),_)}}U.exports=D},75821:(U,Q,a)=>{var t=a(91522);function f(v,P){return function(D,k){if(D==null)return D;if(!t(D))return v(D,k);for(var x=D.length,I=P?x:-1,G=Object(D);(P?I--:++I<x)&&k(G[I],I,G)!==!1;);return D}}U.exports=f},49605:(U,Q,a)=>{var t=a(33999),f=a(20598),v=a(71387);function P(D){return f(D)?v(D):t(D)}U.exports=P},71387:U=>{var Q="\\ud800-\\udfff",a="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",f="\\u20d0-\\u20ff",v=a+t+f,P="\\ufe0e\\ufe0f",D="["+Q+"]",k="["+v+"]",x="\\ud83c[\\udffb-\\udfff]",I="(?:"+k+"|"+x+")",G="[^"+Q+"]",X="(?:\\ud83c[\\udde6-\\uddff]){2}",_="[\\ud800-\\udbff][\\udc00-\\udfff]",ae="\\u200d",Oe=I+"?",le="["+P+"]?",re="(?:"+ae+"(?:"+[G,X,_].join("|")+")"+le+Oe+")*",te=le+Oe+re,se="(?:"+[G+k+"?",k,X,_,D].join("|")+")",ne=RegExp(x+"(?="+x+")|"+se+te,"g");function Ne(Fe){for(var pe=ne.lastIndex=0;ne.test(Fe);)++pe;return pe}U.exports=Ne},94710:(U,Q,a)=>{var t=a(95292),f=a(88532),v=Object.prototype,P=v.hasOwnProperty,D=f(function(k,x,I){P.call(k,I)?k[I].push(x):t(k,I,[x])});U.exports=D},22171:(U,Q,a)=>{var t=a(41225),f=a(52689),v=a(54765),P=v&&v.isRegExp,D=P?f(P):t;U.exports=D},34827:(U,Q,a)=>{var t=a(81204),f=a(82261),v=a(51646),P="[object String]";function D(k){return typeof k=="string"||!f(k)&&v(k)&&t(k)==P}U.exports=D},14311:(U,Q,a)=>{var t=a(32628),f=a(50633),v=a(91522),P=a(34827),D=a(49605),k="[object Map]",x="[object Set]";function I(G){if(G==null)return 0;if(v(G))return P(G)?D(G):G.length;var X=f(G);return X==k||X==x?G.size:t(G).length}U.exports=I},45635:(U,Q,a)=>{var t=a(87212),f=a(4191),v=a(39226),P=a(3956),D=v(function(k,x){if(k==null)return[];var I=x.length;return I>1&&P(k,x[0],x[1])?x=[]:I>2&&P(x[0],x[1],x[2])&&(x=[x[0]]),f(k,t(x,1),[])});U.exports=D},89102:(U,Q,a)=>{var t=a(85306);function f(v){return t(v).toLowerCase()}U.exports=f},35336:(U,Q,a)=>{var t=a(8928),f=a(88974),v=a(20598),P=a(57505),D=a(22171),k=a(49605),x=a(30660),I=a(88765),G=a(85306),X=30,_="...",ae=/\w*$/;function Oe(le,re){var te=X,se=_;if(P(re)){var ne="separator"in re?re.separator:ne;te="length"in re?I(re.length):te,se="omission"in re?t(re.omission):se}le=G(le);var Ne=le.length;if(v(le)){var Fe=x(le);Ne=Fe.length}if(te>=Ne)return le;var pe=te-k(se);if(pe<1)return se;var xe=Fe?f(Fe,0,pe).join(""):le.slice(0,pe);if(ne===void 0)return xe+se;if(Fe&&(pe+=xe.length-pe),D(ne)){if(le.slice(pe).search(ne)){var at,ee=xe;for(ne.global||(ne=RegExp(ne.source,G(ae.exec(ne))+"g")),ne.lastIndex=0;at=ne.exec(ee);)var Xe=at.index;xe=xe.slice(0,Xe===void 0?pe:Xe)}}else if(le.indexOf(t(ne),pe)!=pe){var st=xe.lastIndexOf(ne);st>-1&&(xe=xe.slice(0,st))}return xe+se}U.exports=Oe},71547:(U,Q,a)=>{var t=a(19913);function f(v){return v&&v.length?t(v):[]}U.exports=f},27663:(U,Q,a)=>{"use strict";a.r(Q),a.d(Q,{A:()=>qe,C:()=>ht,a:()=>Ze,g:()=>d,i:()=>ni,u:()=>De});var t=a(92132),f=a(21272),v=a(94061),P=a(18629),D=a(58805),k=a(76079),x=a(83997),I=a(85829),G=a(94293),X=a(90151),_=a(68074),ae=a(25815),Oe=a(6239),le=a(12081),re=a(12408),te=a(48653),se=a(24093),ne=a(43739),Ne=a(95336),Fe=a(78732),pe=a(4181),xe=a(7537),at=a(73989),ee=a(85963),Xe=a(99248),st=a(7153),Dn=a(8361),Pn=a(98765),kn=a(74447),Bn=a(7297),Rt=a(88353),Un=a(79739),zn=a(76517),Wn=a(80782),Vn=a(5287),Gn=a(61485),Yn=a(67030),Zn=a(42455),S=a(89167),Hn=a(14718),H=a(54894),Dt=a(71389),Te=a(17703),Kn=a(41156),Qn=a(87675),Jn=a(29404),Xn=a(87419),wn=a(9005),Me=a(63891),qn=a(84175);const _n=(0,Me.default)(v.a)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
    }
  }
`,ea=Me.default.button`
  border: none;
  padding: 0;
  background: transparent;
  display: flex;
  align-items: center;
`,ta=Me.default.div`
  display: flex;
  align-items: center;
  width: ${12/16}rem;
  transform: rotateX(${({rotated:e})=>e?"0deg":"180deg"});
`,na=({label:e,children:n,id:s})=>{const[r,o]=(0,f.useState)(!0),l=(0,qn.B)(s),i=()=>{o(c=>!c)};return(0,t.jsxs)(v.a,{children:[(0,t.jsx)(_n,{paddingLeft:7,paddingTop:2,paddingBottom:2,paddingRight:4,children:(0,t.jsx)(x.s,{justifyContent:"space-between",children:(0,t.jsxs)(ea,{onClick:i,"aria-expanded":r,"aria-controls":l,children:[(0,t.jsx)(ta,{rotated:r,children:(0,t.jsx)(wn.A,{"aria-hidden":!0})}),(0,t.jsx)(v.a,{paddingLeft:2,children:(0,t.jsx)(I.o,{as:"span",fontWeight:"semiBold",textColor:"neutral800",children:e})})]})})}),r&&(0,t.jsx)("ul",{id:l,children:f.Children.map(n,(c,u)=>(0,t.jsx)("li",{children:c},u))})]})};var Pt=a(63996),kt=a(21610),aa=a(37679),sa=a(60043),ot=a(44876),oa=a(58215),ra=a(66322),ia=a(9032),la=a(51505),Bt=a(46270),da=a(72417),ca=a(42798),ua=a(22405),ma=a(26865),pa=a(74091),ga=a(54429),fa=a(69542),ha=a(12602),ya=a(60426),va=a(96584),xa=a(34280),ba=a(63679),Ca=a(38864),Aa=a(12430),Ta=a(10908),Ma=a(54514),ja=a(14448),Sa=a(64169),Na=a(54245),Fa=a(20415),La=a(60623),Ia=a(26665),Ea=a(89315),$a=a(18536),Oa=a(81355),Ra=a(27421),Da=a(69646),Pa=a(31084),ka=a(99334),Ba=a(37901),Ua=a(69512),za=a(19443),Wa=a(59598),Va=a(27249),Ga=a(23646),Ya=a(34313),Za=a(28442),Ha=a(86986),Ka=a(83925),Qa=a(64199),Ja=a(4992),Xa=a(85914),wa=a(25614),qa=a(28604),_a=a(17470),es=a(83060),ts=a(32816),ns=a(49389),as=a(60362),ss=a(82151),os=a(51346),rs=a(87868),is=a(38934),ls=a(39238),ds=a(52512),cs=a(87578),us=a(2919),ms=a(64213),ps=a(77701),gs=a(43896),fs=a(93659),hs=a(28826),ys=a(41231),vs=a(3851),Ut=a(57549),zt=a(47684),Wt=a(39783),xs=a(1423),bs=a(39527),Cs=a(82813),As=a(71656),Ts=a(65841),Ms=a(23483),Vt=a(78580),Gt=a(82431),Yt=a(30899),js=a(47926),Ss=a(54678),Ns=a(64486),Fs=a(41909),Ls=a(77902),Is=a(95628),Es=a(20055),$s=a(4487),Os=a(89292),Rs=a(98052),Be=a(5194),Ds=a(13955),Ps=a(38910),ks=a(57574),Bs=a(97358),Us=a(84447),zs=a(84823),Ws=a(25490),Vs=a(19143),Gs=a(63931),Zt=a(60678),Ys=a(46469),Zs=a(15363),Hs=a(61377),Ks=a(90682),Qs=a(21396),Js=a(44862),Xs=a(84114),ws=a(42386),qs=a(50929),_s=a(58971),eo=a(24408),to=a(18762),no=a(25262),ao=a(53485),so=a(87348),oo=a(5503),ro=a(22353),io=a(20126),lo=a(11171),co=a(6499),uo=a(94959),mo=a(76721),po=a(80906),go=a(29047),we=a(57009),fo=a(60600),ho=a(71982),Ht=a(93870),yo=a(21639),rt=a(52078),vo=a(98659),xo=a(19170),Kt=a(49167),ut=a(5046),Qt=a(52076),bo=a(1409),Co=a(91086),Ao=a(76613),To=a(56246),Jt=a(45559),Mo=a(75652),jo=a(81245),So=a(36481),No=a(50612),Re=a(39404),b=a(93201),mt=a(56336),O=a(2600),Fo=a(94710),Xt=a(48940),Lo=a(14311),Ye=a(82437),Io=a(412),wt=a(89102),Eo=a(5409),it=a(21835),qt=a(35336),$o=a(71547),A=a(12083),Oo=a(17024),Y=a(58692),pt=a(71210),_t=a(70653),Ro=a(5790),en=a(35223),Do=a(45635);const d=e=>`${b.p}.${e}`,tn=(0,f.createContext)(),De=()=>(0,f.useContext)(tn),nn=f.createContext(),Ze=()=>(0,f.useContext)(nn),Po=()=>{const{components:e,componentsGroupedByCategory:n,contentTypes:s,isInDevelopmentMode:r,sortedContentTypesList:o,modifiedData:l,initialData:i}=De(),c=(0,S.useNotification)(),{trackUsage:u}=(0,S.useTracking)(),[p,g]=(0,f.useState)(""),{onOpenModalCreateSchema:m,onOpenModalEditCategory:$}=Ze(),{locale:j}=(0,H.A)(),{startsWith:C}=(0,S.useFilter)(j,{sensitivity:"base"}),M=(0,S.useCollator)(j,{sensitivity:"base"}),z=!Object.keys(s).some(W=>s[W].isTemporary===!0)&&!Object.keys(e).some(W=>e[W].isTemporary===!0)&&mt(l,i),T=()=>{z?(u("willCreateContentType"),m({modalType:"contentType",kind:"collectionType",actionType:"create",forTarget:"contentType"})):B()},L=()=>{z?(u("willCreateSingleType"),m({modalType:"contentType",kind:"singleType",actionType:"create",forTarget:"contentType"})):B()},R=()=>{z?(u("willCreateComponent"),m({modalType:"component",kind:null,actionType:"create",forTarget:"component"})):B()},B=()=>{c({type:"info",message:{id:d("notification.info.creating.notSaved"),defaultMessage:"Please save your work before creating a new collection type or component"}})},w=Object.entries(n).map(([W,ve])=>({name:W,title:W,isEditable:r,onClickEdit(q,Ce){q.stopPropagation(),z?$(Ce.name):B()},links:ve.map(q=>({name:q.uid,to:`/plugins/${b.p}/component-categories/${W}/${q.uid}`,title:q.schema.displayName})).sort((q,Ce)=>M.compare(q.title,Ce.title))})).sort((W,ve)=>M.compare(W.title,ve.title)),ue=o.filter(W=>W.visible);return{menu:[{name:"models",title:{id:`${d("menu.section.models.name")}`,defaultMessage:"Collection Types"},customLink:r&&{id:`${d("button.model.create")}`,defaultMessage:"Create new collection type",onClick:T},links:ue.filter(W=>W.kind==="collectionType")},{name:"singleTypes",title:{id:`${d("menu.section.single-types.name")}`,defaultMessage:"Single Types"},customLink:r&&{id:`${d("button.single-types.create")}`,defaultMessage:"Create new single type",onClick:L},links:ue.filter(W=>W.kind==="singleType")},{name:"components",title:{id:`${d("menu.section.components.name")}`,defaultMessage:"Components"},customLink:r&&{id:`${d("button.component.create")}`,defaultMessage:"Create a new component",onClick:R},links:w}].map(W=>W.links.some(q=>Array.isArray(q.links))?{...W,links:W.links.map(q=>{const Ce=q.links.filter(ge=>C(ge.title,p));return Ce.length===0?null:{...q,links:Ce.sort((ge,oe)=>M.compare(ge.title,oe.title))}}).filter(Boolean)}:{...W,links:W.links.filter(q=>C(q.title,p)).sort((q,Ce)=>M.compare(q.title,Ce.title))}),searchValue:p,onSearchChange:g}},ko=()=>{const{menu:e,searchValue:n,onSearchChange:s}=Po(),{formatMessage:r}=(0,H.A)();return(0,t.jsxs)(Kn.C,{ariaLabel:r({id:`${d("plugin.name")}`,defaultMessage:"Content-Types Builder"}),children:[(0,t.jsx)(Qn.X,{searchable:!0,value:n,onClear:()=>s(""),onChange:o=>s(o.target.value),label:r({id:`${d("plugin.name")}`,defaultMessage:"Content-Types Builder"}),searchLabel:r({id:"global.search",defaultMessage:"Search"})}),(0,t.jsx)(Jn.w,{children:e.map(o=>(0,t.jsxs)(f.Fragment,{children:[(0,t.jsx)(Xn.L,{label:r({id:o.title.id,defaultMessage:o.title.defaultMessage}),collapsable:!0,badgeLabel:o.links.length.toString(),children:o.links.map(l=>l.links?(0,t.jsx)(na,{label:Re(l.title),children:l.links.map(i=>(0,t.jsx)(Pt.u,{as:Dt.NavLink,to:i.to,active:i.active,isSubSectionChild:!0,children:Re(r({id:i.name,defaultMessage:i.title}))},i.name))},l.name):(0,t.jsx)(Pt.u,{as:Dt.NavLink,to:l.to,active:l.active,children:Re(r({id:l.name,defaultMessage:l.title}))},l.name))}),o.customLink&&(0,t.jsx)(v.a,{paddingLeft:7,children:(0,t.jsx)(P.Q,{onClick:o.customLink.onClick,startIcon:(0,t.jsx)(D.I,{as:Be.A,width:(0,S.pxToRem)(8),height:(0,S.pxToRem)(8)}),marginTop:2,children:r({id:o.customLink.id,defaultMessage:o.customLink.defaultMessage})})})]},o.name))})]})},an=e=>e.kind==="collectionType"&&(e.restrictRelationsTo===null||Array.isArray(e.restrictRelationsTo)&&e.restrictRelationsTo.length>0),gt=(e,n)=>e.find(({name:s})=>s===n),Bo=[{label:"All",children:[{label:"images (JPEG, PNG, GIF, SVG, TIFF, ICO, DVU)",value:"images"},{label:"videos (MPEG, MP4, Quicktime, WMV, AVI, FLV)",value:"videos"},{label:"audios (MP3, WAV, OGG)",value:"audios"},{label:"files (CSV, ZIP, PDF, Excel, JSON, ...)",value:"files"}]}],Uo=({intlLabel:e,name:n,onChange:s,value:r=null})=>{const{formatMessage:o}=(0,H.A)(),l=r===null||r?.length===0?o({id:"global.none",defaultMessage:"None"}):[...r].sort().map(c=>Re(c)).join(", "),i=e.id?o({id:e.id,defaultMessage:e.defaultMessage}):n;return(0,t.jsx)(k.B,{id:"select1",label:i,customizeContent:()=>l,onChange:c=>{c.length>0?s({target:{name:n,value:c,type:"allowed-types-select"}}):s({target:{name:n,value:null,type:"allowed-types-select"}})},options:Bo,value:r||[]})},sn={biginteger:we.A,blocks:fo.A,boolean:ho.A,collectionType:Ht.A,component:yo.A,contentType:Ht.A,date:rt.A,datetime:rt.A,decimal:we.A,dynamiczone:vo.A,email:xo.A,enum:Kt.A,enumeration:Kt.A,file:ut.A,files:ut.A,float:we.A,integer:we.A,json:Qt.A,JSON:Qt.A,media:ut.A,number:we.A,password:bo.A,relation:Co.A,richtext:Ao.A,singleType:To.A,string:Jt.A,text:Jt.A,time:rt.A,timestamp:rt.A,uid:Mo.A},zo=(0,Me.default)(v.a)`
  svg {
    height: 100%;
    width: 100%;
  }
`,qe=({type:e,customField:n=null,...s})=>{const r=(0,S.useCustomFields)();let o=sn[e];if(n){const i=r.get(n)?.icon;i&&(o=i)}return sn[e]?(0,t.jsx)(zo,{height:(0,S.pxToRem)(24),width:(0,S.pxToRem)(32),shrink:0,...s,"aria-hidden":!0,children:(0,t.jsx)(v.a,{as:o})}):null},on=(0,Me.default)(v.a)`
  width: 100%;
  height: 100%;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  text-align: left;
  &:hover {
    background: ${({theme:e})=>e.colors.primary100};
    border: 1px solid ${({theme:e})=>e.colors.primary200};
  }
`,Wo=[],Vo=()=>(0,t.jsx)(x.s,{grow:1,justifyContent:"flex-end",children:(0,t.jsxs)(x.s,{gap:1,hasRadius:!0,background:"alternative100",padding:`${2/16}rem ${4/16}rem`,children:[(0,t.jsx)(D.I,{width:`${10/16}rem`,height:`${10/16}rem`,as:jo.A,color:"alternative600"}),(0,t.jsx)(I.o,{textColor:"alternative600",variant:"sigma",children:"New"})]})}),Go=({type:e="text"})=>{const{formatMessage:n}=(0,H.A)(),{onClickSelectField:s}=Ze(),r=()=>{s({attributeType:e,step:e==="component"?"1":null})};return(0,t.jsx)(on,{padding:4,as:"button",hasRadius:!0,type:"button",onClick:r,children:(0,t.jsxs)(x.s,{children:[(0,t.jsx)(qe,{type:e}),(0,t.jsxs)(v.a,{paddingLeft:4,width:"100%",children:[(0,t.jsxs)(x.s,{justifyContent:"space-between",children:[(0,t.jsx)(I.o,{fontWeight:"bold",children:n({id:d(`attribute.${e}`),defaultMessage:e})}),Wo.includes(e)&&(0,t.jsx)(Vo,{})]}),(0,t.jsx)(x.s,{children:(0,t.jsx)(I.o,{variant:"pi",textColor:"neutral600",children:n({id:d(`attribute.${e}.description`),defaultMessage:"A type for modeling data"})})})]})]})})},Yo=({attributes:e})=>(0,t.jsx)(G.r,{tagName:"button",children:(0,t.jsx)(x.s,{direction:"column",alignItems:"stretch",gap:8,children:e.map((n,s)=>(0,t.jsx)(X.x,{gap:3,children:n.map(r=>(0,t.jsx)(_.E,{col:6,children:(0,t.jsx)(Go,{type:r})},r))},s))})}),Zo=({customFieldUid:e,customField:n})=>{const{type:s,intlLabel:r,intlDescription:o}=n,{formatMessage:l}=(0,H.A)(),{onClickSelectCustomField:i}=Ze(),c=()=>{i({attributeType:s,customFieldUid:e})};return(0,t.jsx)(on,{padding:4,as:"button",hasRadius:!0,type:"button",onClick:c,children:(0,t.jsxs)(x.s,{children:[(0,t.jsx)(qe,{type:s,customField:e}),(0,t.jsxs)(v.a,{paddingLeft:4,children:[(0,t.jsx)(x.s,{children:(0,t.jsx)(I.o,{fontWeight:"bold",children:l(r)})}),(0,t.jsx)(x.s,{children:(0,t.jsx)(I.o,{variant:"pi",textColor:"neutral600",children:l(o)})})]})]})})},Ho=(0,Me.default)(v.a)`
  background: ${({theme:e})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${e.colors.neutral150} 100%)`};
  opacity: 0.33;
`,Ko=()=>(0,t.jsx)(x.s,{wrap:"wrap",gap:4,children:[...Array(4)].map((e,n)=>(0,t.jsx)(Ho,{height:"138px",width:"375px",hasRadius:!0},`empty-card-${n}`))}),Qo=()=>{const{formatMessage:e}=(0,H.A)();return(0,t.jsxs)(v.a,{position:"relative",children:[(0,t.jsx)(Ko,{}),(0,t.jsx)(v.a,{position:"absolute",top:6,width:"100%",children:(0,t.jsxs)(x.s,{alignItems:"center",justifyContent:"center",direction:"column",children:[(0,t.jsx)(D.I,{as:So.A,color:"",width:"160px",height:"88px"}),(0,t.jsx)(v.a,{paddingTop:6,paddingBottom:4,children:(0,t.jsxs)(v.a,{textAlign:"center",children:[(0,t.jsx)(I.o,{variant:"delta",as:"p",textColor:"neutral600",children:e({id:d("modalForm.empty.heading"),defaultMessage:"Nothing in here yet."})}),(0,t.jsx)(v.a,{paddingTop:4,children:(0,t.jsx)(I.o,{variant:"delta",as:"p",textColor:"neutral600",children:e({id:d("modalForm.empty.sub-heading"),defaultMessage:"Find what you are looking for through a wide range of extensions."})})})]})}),(0,t.jsx)(ae.z,{to:`/marketplace?${Eo.stringify({categories:["Custom fields"]})}`,variant:"secondary",startIcon:(0,t.jsx)(Be.A,{}),children:e({id:d("modalForm.empty.button"),defaultMessage:"Add custom fields"})})]})})]})},Jo=()=>{const{formatMessage:e}=(0,H.A)(),n=(0,S.useCustomFields)(),s=Object.entries(n.getAll());if(!s.length)return(0,t.jsx)(Qo,{});const r=s.sort((o,l)=>o[1].name>l[1].name?1:-1);return(0,t.jsx)(G.r,{tagName:"button",children:(0,t.jsxs)(x.s,{direction:"column",alignItems:"stretch",gap:3,children:[(0,t.jsx)(X.x,{gap:3,children:r.map(([o,l])=>(0,t.jsx)(_.E,{col:6,children:(0,t.jsx)(Zo,{customFieldUid:o,customField:l},o)},o))}),(0,t.jsx)(kt.N,{href:"https://docs.strapi.io/developer-docs/latest/development/custom-fields.html",isExternal:!0,children:e({id:d("modalForm.tabs.custom.howToLink"),defaultMessage:"How to add custom fields"})})]})})},Xo=({attributes:e,forTarget:n,kind:s})=>{const{formatMessage:r}=(0,H.A)(),o=d("modalForm.tabs.default"),l=d("modalForm.tabs.custom"),i=n.includes("component")?"component":s,c=d(`modalForm.sub-header.chooseAttribute.${i}`);return(0,t.jsx)(Oe.c,{padding:7,children:(0,t.jsxs)(le.f,{label:r({id:d("modalForm.tabs.label"),defaultMessage:"Default and Custom types tabs"}),id:"attribute-type-tabs",variant:"simple",children:[(0,t.jsxs)(x.s,{justifyContent:"space-between",children:[(0,t.jsx)(I.o,{variant:"beta",as:"h2",children:r({id:c,defaultMessage:"Select a field"})}),(0,t.jsxs)(re.t,{children:[(0,t.jsx)(re.o,{children:r({id:o,defaultMessage:"Default"})}),(0,t.jsx)(re.o,{children:r({id:l,defaultMessage:"Custom"})})]})]}),(0,t.jsx)(v.a,{paddingBottom:6,children:(0,t.jsx)(te.c,{})}),(0,t.jsxs)(se.T,{children:[(0,t.jsx)(se.K,{children:(0,t.jsx)(Yo,{attributes:e})}),(0,t.jsx)(se.K,{children:(0,t.jsx)(Jo,{})})]})]})})},wo=({intlLabel:e,name:n,options:s,onChange:r,value:o=null})=>{const{formatMessage:l}=(0,H.A)(),i=e.id?l({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):n,c=u=>{let p="";u==="true"&&(p=!0),u==="false"&&(p=!1),r({target:{name:n,value:p,type:"select-default-boolean"}})};return(0,t.jsx)(ne.l,{label:i,id:n,name:n,onChange:c,value:(o===null?"":o).toString(),children:s.map(({metadatas:{intlLabel:u,disabled:p,hidden:g},key:m,value:$})=>(0,t.jsx)(Ne.c,{value:$,disabled:p,hidden:g,children:u.defaultMessage},m))})},qo=(0,Me.default)(x.s)`
  position: relative;
  align-items: stretch;

  label {
    border-radius: 4px;
    max-width: 50%;
    cursor: pointer;
    user-select: none;
    flex: 1;
    ${(0,Fe.id)()}
  }

  input {
    position: absolute;
    opacity: 0;
  }

  .option {
    height: 100%;
    border-radius: 4px;
    border: 1px solid ${({theme:e})=>e.colors.neutral200};
    will-change: transform, opacity;
    background: ${({theme:e})=>e.colors.neutral0};

    .checkmark {
      position: relative;
      display: block;
      will-change: transform;
      background: ${({theme:e})=>e.colors.neutral0};
      width: ${({theme:e})=>e.spaces[5]};
      height: ${({theme:e})=>e.spaces[5]};
      border: solid 1px ${({theme:e})=>e.colors.neutral300};
      border-radius: 50%;

      &:before,
      &:after {
        content: '';
        display: block;
        border-radius: 50%;
        width: ${({theme:e})=>e.spaces[3]};
        height: ${({theme:e})=>e.spaces[3]};
        position: absolute;
        top: 3px;
        left: 3px;
      }

      &:after {
        transform: scale(0);
        transition: inherit;
        will-change: transform;
      }
    }
  }

  .container input:checked ~ div {
    background: ${({theme:e})=>e.colors.primary100};
    ${I.o} {
      color: ${({theme:e})=>e.colors.primary600};
    }
    border: 1px solid ${({theme:e})=>e.colors.primary200};
    .checkmark {
      border: solid 1px ${({theme:e})=>e.colors.primary600};
      &::after {
        background: ${({theme:e})=>e.colors.primary600};
        transform: scale(1);
      }
    }
  }
`,ft=({intlLabel:e,name:n,onChange:s,radios:r=[],value:o})=>{const{formatMessage:l}=(0,H.A)();return(0,t.jsxs)(x.s,{direction:"column",alignItems:"stretch",gap:2,children:[(0,t.jsx)(I.o,{variant:"pi",fontWeight:"bold",textColor:"neutral800",htmlFor:n,as:"label",children:l(e)}),(0,t.jsx)(qo,{gap:4,alignItems:"stretch",children:r.map(i=>(0,t.jsxs)("label",{htmlFor:i.value.toString(),className:"container",children:[(0,t.jsx)("input",{id:i.value.toString(),name:n,className:"option-input",checked:i.value===o,value:i.value,onChange:s,type:"radio"},i.value),(0,t.jsx)(v.a,{className:"option",padding:4,children:(0,t.jsxs)(x.s,{children:[(0,t.jsx)(v.a,{paddingRight:4,children:(0,t.jsx)("span",{className:"checkmark"})}),(0,t.jsxs)(x.s,{direction:"column",alignItems:"stretch",gap:2,children:[(0,t.jsx)(I.o,{fontWeight:"bold",children:l(i.title)}),(0,t.jsx)(I.o,{variant:"pi",textColor:"neutral600",children:l(i.description)})]})]})})]},i.value))})]})},_o=({onChange:e,name:n,intlLabel:s,...r})=>{const o=l=>{const i=l.target.value!=="false";e({target:{name:n,value:i,type:"boolean-radio-group"}})};return(0,t.jsx)(ft,{...r,name:n,onChange:o,intlLabel:s})},er=({error:e,intlLabel:n,modifiedData:s,name:r,onChange:o,value:l=null})=>{const{formatMessage:i}=(0,H.A)(),[c,u]=(0,f.useState)(!!l||l===0),p=n.id?i({id:n.id,defaultMessage:n.defaultMessage},{...n.values}):r,g=s.type==="biginteger"?"text":"number",m=!s.type,$=e?i({id:e,defaultMessage:e}):"";return(0,t.jsxs)(x.s,{direction:"column",alignItems:"stretch",gap:2,children:[(0,t.jsx)(pe.S,{id:r,name:r,onValueChange:j=>{o({target:{name:r,value:j?g==="text"?"0":0:null}}),u(z=>!z)},value:c,children:p}),c&&(0,t.jsx)(v.a,{paddingLeft:6,style:{maxWidth:"200px"},children:g==="text"?(0,t.jsx)(xe.k,{label:"","aria-label":p,disabled:m,error:$,id:r,name:r,onChange:o,value:l===null?"":l}):(0,t.jsx)(at.Q,{"aria-label":p,disabled:m,error:$,id:r,name:r,onValueChange:j=>{o({target:{name:r,value:j,type:g}})},value:l||0})})]})},tr=({onChange:e,...n})=>{const s=(0,S.useNotification)(),r=o=>{s({type:"info",message:{id:d("contentType.kind.change.warning"),defaultMessage:"You just changed the kind of a content type: API will be reset (routes, controllers, and services will be overwritten)."}}),e(o)};return(0,t.jsx)(ft,{...n,onChange:r})},nr=({description:e,disabled:n=!1,intlLabel:s,isCreating:r,name:o,onChange:l,value:i=!1})=>{const{formatMessage:c}=(0,H.A)(),[u,p]=(0,f.useState)(!1),g=s.id?c({id:s.id,defaultMessage:s.defaultMessage},{...s.values}):o,m=e?c({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",$=()=>p(M=>!M),j=()=>{l({target:{name:o,value:!1}}),$()},C=({target:{checked:M}})=>{if(!M&&!r){$();return}l({target:{name:o,value:M}})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(pe.S,{checked:i,disabled:n,hint:m,name:o,onChange:C,children:g}),(0,t.jsx)(S.ConfirmDialog,{isOpen:u,onToggleDialog:$,onConfirm:j,bodyText:{id:d("popUpWarning.draft-publish.message"),defaultMessage:"If you disable the draft & publish, your drafts will be deleted."},leftButtonText:{id:"components.popUpWarning.button.cancel",defaultMessage:"No, cancel"},rightButtonText:{id:d("popUpWarning.draft-publish.button.confirm"),defaultMessage:"Yes, disable"}})]})},ar=({categoryName:e,deleteCategory:n,deleteComponent:s,deleteContentType:r,isAttributeModal:o,isCustomFieldModal:l,isComponentAttribute:i,isComponentToDzModal:c,isContentTypeModal:u,isCreatingComponent:p,isCreatingComponentAttribute:g,isCreatingComponentInDz:m,isCreatingComponentWhileAddingAField:$,isCreatingContentType:j,isCreatingDz:C,isComponentModal:M,isDzAttribute:z,isEditingAttribute:T,isEditingCategory:L,isInFirstComponentStep:R,onSubmitAddComponentAttribute:B,onSubmitAddComponentToDz:w,onSubmitCreateContentType:ue,onSubmitCreateComponent:be,onSubmitCreateDz:W,onSubmitEditAttribute:ve,onSubmitEditCategory:q,onSubmitEditComponent:Ce,onSubmitEditContentType:ge,onSubmitEditCustomFieldAttribute:oe,onSubmitEditDz:Pe,onClickFinish:me})=>{const{formatMessage:J}=(0,H.A)();return c?m?(0,t.jsx)(ee.$,{variant:"secondary",type:"submit",onClick:N=>{N.preventDefault(),w(N,!0)},startIcon:(0,t.jsx)(Be.A,{}),children:J({id:d("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"})}):(0,t.jsx)(ee.$,{variant:"default",type:"submit",onClick:N=>{N.preventDefault(),w(N,!1)},children:J({id:"global.finish",defaultMessage:"Finish"})}):o&&z&&!C?(0,t.jsx)(ee.$,{variant:"default",type:"submit",onClick:N=>{N.preventDefault(),me(),Pe(N,!1)},children:J({id:"global.finish",defaultMessage:"Finish"})}):o&&z&&C?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ee.$,{variant:"secondary",type:"submit",onClick:N=>{N.preventDefault(),W(N,!0)},startIcon:(0,t.jsx)(Be.A,{}),children:J({id:d("form.button.add-components-to-dynamiczone"),defaultMessage:"Add components to the zone"})})}):o&&i?R?(0,t.jsx)(ee.$,{variant:"secondary",type:"submit",onClick:N=>{N.preventDefault(),B(N,!0)},children:J(g?{id:d("form.button.configure-component"),defaultMessage:"Configure the component"}:{id:d("form.button.select-component"),defaultMessage:"Configure the component"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.$,{variant:"secondary",type:"submit",onClick:N=>{N.preventDefault(),B(N,!0)},startIcon:(0,t.jsx)(Be.A,{}),children:J($?{id:d("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"}:{id:d("form.button.add-field"),defaultMessage:"Add another field"})}),(0,t.jsx)(ee.$,{variant:"default",type:"button",onClick:N=>{N.preventDefault(),me(),B(N,!1)},children:J({id:"global.finish",defaultMessage:"Finish"})})]}):o&&!i&&!z?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.$,{type:T?"button":"submit",variant:"secondary",onClick:N=>{N.preventDefault(),ve(N,!0)},startIcon:(0,t.jsx)(Be.A,{}),children:J({id:d("form.button.add-field"),defaultMessage:"Add another field"})}),(0,t.jsx)(ee.$,{type:T?"submit":"button",variant:"default",onClick:N=>{N.preventDefault(),me(),ve(N,!1)},children:J({id:"global.finish",defaultMessage:"Finish"})})]}):u?(0,t.jsxs)(t.Fragment,{children:[!j&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.$,{type:"button",variant:"danger",onClick:N=>{N.preventDefault(),r()},children:J({id:"global.delete",defaultMessage:"Delete"})}),(0,t.jsx)(ee.$,{type:"submit",variant:"default",onClick:N=>{N.preventDefault(),ge(N,!1)},children:J({id:"global.finish",defaultMessage:"Finish"})})]}),j&&(0,t.jsx)(ee.$,{type:"submit",variant:"secondary",onClick:N=>{N.preventDefault(),ue(N,!0)},children:J({id:"global.continue",defaultMessage:"Continue"})})]}):M?(0,t.jsxs)(t.Fragment,{children:[!p&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.$,{type:"button",variant:"danger",onClick:N=>{N.preventDefault(),s()},children:J({id:"global.delete",defaultMessage:"Delete"})}),(0,t.jsx)(ee.$,{type:"submit",variant:"default",onClick:N=>{N.preventDefault(),Ce(N,!1)},children:J({id:"global.finish",defaultMessage:"Finish"})})]}),p&&(0,t.jsx)(ee.$,{type:"submit",variant:"secondary",onClick:N=>{N.preventDefault(),be(N,!0)},children:J({id:"global.continue",defaultMessage:"Continue"})})]}):L?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.$,{type:"button",variant:"danger",onClick:N=>{N.preventDefault(),e&&n(e)},children:J({id:"global.delete",defaultMessage:"Delete"})}),(0,t.jsx)(ee.$,{type:"submit",variant:"default",onClick:N=>{N.preventDefault(),q(N)},children:J({id:"global.finish",defaultMessage:"finish"})})]}):l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.$,{type:T?"button":"submit",variant:"secondary",onClick:N=>{N.preventDefault(),oe(N,!0)},startIcon:(0,t.jsx)(Be.A,{}),children:J({id:d("form.button.add-field"),defaultMessage:"Add another field"})}),(0,t.jsx)(ee.$,{type:T?"submit":"button",variant:"default",onClick:N=>{N.preventDefault(),me(),oe(N,!1)},children:J({id:"global.finish",defaultMessage:"Finish"})})]}):null},sr=({actionType:e=null,attributeName:n,attributeType:s,categoryName:r,contentTypeKind:o,dynamicZoneTarget:l,forTarget:i,modalType:c=null,targetUid:u,customFieldUid:p=null,showBackLink:g=!1})=>{const{formatMessage:m}=(0,H.A)(),{modifiedData:$}=De(),{onOpenModalAddField:j}=Ze();let C="component",M=[];const z=$?.[i]?.[u]||$?.[i]||null,T=z?.schema.displayName;if(c==="contentType"&&(C=o),["component","editCategory"].includes(c||"")&&(C="component"),["component","contentType"].includes(c||"")){let R=d(`modalForm.component.header-${e}`);return c==="contentType"&&(R=d(`modalForm.${o}.header-create`)),e==="edit"&&(R=d("modalForm.header-edit")),(0,t.jsx)(Xe.r,{children:(0,t.jsxs)(x.s,{children:[(0,t.jsx)(v.a,{children:(0,t.jsx)(qe,{type:C})}),(0,t.jsx)(v.a,{paddingLeft:3,children:(0,t.jsx)(I.o,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title",children:m({id:R},{name:T})})})]})})}return M=[{label:T,info:{category:z?.category||null,name:z?.schema.displayName}}],c==="chooseAttribute"&&(C=["component","components"].includes(i)?"component":z.schema.kind),c==="addComponentToDynamicZone"&&(C="dynamiczone",M.push({label:l})),(c==="attribute"||c==="customField")&&(C=s,M.push({label:n})),c==="editCategory"&&(M=[{label:m({id:d("modalForm.header.categories"),defaultMessage:"Categories"})},{label:r}]),(0,t.jsx)(Xe.r,{children:(0,t.jsxs)(x.s,{gap:3,children:[g&&(0,t.jsx)(kt.N,{"aria-label":m({id:d("modalForm.header.back"),defaultMessage:"Back"}),startIcon:(0,t.jsx)(Bt.A,{}),onClick:()=>j({forTarget:i,targetUid:u}),href:"#back",isExternal:!1}),(0,t.jsx)(qe,{type:C,customField:p}),(0,t.jsx)(aa.B,{label:M.map(({label:R})=>R).join(","),children:M.map(({label:R,info:B},w,ue)=>{if(R=Re(R),!R)return null;const be=`${R}.${w}`;return B?.category&&(R=`${R} (${Re(B.category)} - ${Re(B.name)})`),(0,t.jsx)(sa.m,{isCurrent:w===ue.length-1,children:R},be)})})]})})},or=({modalType:e,forTarget:n,kind:s,actionType:r,step:o})=>{switch(e){case"chooseAttribute":return d(`modalForm.sub-header.chooseAttribute.${n?.includes("component")?"component":s||"collectionType"}`);case"attribute":return d(`modalForm.sub-header.attribute.${r}${o!=="null"&&o!==null&&r!=="edit"?".step":""}`);case"customField":return d(`modalForm.sub-header.attribute.${r}`);case"addComponentToDynamicZone":return d("modalForm.sub-header.addComponentToDynamicZone");default:return d("configurations")}},rr=({actionType:e,modalType:n,forTarget:s,kind:r,step:o,attributeType:l,attributeName:i,customField:c})=>{const{formatMessage:u}=(0,H.A)(),p=n==="customField"?c?.intlLabel:{id:d(`attribute.${l}`)};return(0,t.jsxs)(x.s,{direction:"column",alignItems:"flex-start",paddingBottom:2,gap:1,children:[(0,t.jsx)(I.o,{as:"h2",variant:"beta",children:u({id:or({actionType:e,forTarget:s,kind:r,step:o,modalType:n}),defaultMessage:"Add new field"},{type:p?Re(u(p)):"",name:Re(i),step:o})}),(0,t.jsx)(I.o,{variant:"pi",textColor:"neutral600",children:u({id:d(`attribute.${l}.description`),defaultMessage:"A type for modeling data"})})]})},ht={alien:oa.A,apps:ra.A,archive:ia.A,arrowDown:la.A,arrowLeft:Bt.A,arrowRight:da.A,arrowUp:ca.A,attachment:ua.A,bell:ma.A,bold:pa.A,book:ga.A,briefcase:fa.A,brush:ha.A,bulletList:ya.A,calendar:va.A,car:xa.A,cast:ba.A,chartBubble:Ca.A,chartCircle:Aa.A,chartPie:Ta.A,check:Ma.A,clock:ja.A,cloud:Sa.A,code:Na.A,cog:Fa.A,collapse:La.A,command:Ia.A,connector:Ea.A,crop:$a.A,crown:Oa.A,cube:Ra.A,cup:Da.A,cursor:Pa.A,dashboard:ka.A,database:Ba.A,discuss:Ua.A,doctor:za.A,earth:Wa.A,emotionHappy:Va.A,emotionUnhappy:Ga.A,envelop:Ya.A,exit:Za.A,expand:Ha.A,eye:Ka.A,feather:Qa.A,file:Ja.A,fileError:Xa.A,filePdf:wa.A,filter:qa.A,folder:_a.A,gate:es.A,gift:ts.A,globe:ns.A,grid:as.A,handHeart:ss.A,hashtag:os.A,headphone:rs.A,heart:is.A,house:ls.A,information:ds.A,italic:cs.A,key:us.A,landscape:ms.A,layer:ps.A,layout:gs.A,lightbulb:fs.A,link:hs.A,lock:ys.A,magic:vs.A,manyToMany:Ut.A,manyToOne:zt.A,manyWays:Wt.A,medium:xs.A,message:bs.A,microphone:Cs.A,monitor:As.A,moon:Ts.A,music:Ms.A,oneToMany:Vt.A,oneToOne:Gt.A,oneWay:Yt.A,paint:js.A,paintBrush:Ss.A,paperPlane:Ns.A,pencil:Fs.A,phone:Ls.A,picture:Is.A,pin:Es.A,pinMap:$s.A,plane:Os.A,play:Rs.A,plus:Be.A,priceTag:Ds.A,puzzle:Ps.A,question:ks.A,quote:Bs.A,repeat:Us.A,restaurant:zs.A,rocket:Ws.A,rotate:Vs.A,scissors:Gs.A,search:Zt.A,seed:Ys.A,server:Zs.A,shield:Hs.A,shirt:Ks.A,shoppingCart:Qs.A,slideshow:Js.A,stack:Xs.A,star:ws.A,store:qs.A,strikeThrough:_s.A,sun:eo.A,television:to.A,thumbDown:no.A,thumbUp:ao.A,train:so.A,twitter:oo.A,typhoon:ro.A,underline:io.A,user:lo.A,volumeMute:co.A,volumeUp:uo.A,walk:mo.A,wheelchair:po.A,write:go.A},ir=(0,Me.default)(x.s)`
  label {
    ${(0,Fe.id)()}
    border-radius: ${({theme:e})=>e.borderRadius};
    border: 1px solid ${({theme:e})=>e.colors.neutral100};
  }
`,lr=({iconKey:e,name:n,onChange:s,isSelected:r,ariaLabel:o})=>(0,t.jsx)(st.D,{name:n,required:!1,children:(0,t.jsxs)(Dn.d,{htmlFor:e,id:`${e}-label`,children:[(0,t.jsxs)(Pn.s,{children:[(0,t.jsx)(kn.T,{type:"radio",id:e,name:n,checked:r,onChange:s,value:e,"aria-checked":r,"aria-labelledby":`${e}-label`}),o]}),(0,t.jsx)(x.s,{padding:2,cursor:"pointer",hasRadius:!0,background:r?"primary200":void 0,children:(0,t.jsx)(D.I,{as:ht[e],color:r?"primary600":"neutral300"})})]})}),dr=({intlLabel:e,name:n,onChange:s,value:r=""})=>{const{formatMessage:o}=(0,H.A)(),[l,i]=(0,f.useState)(!1),[c,u]=(0,f.useState)(""),p=Object.keys(ht),[g,m]=(0,f.useState)(p),$=(0,f.useRef)(null),j=(0,f.useRef)(null),C=()=>{i(!l)},M=({target:{value:L}})=>{u(L),m(()=>p.filter(R=>R.toLowerCase().includes(L.toLowerCase())))},z=()=>{C(),u(""),m(p)},T=()=>{s({target:{name:n,value:""}})};return(0,f.useEffect)(()=>{l&&j.current?.focus()},[l]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x.s,{justifyContent:"space-between",paddingBottom:2,children:[(0,t.jsx)(I.o,{variant:"pi",fontWeight:"bold",textColor:"neutral800",as:"label",children:o(e)}),(0,t.jsxs)(x.s,{gap:1,children:[l?(0,t.jsx)(Bn.S,{ref:j,name:"searchbar",size:"S",placeholder:o({id:d("ComponentIconPicker.search.placeholder"),defaultMessage:"Search for an icon"}),onBlur:()=>{c||C()},onChange:M,value:c,onClear:z,clearLabel:o({id:d("IconPicker.search.clear.label"),defaultMessage:"Clear the icon search"}),children:o({id:d("IconPicker.search.placeholder.label"),defaultMessage:"Search for an icon"})}):(0,t.jsx)(Rt.K,{ref:$,onClick:C,"aria-label":o({id:d("IconPicker.search.button.label"),defaultMessage:"Search icon button"}),icon:(0,t.jsx)(Zt.A,{}),noBorder:!0}),r&&(0,t.jsx)(Un.m,{description:o({id:d("IconPicker.remove.tooltip"),defaultMessage:"Remove the selected icon"}),children:(0,t.jsx)(Rt.K,{onClick:T,"aria-label":o({id:d("IconPicker.remove.button"),defaultMessage:"Remove the selected icon button"}),icon:(0,t.jsx)(No.A,{}),noBorder:!0})})]})]}),(0,t.jsx)(ir,{position:"relative",padding:1,background:"neutral100",hasRadius:!0,wrap:"wrap",gap:2,maxHeight:"126px",overflow:"auto",textAlign:"center",children:g.length>0?g.map(L=>(0,t.jsx)(lr,{iconKey:L,name:n,onChange:s,isSelected:L===r,ariaLabel:o({id:d("IconPicker.icon.label"),defaultMessage:"Select {icon} icon"},{icon:L})},L)):(0,t.jsx)(v.a,{padding:4,grow:2,children:(0,t.jsx)(I.o,{variant:"delta",textColor:"neutral600",textAlign:"center",children:o({id:d("IconPicker.emptyState.label"),defaultMessage:"No icon found"})})})})]})},cr=({description:e,error:n,intlLabel:s,modifiedData:r,name:o,onChange:l,value:i})=>{const{formatMessage:c}=(0,H.A)(),u=(0,f.useRef)(l),p=r?.displayName||"";(0,f.useEffect)(()=>{if(p){const j=(0,b.n)(p);try{const C=it(j,2);u.current({target:{name:o,value:C}})}catch{u.current({target:{name:o,value:j}})}}else u.current({target:{name:o,value:""}})},[p,o]);const g=n?c({id:n,defaultMessage:n}):"",m=e?c({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",$=c(s);return(0,t.jsx)(xe.k,{error:g,label:$,id:o,hint:m,name:o,onChange:l,value:i||""})},ur=({oneThatIsCreatingARelationWithAnother:e,target:n})=>{const{contentTypes:s,sortedContentTypesList:r}=De(),o=(0,Ye.wA)(),l=r.filter(an),{plugin:i=null,schema:{displayName:c}={displayName:"error"}}=s?.[n]??{},u=({uid:p,plugin:g,title:m,restrictRelationsTo:$})=>()=>{const j=g?`${g}_${m}`:m;o({type:b.O,target:{value:p,oneThatIsCreatingARelationWithAnother:e,selectedContentTypeFriendlyName:j,targetContentTypeAllowedRelations:$}})};return(0,t.jsxs)(ot.bL,{children:[(0,t.jsx)(mr,{children:`${c} ${i?`(from: ${i})`:""}`}),(0,t.jsx)(ot.UC,{zIndex:5,children:l.map(({uid:p,title:g,restrictRelationsTo:m,plugin:$})=>(0,t.jsxs)(ot.q7,{onSelect:u({uid:p,plugin:$,title:g,restrictRelationsTo:m}),children:[g,"\xA0",$&&(0,t.jsxs)(t.Fragment,{children:["(from: ",$,")"]})]},p))})]})},mr=(0,Me.default)(ot.l9)`
  svg {
    width: ${6/16}rem;
    height: ${4/16}rem;
  }
`,rn=({disabled:e=!1,error:n,header:s,isMain:r=!1,name:o,onChange:l,oneThatIsCreatingARelationWithAnother:i="",target:c="",value:u=""})=>(0,t.jsxs)(v.a,{background:"neutral100",hasRadius:!0,borderColor:"neutral200",children:[(0,t.jsx)(x.s,{paddingTop:r?4:1,paddingBottom:r?3:1,justifyContent:"center",children:r?(0,t.jsx)(I.o,{variant:"pi",fontWeight:"bold",textColor:"neutral800",children:s}):(0,t.jsx)(ur,{target:c,oneThatIsCreatingARelationWithAnother:i})}),(0,t.jsx)(te.c,{background:"neutral200"}),(0,t.jsx)(v.a,{padding:4,children:(0,t.jsx)(S.GenericInput,{disabled:e,error:n?.id||null,intlLabel:{id:d("form.attribute.item.defineRelation.fieldName"),defaultMessage:"Field name"},name:o,onChange:l,type:"text",value:u})})]}),pr=(0,Me.default)(v.a)`
  position: relative;
  width: 100%;
  &::before {
    content: '';
    position: absolute;
    top: calc(50% - 0px);
    height: 2px;
    width: 100%;
    background-color: ${({theme:e})=>e.colors.primary600};
    z-index: 0;
  }
`,gr=(0,Me.default)(v.a)`
  background: ${({theme:e,isSelected:n})=>e.colors[n?"primary100":"neutral0"]};
  border: 1px solid
    ${({theme:e,isSelected:n})=>e.colors[n?"primary700":"neutral200"]};
  border-radius: ${({theme:e})=>e.borderRadius};
  z-index: 1;
  svg {
    width: 1.5rem;
    height: 100%;
    path {
      fill: ${({theme:e,isSelected:n})=>e.colors[n?"primary700":"neutral500"]};
    }
  }
  &:disabled {
    cursor: not-allowed;
  }
`,fr=(0,Me.default)(x.s)`
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
`,hr={oneWay:Yt.A,oneToOne:Gt.A,oneToMany:Vt.A,manyToOne:zt.A,manyToMany:Ut.A,manyWay:Wt.A},yr=({naturePickerType:e,oneThatIsCreatingARelationWithAnother:n,relationType:s,target:r})=>{const o=(0,Ye.wA)(),{formatMessage:l}=(0,H.A)(),{contentTypes:i,modifiedData:c}=De(),u=["oneWay","oneToOne","oneToMany","manyToOne","manyToMany","manyWay"],p=["oneWay","manyWay"],m=(e==="contentType"?O(c,[e,"schema","kind"],""):e)==="collectionType"?u:p,$=s==="manyToOne",j=O(i,[r,"schema","displayName"],"unknown"),C=$?j:n,M=$?n:j,z=it(C,s==="manyToMany"?2:1),T=O(i,[r,"schema","restrictRelationsTo"],null),L=it(M,["manyToMany","oneToMany","manyToOne","manyWay"].includes(s)?2:1);return s?(0,t.jsxs)(x.s,{style:{flex:1},children:[(0,t.jsx)(pr,{children:(0,t.jsx)(x.s,{paddingLeft:9,paddingRight:9,paddingTop:1,justifyContent:"center",children:(0,t.jsx)(G.r,{tagName:"button",children:(0,t.jsx)(x.s,{gap:3,children:m.map(R=>{const B=hr[R],w=T===null||T.includes(R);return(0,t.jsx)(gr,{as:"button",isSelected:s===R,disabled:!w,onClick:()=>{w&&o({type:b.a,target:{oneThatIsCreatingARelationWithAnother:n,targetContentType:r,value:R}})},padding:2,type:"button",children:(0,t.jsx)(B,{},R)},R)})})})})}),(0,t.jsxs)(fr,{justifyContent:"center",children:[(0,t.jsxs)(I.o,{children:[qt(z,{length:24}),"\xA0"]}),(0,t.jsxs)(I.o,{textColor:"primary600",children:[l({id:d(`relation.${s}`)}),"\xA0"]}),(0,t.jsx)(I.o,{children:qt(L,{length:24})})]})]}):null},vr=({formErrors:e,mainBoxHeader:n,modifiedData:s,naturePickerType:r,onChange:o})=>{const l=(0,b.g)(s.relation,s.targetAttribute);return(0,t.jsxs)(x.s,{style:{position:"relative"},children:[(0,t.jsx)(rn,{isMain:!0,header:n,error:e?.name||null,name:"name",onChange:o,value:s?.name||""}),(0,t.jsx)(yr,{naturePickerType:r,oneThatIsCreatingARelationWithAnother:n,relationType:l,target:s.target}),(0,t.jsx)(rn,{disabled:["oneWay","manyWay"].includes(l),error:e?.targetAttribute||null,name:"targetAttribute",onChange:o,oneThatIsCreatingARelationWithAnother:n,target:s.target,value:s?.targetAttribute||""})]})},xr=({error:e=null,intlLabel:n,name:s,onChange:r,value:o=void 0})=>{const{formatMessage:l}=(0,H.A)(),{allComponentsCategories:i}=De(),[c,u]=(0,f.useState)(i),p=e?l({id:e,defaultMessage:e}):"",g=l(n),m=j=>{r({target:{name:s,value:j,type:"select-category"}})},$=j=>{u(C=>[...C,j]),m(j)};return(0,t.jsx)(zn.nP,{error:p,id:s,label:g,name:s,onChange:m,onCreateOption:$,value:o,children:c.map(j=>(0,t.jsx)(Wn.j,{value:j,children:j},j))})},br=({error:e=null,intlLabel:n,isAddingAComponentToAnotherComponent:s,isCreating:r,isCreatingComponentWhileAddingAField:o,componentToCreate:l,name:i,onChange:c,targetUid:u,forTarget:p,value:g})=>{const{formatMessage:m}=(0,H.A)(),$=e?m({id:e,defaultMessage:e}):"",j=m(n),{componentsGroupedByCategory:C,componentsThatHaveOtherComponentInTheirAttributes:M}=De(),z=["component","components"].includes(p);let T=Object.entries(C).reduce((L,R)=>{const[B,w]=R,ue=w.map(be=>({uid:be.uid,label:be.schema.displayName,categoryName:B}));return[...L,...ue]},[]);return s&&(T=T.filter(L=>!M.includes(L.uid))),z&&(T=T.filter(L=>L.uid!==u)),o&&(T=[{uid:g,label:l?.displayName,categoryName:l?.category}]),(0,t.jsx)(ne.l,{disabled:o||!r,error:$,label:j,id:i,name:i,onChange:L=>{c({target:{name:i,value:L,type:"select-category"}})},value:g||"",children:T.map(L=>(0,t.jsx)(Ne.c,{value:L.uid,children:`${L.categoryName} - ${L.label}`},L.uid))})},Cr=({dynamicZoneTarget:e,intlLabel:n,name:s,onChange:r,value:o})=>{const{formatMessage:l}=(0,H.A)(),{componentsGroupedByCategory:i,modifiedData:c}=De(),p=gt(c.contentType.schema.attributes,e)?.components||[],g=Object.keys(i).reduce((j,C)=>{const M=i[C].filter(({uid:z})=>!p.includes(z));return M.length>0&&(j[C]=M),j},{}),m=Object.entries(g).reduce((j,C)=>{const[M,z]=C,T={label:M,children:z.map(({uid:L,schema:{displayName:R}})=>({label:R,value:L}))};return j.push(T),j},[]),$=l({id:d("components.SelectComponents.displayed-value"),defaultMessage:"{number, plural, =0 {# components} one {# component} other {# components}} selected"},{number:o?.length??0});return(0,t.jsx)(k.B,{id:"select1",label:l(n),customizeContent:()=>$,name:s,onChange:j=>{r({target:{name:s,value:j,type:"select-components"}})},options:m,value:o||[]})},Ar=({intlLabel:e,error:n=void 0,modifiedData:s,name:r,onChange:o,options:l,value:i=""})=>{const{formatMessage:c}=(0,H.A)(),u=c(e),p=n?c({id:n,defaultMessage:n}):"",g=m=>{o({target:{name:r,value:m,type:"select"}}),i&&s.default!==void 0&&s.default!==null&&o({target:{name:"default",value:null}})};return(0,t.jsx)(ne.l,{error:p,label:u,id:r,name:r,onChange:g,value:i||"",children:l.map(({metadatas:{intlLabel:m,disabled:$,hidden:j},key:C,value:M})=>(0,t.jsx)(Ne.c,{value:M,disabled:$,hidden:j,children:c({id:m.id,defaultMessage:m.defaultMessage},m.values)},C))})},ln=({intlLabel:e,error:n=void 0,modifiedData:s,name:r,onChange:o,options:l,value:i=""})=>{const{formatMessage:c}=(0,H.A)(),u=c(e),p=n?c({id:n,defaultMessage:n}):"",g=m=>{o({target:{name:r,value:m,type:"select"}}),i&&(m==="biginteger"&&i!=="biginteger"&&(s.default!==void 0&&s.default!==null&&o({target:{name:"default",value:null}}),s.max!==void 0&&s.max!==null&&o({target:{name:"max",value:null}}),s.min!==void 0&&s.min!==null&&o({target:{name:"min",value:null}})),typeof m=="string"&&["decimal","float","integer"].includes(m)&&i==="biginteger"&&(s.default!==void 0&&s.default!==null&&o({target:{name:"default",value:null}}),s.max!==void 0&&s.max!==null&&o({target:{name:"max",value:null}}),s.min!==void 0&&s.min!==null&&o({target:{name:"min",value:null}})))};return(0,t.jsx)(ne.l,{error:p,label:u,id:r,name:r,onChange:g,value:i||"",children:l.map(({metadatas:{intlLabel:m,disabled:$,hidden:j},key:C,value:M})=>(0,t.jsx)(Ne.c,{value:M,disabled:$,hidden:j,children:c(m)},C))})};ln.defaultProps={error:void 0,value:""};const Tr=({description:e=null,error:n=null,intlLabel:s,modifiedData:r,name:o,onChange:l,value:i=null})=>{const{formatMessage:c}=(0,H.A)(),u=(0,f.useRef)(l),p=r?.displayName||"";(0,f.useEffect)(()=>{p?u.current({target:{name:o,value:(0,b.n)(p)}}):u.current({target:{name:o,value:""}})},[p,o]);const g=n?c({id:n,defaultMessage:n}):"",m=e?c({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",$=c(s);return(0,t.jsx)(xe.k,{error:g,label:$,id:o,hint:m,name:o,onChange:l,value:i||""})},dn=({form:e,formErrors:n,genericInputProps:s,modifiedData:r,onChange:o})=>{const{formatMessage:l}=(0,H.A)();return(0,t.jsx)(t.Fragment,{children:e.map((i,c)=>i.items.length===0?null:(0,t.jsxs)(v.a,{children:[i.sectionTitle&&(0,t.jsx)(v.a,{paddingBottom:4,children:(0,t.jsx)(I.o,{variant:"delta",as:"h3",children:l(i.sectionTitle)})}),(0,t.jsx)(X.x,{gap:4,children:i.items.map((u,p)=>{const g=`${c}.${p}`,m=O(r,u.name,void 0),$=Object.keys(n).find(C=>C===u.name),j=$?n[$].id:O(n,[...u.name.split(".").filter(C=>C!=="componentToCreate"),"id"],null);return u.type==="pushRight"?(0,t.jsx)(_.E,{col:u.size||6,children:(0,t.jsx)("div",{})},u.name||g):(0,t.jsx)(_.E,{col:u.size||6,children:(0,t.jsx)(S.GenericInput,{...u,...s,error:j,onChange:o,value:m})},u.name||g)})})]},c))})},Mr=({description:e=null,disabled:n=!1,error:s="",intlLabel:r,labelAction:o,name:l,onChange:i,placeholder:c=null,value:u=""})=>{const{formatMessage:p}=(0,H.A)(),g=s?p({id:s,defaultMessage:s}):"",m=e?p({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",$=p(r),j=c?p({id:c.id,defaultMessage:c.defaultMessage},{...c.values}):"",C=Array.isArray(u)?u.join(`
`):"",M=z=>{const T=z.target.value.split(`
`);i({target:{name:l,value:T}})};return(0,t.jsx)(Vn.T,{disabled:n,error:g,label:$,labelAction:o,id:l,hint:m,name:l,onChange:M,placeholder:j,value:C,children:C})},$e={name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:d("modalForm.attribute.form.base.name.description"),defaultMessage:"No space is allowed for the name of the attribute"}},jr={sections:[{sectionTitle:null,items:[$e]}]},He={base(e=""){return[{sectionTitle:null,items:[{name:`${e}displayName`,type:"text",intlLabel:{id:d("contentType.displayName.label"),defaultMessage:"Display Name"}},{name:`${e}category`,type:"select-category",intlLabel:{id:d("modalForm.components.create-component.category.label"),defaultMessage:"Select a category or enter a name to create a new one"}}]},{sectionTitle:null,items:[{name:`${e}icon`,type:"icon-picker",size:12,intlLabel:{id:d("modalForm.components.icon.label"),defaultMessage:"Icon"}}]}]},advanced(){return[]}},F={default:{name:"default",type:"text",intlLabel:{id:d("form.attribute.settings.default"),defaultMessage:"Default value"}},max:{name:"max",type:"checkbox-with-number-field",intlLabel:{id:d("form.attribute.item.maximum"),defaultMessage:"Maximum value"}},maxLength:{name:"maxLength",type:"checkbox-with-number-field",intlLabel:{id:d("form.attribute.item.maximumLength"),defaultMessage:"Maximum length"}},min:{name:"min",type:"checkbox-with-number-field",intlLabel:{id:d("form.attribute.item.minimum"),defaultMessage:"Minimum value"}},minLength:{name:"minLength",type:"checkbox-with-number-field",intlLabel:{id:d("form.attribute.item.minimumLength"),defaultMessage:"Minimum length"}},private:{name:"private",type:"checkbox",intlLabel:{id:d("form.attribute.item.privateField"),defaultMessage:"Private field"},description:{id:d("form.attribute.item.privateField.description"),defaultMessage:"This field will not show up in the API response"}},regex:{intlLabel:{id:d("form.attribute.item.text.regex"),defaultMessage:"RegExp pattern"},name:"regex",type:"text",description:{id:d("form.attribute.item.text.regex.description"),defaultMessage:"The text of the regular expression"}},required:{name:"required",type:"checkbox",intlLabel:{id:d("form.attribute.item.requiredField"),defaultMessage:"Required field"},description:{id:d("form.attribute.item.requiredField.description"),defaultMessage:"You won't be able to create an entry if this field is empty"}},unique:{name:"unique",type:"checkbox",intlLabel:{id:d("form.attribute.item.uniqueField"),defaultMessage:"Unique field"},description:{id:d("form.attribute.item.uniqueField.description"),defaultMessage:"You won't be able to create an entry if there is an existing entry with identical content"}}},Sr={blocks(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[F.required,F.private]}]}},boolean(){return{sections:[{sectionTitle:null,items:[{autoFocus:!0,type:"select-default-boolean",intlLabel:{id:d("form.attribute.settings.default"),defaultMessage:"Default value"},name:"default",options:[{value:"true",key:"true",metadatas:{intlLabel:{id:"true",defaultMessage:"true"}}},{value:"",key:"null",metadatas:{intlLabel:{id:"null",defaultMessage:"null"}}},{value:"false",key:"false",metadatas:{intlLabel:{id:"false",defaultMessage:"false"}}}]}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[F.required,F.private]}]}},component({repeatable:e},n){return n==="1"?{sections:He.advanced()}:e?{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[F.required,F.private,F.max,F.min]}]}:{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[F.required,F.private]}]}},date({type:e}){return{sections:[{sectionTitle:null,items:[{...F.default,type:e||"date",value:null,withDefaultValue:!1,disabled:!e,autoFocus:!1}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[F.required,F.unique,F.private]}]}},dynamiczone(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[F.required,F.max,F.min]}]}},email(){return{sections:[{sectionTitle:null,items:[{...F.default,type:"email"}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[F.required,F.unique,F.maxLength,F.minLength,F.private]}]}},enumeration(e){return{sections:[{sectionTitle:null,items:[{name:"default",type:"select",intlLabel:{id:d("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{},options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"}}},...(e.enum||[]).filter((n,s)=>e.enum.indexOf(n)===s&&n).map(n=>({key:n,value:n,metadatas:{intlLabel:{id:`${n}.no-override`,defaultMessage:n}}}))]},{intlLabel:{id:d("form.attribute.item.enumeration.graphql"),defaultMessage:"Name override for GraphQL"},name:"enumName",type:"text",validations:{},description:{id:d("form.attribute.item.enumeration.graphql.description"),defaultMessage:"Allows you to override the default generated name for GraphQL"}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[F.required,F.private]}]}},json(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[F.required,F.private]}]}},media(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:d("form.attribute.media.allowed-types"),defaultMessage:"Select allowed types of media"},name:"allowedTypes",type:"allowed-types-select",size:7,value:"",validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[F.required,F.private]}]}},number(e){const n=e.type==="decimal"||e.type==="float"?"any":1;return{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"default",type:e.type==="biginteger"?"text":"number",step:n,intlLabel:{id:d("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[F.required,F.unique,F.max,F.min,F.private]}]}},password(){return{sections:[{sectionTitle:null,items:[F.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[F.required,F.maxLength,F.minLength,F.private]}]}},relation(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[F.private]}]}},richtext(){return{sections:[{sectionTitle:null,items:[F.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[F.required,F.maxLength,F.minLength,F.private]}]}},text(){return{sections:[{sectionTitle:null,items:[F.default,F.regex]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[F.required,F.unique,F.maxLength,F.minLength,F.private]}]}},uid(e){return{sections:[{sectionTitle:null,items:[{...F.default,disabled:Boolean(e.targetField),type:"text"}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[F.required,F.maxLength,F.minLength,F.private]}]}}},yt={intlLabel:{id:"global.type",defaultMessage:"Type"},name:"createComponent",type:"boolean-radio-group",size:12,radios:[{title:{id:d("form.attribute.component.option.create"),defaultMessage:"Create a new component"},description:{id:d("form.attribute.component.option.create.description"),defaultMessage:"A component is shared across types and components, it will be available and accessible everywhere."},value:!0},{title:{id:d("form.attribute.component.option.reuse-existing"),defaultMessage:"Use an existing component"},description:{id:d("form.attribute.component.option.reuse-existing.description"),defaultMessage:"Reuse a component already created to keep your data consistent across content-types."},value:!1}]},cn={advanced:Sr,base:{component(e,n){if(n==="1"){const s=e.createComponent===!0?He.base("componentToCreate."):[];return{sections:[{sectionTitle:null,items:[yt]},...s]}}return{sections:[{sectionTitle:null,items:[$e,{name:"component",type:"select-component",intlLabel:{id:d("modalForm.attributes.select-component"),defaultMessage:"Select a component"},isMultiple:!1}]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"repeatable",type:"boolean-radio-group",size:12,radios:[{title:{id:d("form.attribute.component.option.repeatable"),defaultMessage:"Repeatable component"},description:{id:d("form.attribute.component.option.repeatable.description"),defaultMessage:"Best for multiple instances (array) of ingredients, meta tags, etc.."},value:!0},{title:{id:d("form.attribute.component.option.single"),defaultMessage:"Single component"},description:{id:d("form.attribute.component.option.single.description"),defaultMessage:"Best for grouping fields like full address, main information, etc..."},value:!1}]}]}]}},date(){return{sections:[{sectionTitle:null,items:[$e,{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",type:"select-date",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"date",value:"date",metadatas:{intlLabel:{id:d("form.attribute.item.date.type.date"),defaultMessage:"date (ex: 01/01/{currentYear})",values:{currentYear:new Date().getFullYear()}}}},{key:"datetime",value:"datetime",metadatas:{intlLabel:{id:d("form.attribute.item.date.type.datetime"),defaultMessage:"datetime (ex: 01/01/{currentYear} 00:00 AM)",values:{currentYear:new Date().getFullYear()}}}},{key:"time",value:"time",metadatas:{intlLabel:{id:d("form.attribute.item.date.type.time"),defaultMessage:"time (ex: 00:00 AM)"}}}]}]}]}},enumeration(){return{sections:[{sectionTitle:null,items:[$e]},{sectionTitle:null,items:[{name:"enum",type:"textarea-enum",size:6,intlLabel:{id:d("form.attribute.item.enumeration.rules"),defaultMessage:"Values (one line per value)"},placeholder:{id:d("form.attribute.item.enumeration.placeholder"),defaultMessage:`Ex:
morning
noon
evening`},validations:{required:!0}}]}]}},media(){return{sections:[{sectionTitle:null,items:[$e]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"multiple",size:12,type:"boolean-radio-group",radios:[{title:{id:d("form.attribute.media.option.multiple"),defaultMessage:"Multiple media"},description:{id:d("form.attribute.media.option.multiple.description"),defaultMessage:"Best for sliders, carousels or multiple files download"},value:!0},{title:{id:d("form.attribute.media.option.single"),defaultMessage:"Single media"},description:{id:d("form.attribute.media.option.single.description"),defaultMessage:"Best for avatar, profile picture or cover"},value:!1}]}]}]}},number(){return{sections:[{sectionTitle:null,items:[$e,{intlLabel:{id:d("form.attribute.item.number.type"),defaultMessage:"Number format"},name:"type",type:"select-number",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"integer",value:"integer",metadatas:{intlLabel:{id:d("form.attribute.item.number.type.integer"),defaultMessage:"integer (ex: 10)"}}},{key:"biginteger",value:"biginteger",metadatas:{intlLabel:{id:d("form.attribute.item.number.type.biginteger"),defaultMessage:"biginteger (ex: 123456789)"}}},{key:"decimal",value:"decimal",metadatas:{intlLabel:{id:d("form.attribute.item.number.type.decimal"),defaultMessage:"decimal (ex: 2.22)"}}},{key:"float",value:"float",metadatas:{intlLabel:{id:d("form.attribute.item.number.type.float"),defaultMessage:"decimal (ex: 3.3333333)"}}}]}]}]}},relation(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:"FIXME",defaultMessage:"FIXME"},name:"relation",size:12,type:"relation"}]}]}},string(){return{sections:[{sectionTitle:null,items:[$e]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:d("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:d("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:d("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:d("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},text(){return{sections:[{sectionTitle:null,items:[$e]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:d("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:d("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:d("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:d("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},uid(e,n,s){const r=s.filter(({type:o})=>["string","text"].includes(o)).map(({name:o})=>({key:o,value:o,metadatas:{intlLabel:{id:`${o}.no-override`,defaultMessage:o}}}));return{sections:[{sectionTitle:null,items:[{...$e,placeholder:{id:d("modalForm.attribute.form.base.name.placeholder"),defaultMessage:"e.g. slug, seoUrl, canonicalUrl"}},{intlLabel:{id:d("modalForm.attribute.target-field"),defaultMessage:"Attached field"},name:"targetField",type:"select",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"global.none",defaultMessage:"None"}}},...r]}]}]}}}},vt=e=>e?Oo(e,{decamelize:!1,lowercase:!1,separator:"_"}):"",un=/^[A-Za-z][_0-9A-Za-z]*$/,mn=e=>({name:"attributeNameAlreadyUsed",message:S.translatedErrors.unique,test(n){if(!n)return!1;const s=(0,Y.snakeCase)(n);return!e.some(r=>r===n?!1:(0,Y.snakeCase)(r)===s)}}),xt=e=>({name:"forbiddenAttributeName",message:d("error.attributeName.reserved-name"),test(n){if(!n)return!1;const s=(0,Y.snakeCase)(n);return!e.some(r=>(0,Y.snakeCase)(r)===s)}}),y={default:()=>A.Yj().nullable(),max:()=>A.ai().integer().nullable(),min:()=>A.ai().integer().when("max",(e,n)=>e?n.max(e,d("error.validation.minSupMax")):n).nullable(),maxLength:()=>A.ai().integer().positive(d("error.validation.positive")).nullable(),minLength:()=>A.ai().integer().min(0).when("maxLength",(e,n)=>e?n.max(e,d("error.validation.minSupMax")):n).nullable(),name(e,n){return A.Yj().test(mn(e)).test(xt(n)).matches(un,S.translatedErrors.regex).required(S.translatedErrors.required)},required:()=>A.zM(),type:()=>A.Yj().required(S.translatedErrors.required),unique:()=>A.zM().nullable()},bt=(e,n)=>({name:y.name(e,n),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength(),regex:A.Yj().test({name:"isValidRegExpPattern",message:d("error.validation.regex"),test(r){return new RegExp(r||"")!==null}}).nullable()}),Ct=()=>({name:"isMinSuperiorThanMax",message:d("error.validation.minSupMax"),test(e){if(!e)return!0;const{max:n}=this.parent;return!n||Number.isNaN(pt(e))?!0:pt(n)>=pt(e)}}),_e={date(e,n){const s={name:y.name(e,n),type:y.type()};return A.Ik(s)},datetime(e,n){const s={name:y.name(e,n),type:y.type()};return A.Ik(s)},time(e,n){const s={name:y.name(e,n),type:y.type()};return A.Ik(s)},default(e,n){const s={name:y.name(e,n),type:y.type()};return A.Ik(s)},biginteger(e,n){const s={name:y.name(e,n),type:y.type(),default:A.Yj().nullable().matches(/^-?\d*$/),unique:y.unique(),required:y.required(),max:A.Yj().nullable().matches(/^-?\d*$/,S.translatedErrors.regex),min:A.Yj().nullable().test(Ct()).matches(/^-?\d*$/,S.translatedErrors.regex)};return A.Ik(s)},boolean(e,n){const s={name:y.name(e,n),default:A.zM().nullable(),required:y.required(),unique:y.unique()};return A.Ik(s)},component(e,n){const s={name:y.name(e,n),type:y.type(),required:y.required(),max:y.max(),min:y.min(),component:A.Yj().required(S.translatedErrors.required)};return A.Ik(s)},decimal(e,n){const s={name:y.name(e,n),type:y.type(),default:A.ai(),required:y.required(),max:A.ai(),min:A.ai().test(Ct())};return A.Ik(s)},dynamiczone(e,n){const s={name:y.name(e,n),type:y.type(),required:y.required(),max:y.max(),min:y.min()};return A.Ik(s)},email(e,n){const s={name:y.name(e,n),type:y.type(),default:A.Yj().email().nullable(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength()};return A.Ik(s)},enumeration(e,n){const s=/^[_A-Za-z][_0-9A-Za-z]*$/,r={name:A.Yj().test(mn(e)).test(xt(n)).matches(s,S.translatedErrors.regex).required(S.translatedErrors.required),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),enum:A.YO().of(A.Yj()).min(1,S.translatedErrors.min).test({name:"areEnumValuesUnique",message:d("error.validation.enum-duplicate"),test(o){return o?!$o(o.map(vt).filter((i,c,u)=>u.indexOf(i)!==c)).length:!1}}).test({name:"doesNotHaveEmptyValues",message:d("error.validation.enum-empty-string"),test:o=>o?!o.map(vt).some(l=>l===""):!1}).test({name:"doesMatchRegex",message:d("error.validation.enum-regex"),test:o=>o?o.map(vt).every(l=>s.test(l)):!1}),enumName:A.Yj().nullable()};return A.Ik(r)},float(e,n){const s={name:y.name(e,n),type:y.type(),required:y.required(),default:A.ai(),max:A.ai(),min:A.ai().test(Ct())};return A.Ik(s)},integer(e,n){const s={name:y.name(e,n),type:y.type(),default:A.ai().integer(),unique:y.unique(),required:y.required(),max:y.max(),min:y.min()};return A.Ik(s)},json(e,n){const s={name:y.name(e,n),type:y.type(),required:y.required(),unique:y.unique()};return A.Ik(s)},media(e,n){const s={name:y.name(e,n),type:y.type(),multiple:A.zM(),required:y.required(),allowedTypes:A.YO().of(A.Yj().oneOf(["images","videos","files","audios"])).min(1).nullable()};return A.Ik(s)},password(e,n){const s={name:y.name(e,n),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength()};return A.Ik(s)},relation(e,n,s,{initialData:r,modifiedData:o}){const l={name:y.name(e,n),target:A.Yj().required(S.translatedErrors.required),relation:A.Yj().required(),type:A.Yj().required(),targetAttribute:A.RZ(()=>{const i=(0,b.g)(o.relation,o.targetAttribute);if(i==="oneWay"||i==="manyWay")return A.Yj().nullable();const c=A.Yj().test(xt(n)),p=[...s.map(({name:g})=>g),o.name].filter(g=>g!==r.targetAttribute);return c.matches(un,S.translatedErrors.regex).test({name:"forbiddenTargetAttributeName",message:d("error.validation.relation.targetAttribute-taken"),test(g){return g?!p.includes(g):!1}}).required(S.translatedErrors.required)})};return A.Ik(l)},richtext(e,n){const s={name:y.name(e,n),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength()};return A.Ik(s)},blocks(e,n){const s={name:y.name(e,n),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength()};return A.Ik(s)},string(e,n){const s=bt(e,n);return A.Ik(s)},text(e,n){const s=bt(e,n);return A.Ik(s)},uid(e,n){const s=bt(e,n);return A.Ik(s)}},pn=/^[A-Za-z][-_0-9A-Za-z]*$/,Nr=e=>{const n={name:A.Yj().matches(pn,S.translatedErrors.regex).test({name:"nameNotAllowed",message:S.translatedErrors.unique,test(s){return s?!e.includes(s?.toLowerCase()):!1}}).required(S.translatedErrors.required)};return A.Ik(n)},Fr={base:{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:d("modalForm.editCategory.base.name.description"),defaultMessage:"No space is allowed for the name of the category"}}]}]}},Lr=(e,n,s,r,o)=>{const l={displayName:A.Yj().test({name:"nameAlreadyUsed",message:S.translatedErrors.unique,test(i){if(!i)return!1;const c=(0,b.c)(i,s),u=(0,Y.snakeCase)(c),p=(0,Y.snakeCase)(o);return e.every(g=>(0,Y.snakeCase)(g)!==u)&&r.every(g=>(0,Y.snakeCase)(g)!==p)}}).test({name:"nameNotAllowed",message:d("error.contentTypeName.reserved-name"),test(i){if(!i)return!1;const c=(0,Y.snakeCase)(i);return n.every(u=>(0,Y.snakeCase)(u)!==c)}}).required(S.translatedErrors.required),category:A.Yj().matches(pn,S.translatedErrors.regex).required(S.translatedErrors.required),icon:A.Yj()};return A.Ik(l)},gn={name:"displayName",type:"text",intlLabel:{id:d("contentType.displayName.label"),defaultMessage:"Display name"}},At={advanced:{default(){return{sections:[{items:[{intlLabel:{id:d("contentType.draftAndPublish.label"),defaultMessage:"Draft & publish"},description:{id:d("contentType.draftAndPublish.description"),defaultMessage:"Allows writing a draft version of an entry, before it is published"},name:"draftAndPublish",type:"toggle-draft-publish",validations:{}}]}]}}},base:{create(){return{sections:[{sectionTitle:null,items:[gn,{description:{id:d("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:d("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text-singular"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{description:{id:d("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:d("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text-plural"}]}]}},edit(){return{sections:[{sectionTitle:null,items:[gn,{disabled:!0,description:{id:d("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:d("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{disabled:!0,description:{id:d("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:d("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text"},{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"kind",type:"content-type-radio-group",size:12,radios:[{title:{id:d("form.button.collection-type.name"),defaultMessage:"Collection Type"},description:{id:d("form.button.collection-type.description"),defaultMessage:"Best for multiple instances like articles, products, comments, etc."},value:"collectionType"},{title:{id:d("form.button.single-type.name"),defaultMessage:"Single Type"},description:{id:d("form.button.single-type.description"),defaultMessage:"Best for single instance like about us, homepage, etc."},value:"singleType"}]}]}]}}}},Ir=({usedContentTypeNames:e=[],reservedModels:n=[],singularNames:s=[],pluralNames:r=[],collectionNames:o=[]})=>{const l={displayName:A.Yj().test({name:"nameAlreadyUsed",message:S.translatedErrors.unique,test(i){if(!i)return!1;const c=(0,b.b)(i),u=(0,Y.snakeCase)(c);return!e.some(p=>(0,Y.snakeCase)(p)===u)}}).test({name:"nameNotAllowed",message:d("error.contentTypeName.reserved-name"),test(i){if(!i)return!1;const c=(0,Y.snakeCase)(i);return!n.some(u=>(0,Y.snakeCase)(u)===c)}}).required(S.translatedErrors.required),pluralName:A.Yj().test({name:"pluralNameAlreadyUsed",message:S.translatedErrors.unique,test(i){if(!i)return!1;const c=(0,Y.snakeCase)(i);return!r.some(u=>(0,Y.snakeCase)(u)===c)}}).test({name:"pluralNameAlreadyUsedAsSingular",message:d("error.contentType.pluralName-equals-singularName"),test(i){if(!i)return!1;const c=(0,Y.snakeCase)(i);return!s.some(u=>(0,Y.snakeCase)(u)===c)}}).test({name:"pluralAndSingularAreUnique",message:d("error.contentType.pluralName-used"),test(i,c){return i?(0,Y.snakeCase)(c.parent.singularName)!==(0,Y.snakeCase)(i):!1}}).test({name:"pluralNameNotAllowed",message:d("error.contentTypeName.reserved-name"),test(i){if(!i)return!1;const c=(0,Y.snakeCase)(i);return!n.some(u=>(0,Y.snakeCase)(u)===c)}}).test({name:"pluralNameNotAlreadyUsedInCollectionName",message:d("error.contentType.pluralName-equals-collectionName"),test(i){if(!i)return!1;const c=(0,Y.snakeCase)(i);return!o.some(u=>(0,Y.snakeCase)(u)===c)}}).required(S.translatedErrors.required),singularName:A.Yj().test({name:"singularNameAlreadyUsed",message:S.translatedErrors.unique,test(i){if(!i)return!1;const c=(0,Y.snakeCase)(i);return!s.some(u=>(0,Y.snakeCase)(u)===c)}}).test({name:"singularNameAlreadyUsedAsPlural",message:d("error.contentType.singularName-equals-pluralName"),test(i){if(!i)return!1;const c=(0,Y.snakeCase)(i);return!r.some(u=>(0,Y.snakeCase)(u)===c)}}).test({name:"pluralAndSingularAreUnique",message:d("error.contentType.singularName-used"),test(i,c){return i?(0,Y.snakeCase)(c.parent.pluralName)!==(0,Y.snakeCase)(i):!1}}).test({name:"singularNameNotAllowed",message:d("error.contentTypeName.reserved-name"),test(i){if(!i)return!1;const c=(0,Y.snakeCase)(i);return!n.some(u=>(0,Y.snakeCase)(u)===c)}}).required(S.translatedErrors.required),draftAndPublish:A.zM(),kind:A.Yj().oneOf(["singleType","collectionType"]),reviewWorkflows:A.zM()};return A.Ik(l)},Tt={advanced:{default(){return{sections:He.advanced()}}},base:{createComponent(){return{sections:[{sectionTitle:null,items:[yt]},...He.base("componentToCreate.")]}},default(){return{sections:[{sectionTitle:null,items:[yt]},{sectionTitle:null,items:[{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{name:"components",type:"select-components",intlLabel:{id:d("modalForm.attributes.select-components"),defaultMessage:"Select the components"},isMultiple:!0}]}]}}}},fn=(e,n)=>{e.forEach(s=>{if(!("sectionTitle"in s)){n[0].items?.push(s);return}n.push(s)})},Er=(e,n)=>`components_${(0,Y.snakeCase)(n)}_${it((0,Y.snakeCase)(e))}`,hn=(e,n)=>e.filter(({name:s})=>s!==n.initialData.name).map(({name:s})=>s),Ue={customField:{schema({schemaAttributes:e,attributeType:n,customFieldValidator:s,reservedNames:r,schemaData:o,ctbFormsAPI:l}){const i=hn(e,o);_e[n];let c;return n==="relation"?c=_e[n](i,r.attributes,[],{initialData:{},modifiedData:{}}):c=_e[n](i,r.attributes),l.makeCustomFieldValidator(c,s,i,r.attributes,o)},form:{base({customField:e}){const n=[{sectionTitle:null,items:[$e]}];return e.options?.base&&fn(e.options.base,n),{sections:n}},advanced({customField:e,data:n,step:s,extensions:r,...o}){const l=[{sectionTitle:null,items:[]}],i=r.getAdvancedForm(["attribute",e.type],{data:n,type:e.type,step:s,...o});if(e.options?.advanced&&fn(e.options.advanced,l),i){const c={sectionTitle:{id:d("modalForm.custom-fields.advanced.settings.extended"),defaultMessage:"Extended settings"},items:i};l.push(c)}return{sections:l}}}},attribute:{schema(e,n,s,r,o,l){const i=e?.schema?.attributes??[],c=hn(i,o);try{const u=_e[n](c,s.attributes,r,o);return l.makeValidator(["attribute",n],u,c,s.attributes,r,o)}catch(u){return console.error("Error yup build schema",u),_e.default(c,s.attributes)}},form:{advanced({data:e,type:n,step:s,extensions:r,...o}){try{const l=cn.advanced[n](e,s).sections,i=r.getAdvancedForm(["attribute",n],{data:e,type:n,step:s,...o});return{sections:l.reduce((u,p)=>(p.sectionTitle===null?u.push(p):u.push({...p,items:[...p.items,...i]}),u),[])}}catch(l){return console.error(l),{sections:[]}}},base({data:e,type:n,step:s,attributes:r}){try{return cn.base[n](e,s,r)}catch{return jr}}}},contentType:{schema(e,n,s,r,o,l){const i=Object.values(l).map(C=>C.schema.singularName),c=Object.values(l).map(C=>C?.schema?.pluralName??""),u=n?e.filter(C=>C!==s):e,p=n?i.filter(C=>{const{schema:M}=l[s];return M.singularName!==C}):i,g=n?c.filter(C=>{const{schema:M}=l[s];return M.pluralName!==C}):c,m=Object.values(l).map(C=>C?.schema?.collectionName??""),$=n?m.filter(C=>{const{schema:M}=l[s],z=M.pluralName,T=M.collectionName;return C!==z||C!==T}):m,j=Ir({usedContentTypeNames:u,reservedModels:r.models,singularNames:p,pluralNames:g,collectionNames:$});return o.makeValidator(["contentType"],j,u,r.models,p,g)},form:{base({actionType:e}){return e==="create"?At.base.create():At.base.edit()},advanced({extensions:e}){const n=At.advanced.default().sections.map(r=>r.items).flat(),s=e.getAdvancedForm(["contentType"]);return{sections:[{items:[...n,...s]}]}}}},component:{schema(e,n,s,r=!1,o,l,i=null){const c=r?e.filter(m=>m!==i):e,u=Object.values(o).map(m=>m?.schema?.collectionName),p=Er(l,n),g=r?u.filter(m=>m!==p):u;return Lr(c,s.models,n,g,p)},form:{advanced(){return{sections:He.advanced()}},base(){return{sections:He.base()}}}},addComponentToDynamicZone:{form:{advanced(){return Tt.advanced.default()},base({data:e}){return e?.createComponent??!1?Tt.base.createComponent():Tt.base.default()}}},editCategory:{schema(e,n){const s=e.filter(r=>r!==n.name).map(r=>r.toLowerCase());return Nr(s)},form:{advanced:()=>({sections:[]}),base(){return Fr.base}}}},$r=()=>e=>e[`${b.p}_formModal`]||b.i,Or=()=>(0,_t.Mz)($r(),e=>e),Rr=(e,n)=>{const s=O(e,["contentType","schema","kind"],"");return s==="singleType"||s===n.kind?!0:O(e,["contentType","schema","attributes"],[]).filter(({relation:l,type:i,targetAttribute:c})=>{const u=(0,b.g)(l,c);return i==="relation"&&!["oneWay","manyWay"].includes(u||"")}).length===0},Dr=(e="",n,s)=>{const r=["text","boolean","blocks","json","number","email","date","password","media","enumeration","relation","richtext"],o=e==="contentType",l=s.includes(n),i=!o&&!l;return o?[[...r.slice(0,-1),"uid",...r.slice(-1)],["component","dynamiczone"]]:i?[r,["component"]]:[r]},yn=e=>e.reduce((n,s)=>{const r=s.items.reduce((o,l)=>(l.name&&o.push(l.name),o),[]);return[...n,...r]},[]),Pr=()=>{const{onCloseModal:e,onNavigateToChooseAttributeModal:n,onNavigateToAddCompoToDZModal:s,onNavigateToCreateComponentStep2:r,actionType:o,attributeName:l,attributeType:i,customFieldUid:c,categoryName:u,dynamicZoneTarget:p,forTarget:g,modalType:m,isOpen:$,kind:j,step:C,targetUid:M,showBackLink:z}=Ze(),T=(0,S.useCustomFields)().get(c),L=(0,f.useRef)(),R=(0,f.useMemo)(Or,[]),B=(0,Ye.wA)(),w=(0,S.useNotification)(),ue=(0,Ye.d4)(Z=>R(Z),Ye.bN),{push:be}=(0,Te.W6)(),{trackUsage:W}=(0,S.useTracking)(),{formatMessage:ve}=(0,H.A)(),{getPlugin:q}=(0,S.useStrapiApp)(),ge=q(b.p)?.apis.forms,oe=ge.components.inputs,{addAttribute:Pe,addCustomFieldAttribute:me,addCreatedComponentToDynamicZone:J,allComponentsCategories:N,changeDynamicZoneComponents:Mt,contentTypes:Ke,components:ze,createSchema:Qe,deleteCategory:jt,deleteData:dt,editCategory:St,editCustomFieldAttribute:Nt,submitData:Ft,modifiedData:fe,nestedComponents:Lt,setModifiedData:It,sortedContentTypesList:Et,updateSchema:ct,reservedNames:We}=De(),{componentToCreate:tt,formErrors:ke,initialData:de,isCreatingComponentWhileAddingAField:nt,modifiedData:h}=ue,E=g==="contentType"||g==="component"?[g]:[g,M];(0,f.useEffect)(()=>{if($){const Z=Et.filter(an);m==="editCategory"&&It(),o==="edit"&&m==="attribute"&&g==="contentType"&&W("willEditFieldOfContentType");const Ae=[...E,"schema","attributes"],Ee=gt(O(fe,Ae,[]),p)||null;if(m==="editCategory"&&o==="edit"&&B({type:b.S,modalType:m,actionType:o,data:{name:u}}),m==="contentType"&&o==="create"&&B({type:b.S,modalType:m,actionType:o,data:{draftAndPublish:!0},pluginOptions:{}}),m==="contentType"&&o==="edit"){const{displayName:K,draftAndPublish:ce,kind:Se,pluginOptions:ye,pluralName:yi,reviewWorkflows:vi,singularName:xi}=O(fe,[...E,"schema"],{displayName:null,pluginOptions:{},singularName:null,pluralName:null});B({type:b.S,actionType:o,modalType:m,data:{displayName:K,draftAndPublish:ce,kind:Se,pluginOptions:ye,pluralName:yi,reviewWorkflows:vi??!1,singularName:xi}})}if(m==="component"&&o==="edit"){const K=O(fe,E,{});B({type:b.S,actionType:o,modalType:m,data:{displayName:K.schema.displayName,category:K.category,icon:K.schema.icon}})}if(m==="addComponentToDynamicZone"&&o==="edit"){const K={...Ee,components:[],name:p,createComponent:!1,componentToCreate:{type:"component"}};B({type:b.d,attributeToEdit:K})}if(i){const ce={...gt(O(fe,Ae,[]),l),name:l};i==="component"&&o==="edit"&&(ce.repeatable||Xt(ce,"repeatable",!1)),B(m==="customField"?{type:b.e,customField:T,isEditing:o==="edit",modifiedDataToSetForEditing:ce,forTarget:g}:{type:b.f,attributeType:i,nameToSetForRelation:O(Z,["0","title"],"error"),targetUid:O(Z,["0","uid"],"error"),isEditing:o==="edit",modifiedDataToSetForEditing:ce,step:C,forTarget:g})}}else B({type:b.R})},[o,l,i,u,p,g,$,m]);const V=m==="contentType",ie=m==="component",he=m==="attribute",Le=m==="customField",Ie=i==="component"&&he,Ve=o==="create",Ge=O(h,"createComponent",!1)||nt,Je=C==="1",Nn=m==="editCategory",Fn=m==="chooseAttribute",$t=(0,b.b)(h.displayName||""),Ot=O(fe,[...E,"schema","attributes"],null),ai=async()=>{let Z;const Ae=Ge&&C==="1"?O(h,"componentToCreate",{}):h;if(V)Z=Ue.contentType.schema(Object.keys(Ke),o==="edit",O(fe,[...E,"uid"],null),We,ge,Ke);else if(ie)Z=Ue.component.schema(Object.keys(ze),h.category||"",We,o==="edit",ze,h.displayName||"",O(fe,[...E,"uid"],null));else if(Le)Z=Ue.customField.schema({schemaAttributes:O(fe,[...E,"schema","attributes"],[]),attributeType:T.type,reservedNames:We,schemaData:{modifiedData:h,initialData:de},ctbFormsAPI:ge,customFieldValidator:T.options?.validator});else if(Ie&&Ge&&Je)Z=Ue.component.schema(Object.keys(ze),O(h,"componentToCreate.category",""),We,o==="edit",ze,h.componentToCreate.displayName||"");else if(he&&!Je){const Ee=i==="relation"?"relation":h.type;let K=[];if(Ee==="relation"){const ce=O(h,["target"],null);K=O(Ke,[ce,"schema","attributes"],[]).filter(({name:ye})=>o!=="edit"?!0:ye!==de.targetAttribute)}Z=Ue.attribute.schema(O(fe,E,{}),Ee,We,K,{modifiedData:h,initialData:de},ge)}else if(Nn)Z=Ue.editCategory.schema(N,de);else if(Je&&Ge)Z=Ue.component.schema(Object.keys(ze),O(h,"componentToCreate.category",""),We,o==="edit",ze,h.componentToCreate.displayName||"");else return;await Z.validate(Ae,{abortEarly:!1})},Ln=(0,f.useCallback)(({target:{name:Z,value:Ae,type:Ee,...K}})=>{const ce=["enumName","max","min","maxLength","minLength","regex","default"];let Se;ce.includes(Z)&&Ae===""?Se=null:Se=Ae;const ye=Object.assign({},ke);Z==="max"&&delete ye.min,Z==="maxLength"&&delete ye.minLength,delete ye[Z],B({type:b.h,errors:ye}),B({type:b.j,keys:Z.split("."),value:Se,...K})},[B,ke]),je=async(Z,Ae=Ve)=>{Z.preventDefault();try{await ai(),ri(Ae);const Ee=g==="components"?M:$t;if(V)if(Ve)Qe({...h,kind:j},m,$t),be({pathname:`/plugins/${b.p}/content-types/${$t}`}),n({forTarget:g,targetUid:Ee});else{Rr(fe,h)?(e(),Ft(h)):w({type:"warning",message:{id:"notification.contentType.relations.conflict"}});return}else if(m==="component")if(Ve){const K=(0,b.c)(h.displayName,h.category),{category:ce,...Se}=h;Qe(Se,"component",K,ce),be({pathname:`/plugins/${b.p}/component-categories/${ce}/${K}`}),n({forTarget:g,targetUid:K})}else{ct(h,m,M),e();return}else if(Nn){if(wt(de.name)===wt(h.name)){e();return}St(de.name,h);return}else if(Le){const K={attributeToSet:{...h,customField:c},forTarget:g,targetUid:M,initialAttribute:de};o==="edit"?Nt(K):me(K),Ae?n({forTarget:g,targetUid:Ee}):e();return}else if(he&&!Ge){if(i==="dynamiczone"){Pe(h,g,M,o==="edit",de),Ve?(B({type:b.k}),L.current!==void 0&&L.current._handlers.setSelectedTabIndex(0),s({dynamicZoneTarget:h.name})):e();return}if(!Ie){Pe(h,g,M,o==="edit",de),Ae?n({forTarget:g,targetUid:Ee}):e();return}if(Je){r(),B({type:b.l,forTarget:g});return}Pe(h,g,M,o==="edit",de,!0),Ae?n({forTarget:g,targetUid:M}):e()}else if(he&&Ge){if(Je){W("willCreateComponentFromAttributesModal"),B({type:b.m,forTarget:g}),r();return}const{category:K,type:ce,...Se}=tt,ye=(0,b.c)(tt.displayName,K);Qe(Se,ce,ye,K,Ge),Pe(h,g,M,!1),B({type:b.R}),Ae?n({forTarget:"components",targetUid:ye}):e();return}else{if(Je)if(Ge){const{category:K,type:ce,...Se}=h.componentToCreate,ye=(0,b.c)(h.componentToCreate.displayName,K);Qe(Se,ce,ye,K,Ge),J(p,[ye]),n({forTarget:"components",targetUid:ye})}else Mt(p,h.components),e();else console.error("This case is not handled");return}B({type:b.R})}catch(Ee){const K=(0,S.getYupInnerErrors)(Ee);B({type:b.h,errors:K})}},si=()=>{window.confirm(ve({id:"window.confirm.close-modal.file",defaultMessage:"Are you sure? Your changes will be lost."}))&&(e(),B({type:b.R}))},In=()=>{mt(h,de)?(e(),B({type:b.R})):si()},oi=Z=>{if(Z==="advanced"){if(V){W("didSelectContentTypeSettings");return}g==="contentType"&&W("didSelectContentTypeFieldSettings")}},ri=Z=>{m==="attribute"&&g==="contentType"&&i!=="dynamiczone"&&Z&&W("willAddMoreFieldToContentType")},ii=()=>!!(m==="editCategory"||m==="component"||Io(h,"createComponent")),li=Dr(g,M,Lt);if(!$||!m)return null;const En=O(Ue,[m,"form"],{advanced:()=>({sections:[]}),base:()=>({sections:[]})}),di=g==="components"||g==="component",$n={customInputs:{"allowed-types-select":Uo,"boolean-radio-group":_o,"checkbox-with-number-field":er,"icon-picker":dr,"content-type-radio-group":tr,"radio-group":ft,relation:vr,"select-category":xr,"select-component":br,"select-components":Cr,"select-default-boolean":wo,"select-number":ln,"select-date":Ar,"toggle-draft-publish":nr,"text-plural":cr,"text-singular":Tr,"textarea-enum":Mr,...oe},componentToCreate:tt,dynamicZoneTarget:p,formErrors:ke,isAddingAComponentToAnotherComponent:di,isCreatingComponentWhileAddingAField:nt,mainBoxHeader:O(fe,[...E,"schema","displayName"],""),modifiedData:h,naturePickerType:g,isCreating:Ve,targetUid:M,forTarget:g},On=En.advanced({data:h,type:i,step:C,actionType:o,attributes:Ot,extensions:ge,forTarget:g,contentTypeSchema:fe.contentType||{},customField:T}).sections,Rn=En.base({data:h,type:i,step:C,actionType:o,attributes:Ot,extensions:ge,forTarget:g,contentTypeSchema:fe.contentType||{},customField:T}).sections,ci=yn(Rn),ui=yn(On),mi=Object.keys(ke).some(Z=>ci.includes(Z)),pi=Object.keys(ke).some(Z=>ui.includes(Z)),gi=O(Ke,[M,"schema","kind"]),fi=()=>o==="edit"&&Ot.every(({name:Z})=>Z!==h?.name),hi=()=>{fi()&&W("didEditFieldNameOnContentType")};return(0,t.jsxs)(Gn.k,{onClose:In,labelledBy:"title",children:[(0,t.jsx)(sr,{actionType:o,attributeName:l,categoryName:u,contentTypeKind:j,dynamicZoneTarget:p,modalType:m,forTarget:g,targetUid:M,attributeType:i,customFieldUid:c,showBackLink:z}),Fn&&(0,t.jsx)(Xo,{attributes:li,forTarget:g,kind:gi||"collectionType"}),!Fn&&(0,t.jsxs)("form",{onSubmit:je,children:[(0,t.jsx)(Oe.c,{children:(0,t.jsxs)(le.f,{label:"todo",id:"tabs",variant:"simple",ref:L,onTabChange:Z=>{Z===1&&oi("advanced")},children:[(0,t.jsxs)(x.s,{justifyContent:"space-between",children:[(0,t.jsx)(rr,{actionType:o,forTarget:g,kind:j,step:C,modalType:m,attributeType:i,attributeName:l,customField:T}),(0,t.jsxs)(re.t,{children:[(0,t.jsx)(re.o,{hasError:mi,children:ve({id:d("popUpForm.navContainer.base"),defaultMessage:"Basic settings"})}),(0,t.jsx)(re.o,{hasError:pi,disabled:ii(),children:ve({id:d("popUpForm.navContainer.advanced"),defaultMessage:"Advanced settings"})})]})]}),(0,t.jsx)(te.c,{}),(0,t.jsx)(v.a,{paddingTop:6,children:(0,t.jsxs)(se.T,{children:[(0,t.jsx)(se.K,{children:(0,t.jsx)(x.s,{direction:"column",alignItems:"stretch",gap:6,children:(0,t.jsx)(dn,{form:Rn,formErrors:ke,genericInputProps:$n,modifiedData:h,onChange:Ln})})}),(0,t.jsx)(se.K,{children:(0,t.jsx)(x.s,{direction:"column",alignItems:"stretch",gap:6,children:(0,t.jsx)(dn,{form:On,formErrors:ke,genericInputProps:$n,modifiedData:h,onChange:Ln})})})]})})]})}),(0,t.jsx)(Yn.j,{endActions:(0,t.jsx)(ar,{deleteCategory:jt,deleteContentType:dt,deleteComponent:dt,categoryName:de.name,isAttributeModal:m==="attribute",isCustomFieldModal:m==="customField",isComponentToDzModal:m==="addComponentToDynamicZone",isComponentAttribute:i==="component",isComponentModal:m==="component",isContentTypeModal:m==="contentType",isCreatingComponent:o==="create",isCreatingDz:o==="create",isCreatingComponentAttribute:h.createComponent||!1,isCreatingComponentInDz:h.createComponent||!1,isCreatingComponentWhileAddingAField:nt,isCreatingContentType:o==="create",isEditingAttribute:o==="edit",isDzAttribute:i==="dynamiczone",isEditingCategory:m==="editCategory",isInFirstComponentStep:C==="1",onSubmitAddComponentAttribute:je,onSubmitAddComponentToDz:je,onSubmitCreateComponent:je,onSubmitCreateContentType:je,onSubmitCreateDz:je,onSubmitEditAttribute:je,onSubmitEditCategory:je,onSubmitEditComponent:je,onSubmitEditContentType:je,onSubmitEditCustomFieldAttribute:je,onSubmitEditDz:je,onClickFinish:hi}),startActions:(0,t.jsx)(ee.$,{variant:"tertiary",onClick:In,children:ve({id:"app.components.Button.cancel",defaultMessage:"Cancel"})})})]})]})},kr=()=>e=>e[`${b.p}_dataManagerProvider`]||b.o,Br=()=>(0,_t.Mz)(kr(),e=>e),Ur=(e,n)=>{const s=Object.keys(e).filter(r=>{const o=O(e,r,{}),l=O(n,r,{}),i=O(o,["isTemporary"],!1),c=!mt(o,l);return i||c});return(0,b.q)(s)},zr=(e,n)=>{const s=xn(O(e,"schema.attributes",[]),n),r=O(e,"isTemporary",!1)?{tmpUID:e.uid}:{uid:e.uid};return Object.assign({},r,{category:e.category},en(e.schema,"attributes"),{attributes:s})},vn=(e,n=!1)=>{const s=O(e,"uid",null),r=xn(O(e,"schema.attributes",[]),s),o=n?{category:O(e,"category","")}:{},l=Object.assign(o,en(e.schema,"attributes"),{attributes:r});return delete l.uid,delete l.isTemporary,delete l.visible,delete l.restrictRelationsTo,l},xn=(e,n)=>e.reduce((s,{name:r,...o})=>{const l=o,i=l.target===n,c=l.type==="relation",u=O(l,"targetAttribute",null);if(!i)if(c){const p=Object.assign({},l,{targetAttribute:bn(u)});s[r]=lt(p)}else s[r]=lt(l);if(i){const p=l.target,g=Object.assign({},l,{target:p,targetAttribute:bn(u)});s[r]=lt(g)}if(l.customField){const p={...l,type:"customField"};s[r]=lt(p)}return s},{}),bn=e=>e==="-"?null:e,lt=e=>Object.keys(e).reduce((n,s)=>(e[s]!==null&&s!=="plugin"&&(n[s]=e[s]),n),{}),Wr=(e,n,s)=>Ur(e,n).map(l=>{const i=O(e,l,{});return zr(i,s)}),Vr=e=>Do(Object.keys(e).map(n=>({visible:e[n].schema.visible,name:n,title:e[n].schema.displayName,plugin:e[n].plugin||null,uid:n,to:`/plugins/${b.p}/content-types/${n}`,kind:e[n].schema.kind,restrictRelationsTo:e[n].schema.restrictRelationsTo})).filter(n=>n!==null),n=>Ro(n.title)),Cn=e=>e.reduce((n,s)=>(n[s.uid]=s,n),{}),Gr=(e,n,s,r)=>{const o=n.reduce((c,u)=>{const p=O(s,u,{});return c[u]=p,c},{});return{[r?"contentType":"component"]:e,components:o}},An=e=>Object.keys(e).reduce((n,s)=>{const r=e[s].schema;return n[s]={...e[s],schema:{...r,attributes:Yr(r.attributes)}},n},{}),Yr=e=>Object.keys(e).reduce((n,s)=>(n.push({...e[s],name:s}),n),[]),Zr=e=>{const n=Object.keys(e).reduce((s,r)=>{const o=O(e,[r]),l=o.uid;return Hr(o)&&s.push(l),s},[]);return(0,b.q)(n)},Hr=e=>O(e,["schema","attributes"],[]).some(s=>{const{type:r}=s;return r==="component"}),Tn=e=>{const n=Object.keys(e).reduce((s,r)=>{const o=e?.[r]?.schema?.attributes??[],l=Kr(o);return[...s,...l]},[]);return(0,b.q)(n)},Kr=e=>e.reduce((n,s)=>{const{type:r,component:o}=s;return r==="component"&&n.push(o),n},[]),Qr=(e,n)=>{const s=Object.keys(e).map(r=>O(e,[r,...n],""));return(0,b.q)(s)},Mn="did-not-kill-server",Jr="server is down";function et(e,n){return new Promise(s=>{fetch(`${window.strapi.backendURL}/_health`,{method:"HEAD",mode:"no-cors",headers:{"Content-Type":"application/json","Keep-Alive":"false"}}).then(r=>{if(r.status>=400)throw new Error(Jr);if(!n)throw new Error(Mn);s(e)}).catch(r=>{setTimeout(()=>et(e,r.message!==Mn).then(s),100)})})}const Xr=e=>Object.values(e.attributes).filter(s=>s.type==="dynamiczone").every(s=>Array.isArray(s.components)&&s.components.length>0),wr=({children:e})=>{const n=(0,Ye.wA)(),{components:s,contentTypes:r,isLoading:o,isLoadingForDataToBeSet:l,initialData:i,modifiedData:c,reservedNames:u}=(0,Ye.d4)(Br()),p=(0,S.useNotification)(),{lockAppWithAutoreload:g,unlockAppWithAutoreload:m}=(0,S.useAutoReloadOverlayBlocker)(),{setCurrentStep:$}=(0,S.useGuidedTour)(),{getPlugin:j}=(0,S.useStrapiApp)(),C=j(b.p),{autoReload:M}=(0,S.useAppInfo)(),{formatMessage:z}=(0,H.A)(),{trackUsage:T}=(0,S.useTracking)(),{refetchPermissions:L}=(0,S.useRBACProvider)(),{pathname:R}=(0,Te.zy)(),{onCloseModal:B}=Ze(),w=(0,Te.W5)(`/plugins/${b.p}/content-types/:uid`),ue=(0,Te.W5)(`/plugins/${b.p}/component-categories/:categoryUid/:componentUid`),be=(0,S.useFetchClient)(),{put:W,post:ve,del:q}=be,Ce=(0,f.useRef)();Ce.current=z;const ge=M,oe=w!==null,Pe=oe?"contentType":"component",me=oe?O(w,"params.uid",null):O(ue,"params.componentUid",null),J=(0,f.useRef)(),N=oe?"content-types":"components";J.current=async()=>{try{const[{data:{data:h}},{data:{data:E}},{data:V}]=await Promise.all(["components","content-types","reserved-names"].map(Ve=>be.get(`/${b.p}/${Ve}`))),ie=Cn(h),he=An(ie),Le=Cn(E),Ie=An(Le);n({type:b.G,components:he,contentTypes:Ie,reservedNames:V})}catch(h){console.error({err:h}),p({type:"warning",message:{id:"notification.error"}})}},(0,f.useEffect)(()=>(J.current(),()=>{n({type:b.r})}),[]),(0,f.useEffect)(()=>{!o&&me&&ct()},[o,R,me]),(0,f.useEffect)(()=>{M||p({type:"info",message:{id:d("notification.info.autoreaload-disable")}})},[M,p]);const Mt=(h,E,V,ie=!1,he,Le=!1)=>{const Ie=ie?b.x:b.y;n({type:Ie,attributeToSet:h,forTarget:E,targetUid:V,initialAttribute:he,shouldAddComponentToData:Le})},Ke=({attributeToSet:h,forTarget:E,targetUid:V,initialAttribute:ie})=>{n({type:b.A,attributeToSet:h,forTarget:E,targetUid:V,initialAttribute:ie})},ze=({attributeToSet:h,forTarget:E,targetUid:V,initialAttribute:ie})=>{n({type:b.E,attributeToSet:h,forTarget:E,targetUid:V,initialAttribute:ie})},Qe=(h,E)=>{n({type:b.u,dynamicZoneTarget:h,componentsToAdd:E})},jt=(h,E,V,ie,he=!1)=>{const Le=E==="contentType"?b.z:b.B;n({type:Le,data:h,componentCategory:ie,schemaType:E,uid:V,shouldAddComponentToData:he})},dt=(h,E)=>{n({type:b.C,dynamicZoneTarget:h,newComponents:E})},St=(h,E,V="")=>{const ie=h==="components"?b.F:b.H;h==="contentType"&&T("willDeleteFieldOfContentType"),n({type:ie,mainDataKey:h,attributeToRemoveName:E,componentUid:V})},Nt=async h=>{try{const E=`/${b.p}/component-categories/${h}`,V=window.confirm(z({id:d("popUpWarning.bodyMessage.category.delete")}));B(),V&&(g?.(),await q(E),await et(!0),m?.(),await de())}catch(E){console.error({err:E}),p({type:"warning",message:{id:"notification.error"}})}finally{m?.()}},Ft=async()=>{try{const h=`/${b.p}/${N}/${me}`,E=O(c,[Pe,"isTemporary"],!1),V=window.confirm(z({id:d(`popUpWarning.bodyMessage.${oe?"contentType":"component"}.delete`)}));if(B(),V){if(E){n({type:b.D});return}g?.(),await q(h),await et(!0),await m?.(),await de()}}catch(h){console.error({err:h}),p({type:"warning",message:{id:"notification.error"}})}finally{m?.()}},fe=async(h,E)=>{try{const V=`/${b.p}/component-categories/${h}`;B(),g?.(),await W(V,E),await et(!0),await m?.(),await de()}catch(V){console.error({err:V}),p({type:"warning",message:{id:"notification.error"}})}finally{m?.()}},Lt=()=>{const h=Object.assign({},s,c.components);if(!oe){const V=O(c,"component",{});Xt(h,O(V,["uid"],""),V)}const E=Zr(h);return(0,b.q)(E)},It=()=>{const h=Tn(s),E=Tn(c.components||{});return(0,b.q)([...E,...h])},Et=(h,E)=>{n({type:b.v,dzName:h,componentToRemoveIndex:E})},ct=()=>{const E=O(oe?r:s,me??"",{schema:{attributes:[]}}),V=(0,b.s)(E.schema.attributes,s),ie=Gr(E,V,s,oe),he=O(E,"isTemporary",!1)&&Lo(O(E,"schema.attributes",[]))===0;n({type:b.t,schemaToSet:ie,hasJustCreatedSchema:he})},We=(0,f.useMemo)(()=>{const h=oe?r:s;return me==="create-content-type"?!1:!Object.keys(h).includes(me||"")&&!o},[s,r,me,oe,o]),tt=(0,f.useMemo)(()=>{const h=Object.keys(r).filter(E=>O(r,[E,"schema","visible"],!0)).sort();return O(h,"0","create-content-type")},[r]);if(We)return(0,t.jsx)(Te.rd,{to:`/plugins/${b.p}/content-types/${tt}`});const ke=async h=>{try{const E=O(c,[Pe,"isTemporary"],!1),V={components:Wr(c.components,s,me)};if(oe){const Ie=(C?.apis?.forms).mutateContentTypeSchema({...vn(c.contentType),...h},i.contentType);if(!Xr(Ie)){p({type:"warning",message:{id:d("notification.error.dynamiczone-min.validation"),defaultMessage:"At least one component is required in a dynamic zone to be able to save a content type"}});return}V.contentType=Ie,T("willSaveContentType")}else V.component=vn(c.component,!0),T("willSaveComponent");g?.();const ie=`/${b.p}/${N}`,he=E?ie:`${ie}/${me}`;if(E?await ve(he,V):await W(he,V),await et(!0),m?.(),E&&(i.contentType?.schema.kind==="collectionType"||i.contentType?.schema.kind==="singleType")&&$("contentTypeBuilder.success"),oe){T("didSaveContentType");const Le=O(V,["contentType","schema","name"],""),Ie=O(i,["contentType","schema","name"],"");!E&&Le!==Ie&&T("didEditNameOfContentType")}else T("didSaveComponent");await J.current(),n({type:b.U}),await de()}catch(E){oe||T("didNotSaveComponent"),console.error({err:E.response}),p({type:"warning",message:{id:"notification.error"}})}finally{m?.()}},de=async()=>{await L()},nt=(h,E,V)=>{n({type:b.w,data:h,schemaType:E,uid:V})};return(0,t.jsx)(tn.Provider,{value:{addAttribute:Mt,addCustomFieldAttribute:Ke,addCreatedComponentToDynamicZone:Qe,allComponentsCategories:Qr(s,["category"]),changeDynamicZoneComponents:dt,components:s,componentsGroupedByCategory:Fo(s,"category"),componentsThatHaveOtherComponentInTheirAttributes:Lt(),contentTypes:r,createSchema:jt,deleteCategory:Nt,deleteData:Ft,editCategory:fe,editCustomFieldAttribute:ze,isInDevelopmentMode:ge,initialData:i,isInContentTypeView:oe,modifiedData:c,nestedComponents:It(),removeAttribute:St,removeComponentFromDynamicZone:Et,reservedNames:u,setModifiedData:ct,sortedContentTypesList:Vr(r),submitData:ke,updateSchema:nt},children:l?(0,t.jsx)(S.LoadingIndicatorPage,{}):(0,t.jsxs)(t.Fragment,{children:[e,ge&&(0,t.jsx)(Pr,{})]})})},qr=(0,f.memo)(wr),jn={actionType:null,attributeName:null,attributeType:null,categoryName:null,dynamicZoneTarget:null,forTarget:null,modalType:null,isOpen:!1,showBackLink:!1,kind:null,step:null,targetUid:null,customFieldUid:null},_r=({children:e})=>{const[n,s]=f.useState(jn),{trackUsage:r}=(0,S.useTracking)(),o=({attributeType:T,customFieldUid:L})=>{s(R=>({...R,actionType:"create",modalType:"customField",attributeType:T,customFieldUid:L}))},l=({attributeType:T,step:L})=>{n.forTarget==="contentType"&&r("didSelectContentTypeFieldType",{type:T}),s(R=>({...R,actionType:"create",modalType:"attribute",step:L,attributeType:T,showBackLink:!0}))},i=({dynamicZoneTarget:T,targetUid:L})=>{s(R=>({...R,dynamicZoneTarget:T,targetUid:L,modalType:"addComponentToDynamicZone",forTarget:"contentType",step:"1",actionType:"edit",isOpen:!0}))},c=({forTarget:T,targetUid:L})=>{s(R=>({...R,actionType:"create",forTarget:T,targetUid:L,modalType:"chooseAttribute",isOpen:!0,showBackLink:!1}))},u=T=>{s(L=>({...L,...T,isOpen:!0}))},p=T=>{s(L=>({...L,categoryName:T,actionType:"edit",modalType:"editCategory",isOpen:!0}))},g=({forTarget:T,targetUid:L,attributeName:R,attributeType:B,customFieldUid:w})=>{s(ue=>({...ue,modalType:"customField",customFieldUid:w,actionType:"edit",forTarget:T,targetUid:L,attributeName:R,attributeType:B,isOpen:!0}))},m=({forTarget:T,targetUid:L,attributeName:R,attributeType:B,step:w})=>{s(ue=>({...ue,modalType:"attribute",actionType:"edit",forTarget:T,targetUid:L,attributeName:R,attributeType:B,step:w,isOpen:!0}))},$=({modalType:T,forTarget:L,targetUid:R,kind:B})=>{s(w=>({...w,modalType:T,actionType:"edit",forTarget:L,targetUid:R,kind:B,isOpen:!0}))},j=()=>{s(jn)},C=({forTarget:T,targetUid:L})=>{s(R=>({...R,forTarget:T,targetUid:L,modalType:"chooseAttribute"}))},M=()=>{s(T=>({...T,attributeType:"component",modalType:"attribute",step:"2"}))},z=({dynamicZoneTarget:T})=>{s(L=>({...L,dynamicZoneTarget:T,modalType:"addComponentToDynamicZone",actionType:"create",step:"1",attributeType:null,attributeName:null}))};return(0,t.jsx)(nn.Provider,{value:{...n,onClickSelectField:l,onClickSelectCustomField:o,onCloseModal:j,onNavigateToChooseAttributeModal:C,onNavigateToAddCompoToDZModal:z,onOpenModalAddComponentsToDZ:i,onNavigateToCreateComponentStep2:M,onOpenModalAddField:c,onOpenModalCreateSchema:u,onOpenModalEditCategory:p,onOpenModalEditField:m,onOpenModalEditCustomField:g,onOpenModalEditSchema:$,setFormModalNavigationState:s},children:e})},ei=(0,f.lazy)(()=>a.e(7508).then(a.bind(a,7508))),ti=()=>{const{url:e}=(0,Te.W5)();return(0,t.jsx)(f.Suspense,{fallback:(0,t.jsx)(S.LoadingIndicatorPage,{}),children:(0,t.jsx)(Te.dO,{children:(0,t.jsx)(Te.qh,{path:`${e}/:componentUid`,children:(0,t.jsx)(ei,{})})})})},Sn=(0,f.lazy)(()=>a.e(7508).then(a.bind(a,7508))),ni=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{formatMessage:e}=(0,H.A)(),n=e({id:`${b.p}.plugin.name`,defaultMessage:"Content Types Builder"}),{startSection:s}=(0,S.useGuidedTour)(),r=(0,f.useRef)(s);return(0,f.useEffect)(()=>{r.current&&r.current("contentTypeBuilder")},[]),(0,t.jsxs)(S.CheckPagePermissions,{permissions:b.P.main,children:[(0,t.jsx)(Hn.m,{title:n}),(0,t.jsx)(_r,{children:(0,t.jsx)(qr,{children:(0,t.jsx)(Zn.P,{sideNav:(0,t.jsx)(ko,{}),children:(0,t.jsx)(f.Suspense,{fallback:(0,t.jsx)(S.LoadingIndicatorPage,{}),children:(0,t.jsxs)(Te.dO,{children:[(0,t.jsx)(Te.qh,{path:`/plugins/${b.p}/content-types/create-content-type`,component:Sn}),(0,t.jsx)(Te.qh,{path:`/plugins/${b.p}/content-types/:uid`,component:Sn}),(0,t.jsx)(Te.qh,{path:`/plugins/${b.p}/component-categories/:categoryUid`,component:ti})]})})})})})]})}},Symbol.toStringTag,{value:"Module"}))}}]);
